(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{29:function(e,t,o){"use strict";o.d(t,"a",function(){return n});var r=o(28);var n=function e(t){var o=t.size,n=void 0===o?5:o,a=t.material,i=t.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed=Math.random();var s=1,c=1,u=1;this.color=new r.Color,this.color.setRGB(s,c,u),this.material=a||new r.MeshBasicMaterial({color:this.color}),this.geometry=new r.BoxGeometry(n,n,n),this.mesh=new r.Mesh(this.geometry,this.material),i&&this.mesh.position.copy(i),this.root=this.mesh}},30:function(e,t,o){"use strict";o.d(t,"a",function(){return c});var r=o(28);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=a(this,i(t).call(this));var o=new r.HemisphereLight(16777215,16777215,3);return o.color.setHSL(Math.NormalizeHue(325),.1,.94),o.groundColor.setHSL(Math.NormalizeHue(325),.1,.64),o.position.set(0,2,0),e.add(o),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Group"]),t}()},31:function(e,t,o){"use strict";o.d(t,"a",function(){return n});var r=o(28);var n=function e(t){var o=t.size,n=void 0===o?5:o,a=t.material,i=t.position,s=t.widthSegments,c=t.heightSegments,u=t.castShadow,h=t.receiveShadow;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed=Math.random();var l=1,f=1,p=1;this.color=new r.Color,this.color.setRGB(l,f,p),this.material=a||new r.MeshBasicMaterial({color:this.color});var d=this.material.length>1?r.SphereBufferGeometry:r.SphereGeometry;if(this.geometry=new d(n,s||7,c||9),this.material.length){this.geometry.clearGroups();for(var y=0;y<a.length;y++)this.geometry.addGroup(0,1/0,y)}this.mesh=new r.Mesh(this.geometry,this.material),this.mesh.castShadow=u,this.mesh.receiveShadow=h,i&&this.mesh.position.copy(i),this.root=this.mesh}},33:function(e,t,o){"use strict";o.d(t,"a",function(){return l});var r=o(28);o(30);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h={intensity:1,castShadow:!1,bias:0,projectionSides:void 0,mapSize:512},l=function(e){function t(){var e,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];o=s(this,(e=c(t)).call.apply(e,[this].concat(i)));var l=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){a(e,t,o[t])})}return e}({},h,i[0]),f=l.intensity,p=l.castShadow,d=l.bias,y=l.projectionSides,w=l.mapSize;o.intensity=f,o.projectionSides=y,o.mapSize=w,console.log("mapsize",o.mapSize);var m=new r.DirectionalLight("white",.65*o.intensity),v=new r.DirectionalLight("white",.55*o.intensity);return m.shadow.bias=d||0,v.shadow.bias=d||0,m.castShadow=p,v.castShadow=p,o.updateProjection(m,o.projectionSides),o.updateProjection(v,o.projectionSides),o.updateShadowMap(m,o.mapSize),o.updateShadowMap(v,o.mapSize),m.position.copy(new r.Vector3(9,3.5,0)),v.position.copy(new r.Vector3(-10,2,0)),o.add(m,v),o}var o,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Group"]),o=t,(n=[{key:"updateProjection",value:function(e,t){e.shadow.camera.left=-t,e.shadow.camera.right=t,e.shadow.camera.updateProjectionMatrix()}},{key:"updateShadowMap",value:function(e,t){e.shadow.mapSize.width=t,e.shadow.mapSize.height=t}}])&&i(o.prototype,n),l&&i(o,l),t}()},40:function(e,t,o){var r=o(41);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(1)(r,n);r.locals&&(e.exports=r.locals)},41:function(e,t,o){t=e.exports=o(0)(!1);var r=o(42),n=r(o(43)),a=r(o(44));t.push([e.i,"/* vt323-400normal - latin */\n@font-face {\n  font-family: 'VT323';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src:\n    local('VT323 Regular '),\n    local('VT323-Regular'),\n    url("+n+") format('woff2'), \n    url("+a+") format('woff'); /* Modern Browsers */\n}\n\n",""])},42:function(e,t,o){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},43:function(e,t,o){e.exports=o.p+"fonts/vt323-latin-400.woff2"},44:function(e,t,o){e.exports=o.p+"fonts/vt323-latin-400.woff"},6:function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return u});var r=o(28),n=o(33),a=o(30),i=o(29),s=o(31);function c(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}o(40);var u=function(){function e(t){var o=t.scene,n=t.onLoad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=o,this.editScene(),this.root=new r.Group,this.addLights(),this.addSkyscrapers(),this.addSky(),this.addGround(),this.addWhereAreYou(),n&&n()}var t,o,u;return t=e,(o=[{key:"addLights",value:function(){var e=new n.a;this.root.add(e);var t=new a.a;this.root.add(t)}},{key:"editScene",value:function(){var e=this.scene.camera.aspect,t=new r.Color;t.setIntHSL(244,30,8),this.scene.renderer.setClearColor(t),this.scene.camera=new r.OrthographicCamera(7*e/-2,7*e/2,3.5,-3.5,.1,150),this.scene.camera.position.copy(new r.Vector3(10,10,10)),this.scene.camera.lookAt(new r.Vector3(0,0,0))}},{key:"addSkyscrapers",value:function(){var e=new r.MeshStandardMaterial({color:4276048,metalness:.3,roughness:.2}),t=new r.MeshBasicMaterial({color:2301751}),o=new r.MeshBasicMaterial({color:13421789});this.cubes=[];this.cubesParent=new r.Group;for(var n=-5;n<5;n++)for(var a=-5;a<5;a++){for(var s=new i.a({size:1,material:e,position:new r.Vector3(1.5*n+(Math.random()-.5),0,1.5*a)}),c=0;c<80;c++){var u=Math.random()>.5?.5:-.5;if(!(u<0)){var h=.8*Math.random()-.4,l=Math.random()*(Math.random()>.5?.4:-.4);h=.1*Math.round(10*h),l=.2*Math.round(5*l);var f=new i.a({size:.05,material:Math.random()>.1?t:o,position:new r.Vector3(l,h,u)});s.root.add(f.root)}}s.root.scale.copy(new r.Vector3(1,2,1)),this.cubesParent.add(s.root),this.cubes.push(s)}this.root.add(this.cubesParent)}},{key:"addSky",value:function(){var e=new r.MeshStandardMaterial({color:328489,metalness:.1,roughness:.9,side:r.BackSide}),t=new r.MeshBasicMaterial({color:13421789,side:r.BackSide,wireframe:!0}),o=new s.a({size:5,position:new r.Vector3(-.5,1,0),material:e,heightSegments:72,widthSegments:128});o.root.scale.copy(new r.Vector3(10,9.25,10)),this.root.add(o.root);for(var n=0;n<120;n++){var a=Math.random()*Math.PI*2,i=Math.random()*Math.PI*.6,c=new s.a({size:.018,material:t,position:new r.Vector3(20*Math.sin(a),8*Math.cos(i),-10)});this.root.add(c.root)}}},{key:"addGround",value:function(){var e=new r.MeshStandardMaterial({color:1250067,metalness:.7,roughness:.9,flatShading:!0}),t=new s.a({size:3,position:new r.Vector3(0,-1,0),material:e});t.root.scale.copy(new r.Vector3(5,.5,4)),this.root.add(t.root)}},{key:"addWhereAreYou",value:function(){this.whereAreYou=document.createElement("h1"),this.whereAreYou.innerHTML="where are you",this.whereAreYou.style.margin="auto",this.whereAreYou.style.marginTop="30vh",this.whereAreYou.style.verticalAlign="middle",this.whereAreYou.style.fontFamily="'VT323', monospace",this.whereAreYou.style.color="antiquewhite",this.whereAreYou.style.fontWeight="lighter",this.whereAreYou.style.cursor="default",this.whereAreYou.style.letterSpacing="0.2em",document.body.appendChild(this.whereAreYou)}},{key:"update",value:function(e){var t=.2*e;this.updateSkyscrapers(t),this.updateCamera(e)}},{key:"updateSkyscrapers",value:function(e){for(var t=0;t<this.cubesParent.children.length;t++){var o=this.cubesParent.children[t],r=o.position;r.y=Math.sin(t*Math.PI*.25+e),o.position.copy(r)}}},{key:"updateCamera",value:function(e){this.scene.camera.position.copy(new r.Vector3(10*Math.cos(.12*e)+2,Math.cos(.2*e)+1,30)),this.scene.camera.lookAt(new r.Vector3(0,2.5,6)),this.scene.camera.updateProjectionMatrix()}},{key:"onRemove",value:function(){document.body.removeChild(this.whereAreYou)}}])&&c(t.prototype,o),u&&c(t,u),e}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY0N1YmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL0xpZ2h0cy9XaGl0ZUhlbWkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL09iamVjdHMvQmFzaWNTcGhlcmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL0xpZ2h0cy9Ud29EaXJlY3Rpb25hbHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3R5cGVmYWNlLXZ0MzIzL2luZGV4LmNzcz82MTY1Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90eXBlZmFjZS12dDMyMy9pbmRleC5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3VybC1lc2NhcGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3R5cGVmYWNlLXZ0MzIzL2ZpbGVzL3Z0MzIzLWxhdGluLTQwMC53b2ZmMiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdHlwZWZhY2UtdnQzMjMvZmlsZXMvdnQzMjMtbGF0aW4tNDAwLndvZmYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL0xvb3BzL1NreXNjcmFwZXJzTG9vcC5qcyJdLCJuYW1lcyI6WyJCYXNpY0N1YmUiLCJfcmVmIiwiX3JlZiRzaXplIiwic2l6ZSIsIm1hdGVyaWFsIiwicG9zaXRpb24iLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwic2VlZCIsIk1hdGgiLCJyYW5kb20iLCJjb2xvciIsIkNvbG9yIiwic2V0UkdCIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJnZW9tZXRyeSIsIkJveEdlb21ldHJ5IiwibWVzaCIsIk1lc2giLCJjb3B5Iiwicm9vdCIsIldoaXRlSGVtaSIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfZ2V0UHJvdG90eXBlT2YiLCJjYWxsIiwiaGVtaUxpZ2h0IiwiSGVtaXNwaGVyZUxpZ2h0Iiwic2V0SFNMIiwiTm9ybWFsaXplSHVlIiwiZ3JvdW5kQ29sb3IiLCJzZXQiLCJhZGQiLCJHcm91cCIsIkJhc2ljU3BoZXJlIiwid2lkdGhTZWdtZW50cyIsImhlaWdodFNlZ21lbnRzIiwiY2FzdFNoYWRvdyIsInJlY2VpdmVTaGFkb3ciLCJTcGhlcmUiLCJsZW5ndGgiLCJTcGhlcmVCdWZmZXJHZW9tZXRyeSIsIlNwaGVyZUdlb21ldHJ5IiwiY2xlYXJHcm91cHMiLCJpIiwiYWRkR3JvdXAiLCJJbmZpbml0eSIsImRlZmF1bHRQYXJhbXMiLCJpbnRlbnNpdHkiLCJiaWFzIiwicHJvamVjdGlvblNpZGVzIiwidW5kZWZpbmVkIiwibWFwU2l6ZSIsIlR3b0RpcmVjdGlvbmFscyIsIl9nZXRQcm90b3R5cGVPZjIiLCJfbGVuIiwiYXJndW1lbnRzIiwiYXJncyIsIkFycmF5IiwiX2tleSIsImFwcGx5IiwiY29uY2F0IiwiX2RlZmF1bHRQYXJhbXMkYXJncyQiLCJfb2JqZWN0U3ByZWFkIiwiY29uc29sZSIsImxvZyIsImRpcmVjdGlvbmFsTGlnaHQiLCJEaXJlY3Rpb25hbExpZ2h0IiwiZGlyZWN0aW9uYWxMaWdodDIiLCJzaGFkb3ciLCJ1cGRhdGVQcm9qZWN0aW9uIiwidXBkYXRlU2hhZG93TWFwIiwiVmVjdG9yMyIsImxpZ2h0IiwiY2FtZXJhIiwibGVmdCIsInJpZ2h0IiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsIndpZHRoIiwiaGVpZ2h0IiwiY29udGVudCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGUiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsImxvY2FscyIsImV4cG9ydHMiLCJ1cmxFc2NhcGUiLCJfX19DU1NfTE9BREVSX1VSTF9fXzBfX18iLCJfX19DU1NfTE9BREVSX1VSTF9fXzFfX18iLCJwdXNoIiwidXJsIiwibmVlZFF1b3RlcyIsInRlc3QiLCJzbGljZSIsInJlcGxhY2UiLCJwIiwicmVxdWlyZSIsIlNreXNjcmFwZXJzTG9vcCIsInNjZW5lIiwib25Mb2FkIiwiZWRpdFNjZW5lIiwiYWRkTGlnaHRzIiwiYWRkU2t5c2NyYXBlcnMiLCJhZGRTa3kiLCJhZGRHcm91bmQiLCJhZGRXaGVyZUFyZVlvdSIsImRpcmVjdGlvbmFscyIsImhlbWkiLCJhc3BlY3QiLCJjbGVhckNvbG9yIiwic2V0SW50SFNMIiwicmVuZGVyZXIiLCJzZXRDbGVhckNvbG9yIiwiT3J0aG9ncmFwaGljQ2FtZXJhIiwiZnJ1c3R1bVNpemUiLCJsb29rQXQiLCJza3lTY3JhcGVyTWF0IiwiTWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJtZXRhbG5lc3MiLCJyb3VnaG5lc3MiLCJ3aW5kb3dPZmZNYXQiLCJ3aW5kb3dPbk1hdCIsImN1YmVzIiwiY3ViZXNQYXJlbnQiLCJ4IiwieiIsIm5ld0N1YmUiLCJqIiwieE9mZnNldCIsInlPZmZzZXQiLCJ6T2Zmc2V0Iiwicm91bmQiLCJuZXdXaW5kb3ciLCJzY2FsZSIsInNreU1hdCIsInNpZGUiLCJCYWNrU2lkZSIsInN0YXJzTWF0Iiwid2lyZWZyYW1lIiwic2t5IiwicGh5IiwiUEkiLCJ0aGV0YSIsIm5ld1N0YXIiLCJzaW4iLCJjb3MiLCJncm91bmRNYXQiLCJmbGF0U2hhZGluZyIsImdyb3VuZCIsIndoZXJlQXJlWW91IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwic3R5bGUiLCJtYXJnaW4iLCJtYXJnaW5Ub3AiLCJ2ZXJ0aWNhbEFsaWduIiwiZm9udEZhbWlseSIsImZvbnRXZWlnaHQiLCJjdXJzb3IiLCJsZXR0ZXJTcGFjaW5nIiwiYm9keSIsImFwcGVuZENoaWxkIiwidGltZUVsYXBzZWQiLCJhbmltYXRpb25UaW1lIiwidXBkYXRlU2t5c2NyYXBlcnMiLCJ1cGRhdGVDYW1lcmEiLCJjaGlsZHJlbiIsImNoaWxkIiwibmV3UG9zIiwieSIsInJlbW92ZUNoaWxkIl0sIm1hcHBpbmdzIjoieUlBT3FCQSxFQUNuQixTQUFBQSxFQUFBQyxHQUE0QyxJQUFBQyxFQUFBRCxFQUEvQkUsWUFBK0IsSUFBQUQsRUFBeEIsRUFBd0JB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LEdBRXZCaEssS0FBS2tLLGFBQWFILDZDQUdKQyxHQUNkLElBQUssSUFBSTNILEVBQUksRUFBR0EsRUFBSXJDLEtBQUt1SCxZQUFZNEMsU0FBU2xJLE9BQVFJLElBQUssQ0FDdkQsSUFBTStILEVBQVFwSyxLQUFLdUgsWUFBWTRDLFNBQVM5SCxHQUNsQ2dJLEVBQVNELEVBQU10SyxTQUNyQnVLLEVBQU9DLEVBQUlwSyxLQUFLMEksSUFBS3ZHLEVBQUluQyxLQUFLdUksR0FBSyxJQUFRdUIsR0FDM0NJLEVBQU10SyxTQUFTYyxLQUFLeUoseUNBSWZOLEdBQ1QvSixLQUFLOEYsTUFBTTNCLE9BQU9yRSxTQUFTYyxLQUN2QixJQUFJcUQsVUFDOEIsR0FBOUIvRCxLQUFLMkksSUFBa0IsSUFBZGtCLEdBQTBCLEVBQ25DN0osS0FBSzJJLElBQWtCLEdBQWRrQixHQUFvQixFQUM3QixLQUVSL0osS0FBSzhGLE1BQU0zQixPQUFPNEMsT0FBTyxJQUFJOUMsVUFBUSxFQUFHLElBQUssSUFDN0NqRSxLQUFLOEYsTUFBTTNCLE9BQU9HLDREQUlsQjRFLFNBQVNXLEtBQUtVLFlBQVl2SyxLQUFLaUoiLCJmaWxlIjoiLi9qcy9Ta3lzY3JhcGVyc0xvb3AuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29sb3IsXG4gIE1lc2hCYXNpY01hdGVyaWFsLFxuICBCb3hHZW9tZXRyeSxcbiAgTWVzaFxufSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2ljQ3ViZSB7XG4gIGNvbnN0cnVjdG9yKHtzaXplID0gNSwgbWF0ZXJpYWwsIHBvc2l0aW9ufSkge1xuICAgIHRoaXMuc2VlZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgY29uc3QgY29sb3IgPSB7cjoxICxnOjEsIGI6MX07XG4gICAgdGhpcy5jb2xvciA9IG5ldyBDb2xvcigpO1xuICAgIHRoaXMuY29sb3Iuc2V0UkdCKGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIpO1xuXG4gICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsIHx8IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICBjb2xvcjogdGhpcy5jb2xvclxuICAgIH0pO1xuXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBCb3hHZW9tZXRyeShzaXplLCBzaXplLCBzaXplKTtcblxuICAgIHRoaXMubWVzaCA9IG5ldyBNZXNoKFxuICAgICAgdGhpcy5nZW9tZXRyeSxcbiAgICAgIHRoaXMubWF0ZXJpYWxcbiAgICApO1xuXG4gICAgaWYgKHBvc2l0aW9uKSB7XG4gICAgICB0aGlzLm1lc2gucG9zaXRpb24uY29weShwb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5yb290ID0gdGhpcy5tZXNoO1xuICB9XG59XG4iLCJpbXBvcnQge1xuXHRHcm91cCxcblx0SGVtaXNwaGVyZUxpZ2h0XG59IGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2hpdGVIZW1pIGV4dGVuZHMgR3JvdXAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3QgaGVtaUxpZ2h0ID0gbmV3IEhlbWlzcGhlcmVMaWdodCggMHhmZmZmZmYsIDB4ZmZmZmZmLCAzLjAgKTtcblx0XHRoZW1pTGlnaHQuY29sb3Iuc2V0SFNMKFxuXHRcdFx0TWF0aC5Ob3JtYWxpemVIdWUoMzI1KSwgXG5cdFx0XHQwLjEsXG5cdFx0XHQwLjk0XG5cdFx0KTtcblx0XHRoZW1pTGlnaHQuZ3JvdW5kQ29sb3Iuc2V0SFNMKFxuXHRcdFx0TWF0aC5Ob3JtYWxpemVIdWUoMzI1KSwgXG5cdFx0XHQwLjEsIFxuXHRcdFx0MC42NFxuXHRcdCk7XG5cdFx0aGVtaUxpZ2h0LnBvc2l0aW9uLnNldCggMCwgMiwgMCApO1xuXHRcdHRoaXMuYWRkKCBoZW1pTGlnaHQgKTtcblx0fVxufVxuIiwiaW1wb3J0IHtcbiAgQ29sb3IsXG4gIE1lc2hCYXNpY01hdGVyaWFsLFxuICBTcGhlcmVCdWZmZXJHZW9tZXRyeSxcbiAgU3BoZXJlR2VvbWV0cnksXG4gIE1lc2hcbn0gZnJvbSAndGhyZWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNpY1NwaGVyZSB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBzaXplID0gNSxcbiAgICBtYXRlcmlhbCxcbiAgICBwb3NpdGlvbixcbiAgICB3aWR0aFNlZ21lbnRzLFxuICAgIGhlaWdodFNlZ21lbnRzLFxuICAgIGNhc3RTaGFkb3csXG4gICAgcmVjZWl2ZVNoYWRvd1xuICB9KSB7XG4gICAgdGhpcy5zZWVkID0gTWF0aC5yYW5kb20oKTtcbiAgICBjb25zdCBjb2xvciA9IHtyOjEgLGc6MSwgYjoxfTtcbiAgICB0aGlzLmNvbG9yID0gbmV3IENvbG9yKCk7XG4gICAgdGhpcy5jb2xvci5zZXRSR0IoY29sb3IuciwgY29sb3IuZywgY29sb3IuYik7XG5cbiAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWwgfHwgbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgU3BoZXJlID0gdGhpcy5tYXRlcmlhbC5sZW5ndGggPiAxID8gU3BoZXJlQnVmZmVyR2VvbWV0cnkgOiBTcGhlcmVHZW9tZXRyeTtcblxuICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgU3BoZXJlKFxuICAgICAgc2l6ZSwgXG4gICAgICB3aWR0aFNlZ21lbnRzIHx8IDcsIFxuICAgICAgaGVpZ2h0U2VnbWVudHMgfHwgOSk7XG4gICAgXG4gICAgaWYgKHRoaXMubWF0ZXJpYWwubGVuZ3RoKSB7XG4gICAgICB0aGlzLmdlb21ldHJ5LmNsZWFyR3JvdXBzKCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGVyaWFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuYWRkR3JvdXAoIDAsIEluZmluaXR5LCBpICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2goXG4gICAgICB0aGlzLmdlb21ldHJ5LFxuICAgICAgdGhpcy5tYXRlcmlhbFxuICAgICk7XG5cbiAgICB0aGlzLm1lc2guY2FzdFNoYWRvdyA9IGNhc3RTaGFkb3c7XG4gICAgdGhpcy5tZXNoLnJlY2VpdmVTaGFkb3cgPSByZWNlaXZlU2hhZG93O1xuXG4gICAgaWYgKHBvc2l0aW9uKSB7XG4gICAgICB0aGlzLm1lc2gucG9zaXRpb24uY29weShwb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5yb290ID0gdGhpcy5tZXNoO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEdyb3VwLFxuICAgIERpcmVjdGlvbmFsTGlnaHQsXG4gICAgVmVjdG9yM1xuICB9IGZyb20gJ3RocmVlJztcbmltcG9ydCBXaGl0ZUhlbWkgZnJvbSAnLi9XaGl0ZUhlbWkuanMnO1xuXG5jb25zdCBkZWZhdWx0UGFyYW1zID0ge1xuICAgIGludGVuc2l0eTogMSxcbiAgICBjYXN0U2hhZG93OiBmYWxzZSxcbiAgICBiaWFzOiAwLFxuICAgIHByb2plY3Rpb25TaWRlczogdW5kZWZpbmVkLFxuICAgIG1hcFNpemU6IDUxMixcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHdvRGlyZWN0aW9uYWxzIGV4dGVuZHMgR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJncyk7XG5cdFx0Y29uc3Qge1xuICAgICAgICAgICAgaW50ZW5zaXR5LFxuICAgICAgICAgICAgY2FzdFNoYWRvdyxcbiAgICAgICAgICAgIGJpYXMsXG4gICAgICAgICAgICBwcm9qZWN0aW9uU2lkZXMsXG4gICAgICAgICAgICBtYXBTaXplXG4gICAgICAgIH0gPSB7XG4gICAgICAgICAgICAuLi5kZWZhdWx0UGFyYW1zLFxuICAgICAgICAgICAgLi4uYXJnc1swXVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmludGVuc2l0eSA9IGludGVuc2l0eTtcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uU2lkZXMgPSBwcm9qZWN0aW9uU2lkZXM7XG4gICAgICAgIHRoaXMubWFwU2l6ZSA9IG1hcFNpemU7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibWFwc2l6ZVwiLCB0aGlzLm1hcFNpemUpXG4gICAgICAgIFxuICAgICAgICAvKiBjb25zdCB3aGl0ZUVtaSA9IG5ldyBXaGl0ZUhlbWkoKTtcbiAgICAgICAgdGhpcy5hZGQod2hpdGVFbWkpOyAqL1xuXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHQgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCgnd2hpdGUnLCAwLjY1ICogdGhpcy5pbnRlbnNpdHkpO1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0MiA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KCd3aGl0ZScsIDAuNTUgKiB0aGlzLmludGVuc2l0eSk7XG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93LmJpYXMgPSBiaWFzIHx8IDA7XG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQyLnNoYWRvdy5iaWFzID0gYmlhcyB8fCAwO1xuICAgICAgICBcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodDIuY2FzdFNoYWRvdyA9IGNhc3RTaGFkb3c7XG5cbiAgICAgICAgdGhpcy51cGRhdGVQcm9qZWN0aW9uKGRpcmVjdGlvbmFsTGlnaHQsIHRoaXMucHJvamVjdGlvblNpZGVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVQcm9qZWN0aW9uKGRpcmVjdGlvbmFsTGlnaHQyLCB0aGlzLnByb2plY3Rpb25TaWRlcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU2hhZG93TWFwKGRpcmVjdGlvbmFsTGlnaHQsIHRoaXMubWFwU2l6ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlU2hhZG93TWFwKGRpcmVjdGlvbmFsTGlnaHQyLCB0aGlzLm1hcFNpemUpO1xuXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQucG9zaXRpb24uY29weShcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKFxuICAgICAgICAgICAgICAgIDksXG4gICAgICAgICAgICAgICAgMy41LFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Mi5wb3NpdGlvbi5jb3B5KFxuICAgICAgICAgICAgbmV3IFZlY3RvcjMoXG4gICAgICAgICAgICAgICAgLTEwLFxuICAgICAgICAgICAgICAgIDIsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuYWRkKGRpcmVjdGlvbmFsTGlnaHQsIGRpcmVjdGlvbmFsTGlnaHQyKTtcbiAgICB9XG5cbiAgICB1cGRhdGVQcm9qZWN0aW9uKGxpZ2h0LCBwcm9qZWN0aW9uU2lkZXMpIHtcbiAgICAgICAgbGlnaHQuc2hhZG93LmNhbWVyYS5sZWZ0ID0gLXByb2plY3Rpb25TaWRlcztcbiAgICAgICAgbGlnaHQuc2hhZG93LmNhbWVyYS5yaWdodCA9IHByb2plY3Rpb25TaWRlcztcbiAgICAgICAgbGlnaHQuc2hhZG93LmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2hhZG93TWFwKGxpZ2h0LCBtYXBTaXplKSB7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5tYXBTaXplLndpZHRoID0gbWFwU2l6ZTtcbiAgICAgICAgbGlnaHQuc2hhZG93Lm1hcFNpemUuaGVpZ2h0ID0gbWFwU2l6ZTtcbiAgICB9XG59IiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2luZGV4LmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpKGZhbHNlKTtcbi8vIEltcG9ydHNcbnZhciB1cmxFc2NhcGUgPSByZXF1aXJlKFwiLi4vY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvdXJsLWVzY2FwZS5qc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9fXzBfX18gPSB1cmxFc2NhcGUocmVxdWlyZShcIi4vZmlsZXMvdnQzMjMtbGF0aW4tNDAwLndvZmYyXCIpKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9fXzFfX18gPSB1cmxFc2NhcGUocmVxdWlyZShcIi4vZmlsZXMvdnQzMjMtbGF0aW4tNDAwLndvZmZcIikpO1xuXG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qIHZ0MzIzLTQwMG5vcm1hbCAtIGxhdGluICovXFxuQGZvbnQtZmFjZSB7XFxuICBmb250LWZhbWlseTogJ1ZUMzIzJztcXG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcXG4gIGZvbnQtZGlzcGxheTogc3dhcDtcXG4gIGZvbnQtd2VpZ2h0OiA0MDA7XFxuICBzcmM6XFxuICAgIGxvY2FsKCdWVDMyMyBSZWd1bGFyICcpLFxcbiAgICBsb2NhbCgnVlQzMjMtUmVndWxhcicpLFxcbiAgICB1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9fXzBfX18gKyBcIikgZm9ybWF0KCd3b2ZmMicpLCBcXG4gICAgdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfX18xX19fICsgXCIpIGZvcm1hdCgnd29mZicpOyAvKiBNb2Rlcm4gQnJvd3NlcnMgKi9cXG59XFxuXFxuXCIsIFwiXCJdKTtcblxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZXNjYXBlKHVybCwgbmVlZFF1b3Rlcykge1xuICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9IC8vIElmIHVybCBpcyBhbHJlYWR5IHdyYXBwZWQgaW4gcXVvdGVzLCByZW1vdmUgdGhlbVxuXG5cbiAgaWYgKC9eWydcIl0uKlsnXCJdJC8udGVzdCh1cmwpKSB7XG4gICAgdXJsID0gdXJsLnNsaWNlKDEsIC0xKTtcbiAgfSAvLyBTaG91bGQgdXJsIGJlIHdyYXBwZWQ/XG4gIC8vIFNlZSBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3NzLXZhbHVlcy0zLyN1cmxzXG5cblxuICBpZiAoL1tcIicoKSBcXHRcXG5dLy50ZXN0KHVybCkgfHwgbmVlZFF1b3Rlcykge1xuICAgIHJldHVybiAnXCInICsgdXJsLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKS5yZXBsYWNlKC9cXG4vZywgJ1xcXFxuJykgKyAnXCInO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZm9udHMvdnQzMjMtbGF0aW4tNDAwLndvZmYyXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZm9udHMvdnQzMjMtbGF0aW4tNDAwLndvZmZcIjsiLCJpbXBvcnQge1xuICAgIFZlY3RvcjMsXG4gICAgQ29sb3IsXG4gICAgQmFja1NpZGUsXG4gICAgR3JvdXAsXG4gICAgT3J0aG9ncmFwaGljQ2FtZXJhLFxuICAgIE1lc2hTdGFuZGFyZE1hdGVyaWFsLFxuICAgIE1lc2hCYXNpY01hdGVyaWFsXG4gIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IFR3b0RpcmVjdGlvbmFscyBmcm9tICcuLi9MaWdodHMvVHdvRGlyZWN0aW9uYWxzLmpzJztcbmltcG9ydCBXaGl0ZUhlbWkgZnJvbSAnLi4vTGlnaHRzL1doaXRlSGVtaS5qcyc7XG5pbXBvcnQgQmFzaWNDdWJlIGZyb20gJy4uL09iamVjdHMvQmFzaWNDdWJlLmpzJztcbmltcG9ydCBCYXNpY1NwaGVyZSBmcm9tICcuLi9PYmplY3RzL0Jhc2ljU3BoZXJlLmpzJztcbnJlcXVpcmUoJ3R5cGVmYWNlLXZ0MzIzJyk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNreXNjcmFwZXJzTG9vcCB7XG4gICAgY29uc3RydWN0b3Ioe3NjZW5lLCBvbkxvYWR9KSB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcblxuICAgICAgICB0aGlzLmVkaXRTY2VuZSgpO1xuXG4gICAgICAgIHRoaXMucm9vdCA9IG5ldyBHcm91cCgpO1xuXG4gICAgICAgIHRoaXMuYWRkTGlnaHRzKCk7XG5cbiAgICAgICAgdGhpcy5hZGRTa3lzY3JhcGVycygpO1xuXG4gICAgICAgIHRoaXMuYWRkU2t5KCk7XG5cbiAgICAgICAgdGhpcy5hZGRHcm91bmQoKTtcblxuICAgICAgICB0aGlzLmFkZFdoZXJlQXJlWW91KCk7XG5cbiAgICAgICAgaWYgKG9uTG9hZCkgb25Mb2FkKCk7XG4gICAgfVxuXG4gICAgYWRkTGlnaHRzKCkge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25hbHMgPSBuZXcgVHdvRGlyZWN0aW9uYWxzKCk7XG4gICAgICAgIHRoaXMucm9vdC5hZGQoZGlyZWN0aW9uYWxzKTtcbiAgICAgICAgY29uc3QgaGVtaSA9IG5ldyBXaGl0ZUhlbWkoKTtcbiAgICAgICAgdGhpcy5yb290LmFkZChoZW1pKTtcbiAgICB9XG5cbiAgICBlZGl0U2NlbmUoKSB7XG4gICAgICAgIGNvbnN0IGZydXN0dW1TaXplID0gNztcbiAgICAgICAgY29uc3QgYXNwZWN0ID0gdGhpcy5zY2VuZS5jYW1lcmEuYXNwZWN0O1xuICAgICAgICBjb25zdCBjbGVhckNvbG9yID0gbmV3IENvbG9yKCk7XG4gICAgICAgIGNsZWFyQ29sb3Iuc2V0SW50SFNMKDI0NCwgMzAsIDgpO1xuICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoY2xlYXJDb2xvcik7XG4gICAgICAgIHRoaXMuc2NlbmUuY2FtZXJhID0gbmV3IE9ydGhvZ3JhcGhpY0NhbWVyYShmcnVzdHVtU2l6ZSAqIGFzcGVjdCAvIC0yLCBmcnVzdHVtU2l6ZSAqIGFzcGVjdCAvIDIsIGZydXN0dW1TaXplIC8gMiwgZnJ1c3R1bVNpemUgLyAtMiwgMC4xLCAxNTApO1xuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS5wb3NpdGlvbi5jb3B5KG5ldyBWZWN0b3IzKDEwLCAxMCwgMTApKTtcbiAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEubG9va0F0KG5ldyBWZWN0b3IzKDAsIDAsIDApKTtcbiAgICB9XG5cbiAgICBhZGRTa3lzY3JhcGVycygpIHtcbiAgICAgICAgY29uc3Qgc2t5U2NyYXBlck1hdCA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogMHg0MTNmNTAsXG4gICAgICAgICAgICBtZXRhbG5lc3M6IDAuMyxcbiAgICAgICAgICAgIHJvdWdobmVzczogMC4yXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHdpbmRvd09mZk1hdCA9IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogMHgyMzFmMzdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgd2luZG93T25NYXQgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICAgICAgY29sb3I6IDB4Y2NjY2RkIC8vMHhiN2E1MWZcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jdWJlcyA9IFtdO1xuXG4gICAgICAgIGNvbnN0IGhhbGZDb3VudCA9IDU7XG5cbiAgICAgICAgdGhpcy5jdWJlc1BhcmVudCA9IG5ldyBHcm91cCgpO1xuICAgICAgICBmb3IgKGxldCB4ID0gLWhhbGZDb3VudDsgeCA8IGhhbGZDb3VudDsgeCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB6ID0gLWhhbGZDb3VudDsgeiA8IGhhbGZDb3VudDsgeisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q3ViZSA9IG5ldyBCYXNpY0N1YmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBza3lTY3JhcGVyTWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKHgqMS41ICsgKE1hdGgucmFuZG9tKCktMC41KSwgMCwgeioxLjUpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgODA7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB4T2Zmc2V0ID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IDAuNSA6IC0wLjU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4T2Zmc2V0IDwgMCkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCB5T2Zmc2V0ID0gKChNYXRoLnJhbmRvbSgpKSAqIDAuOCkgLSAwLjQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB6T2Zmc2V0ID0gTWF0aC5yYW5kb20oKSAqIChNYXRoLnJhbmRvbSgpID4gMC41ID8gMC40IDogLTAuNCk7XG4gICAgICAgICAgICAgICAgICAgIHlPZmZzZXQgPSBNYXRoLnJvdW5kKHlPZmZzZXQgKiAxMCkgKiAwLjE7XG4gICAgICAgICAgICAgICAgICAgIHpPZmZzZXQgPSBNYXRoLnJvdW5kKHpPZmZzZXQgKiA1KSAqIDAuMjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3V2luZG93ID0gbmV3IEJhc2ljQ3ViZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiAwLjA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IE1hdGgucmFuZG9tKCkgPiAwLjEgPyB3aW5kb3dPZmZNYXQgOiB3aW5kb3dPbk1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMyh6T2Zmc2V0LCB5T2Zmc2V0LCB4T2Zmc2V0KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBuZXdDdWJlLnJvb3QuYWRkKG5ld1dpbmRvdy5yb290KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3Q3ViZS5yb290LnNjYWxlLmNvcHkobmV3IFZlY3RvcjMoMSwyLDEpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1YmVzUGFyZW50LmFkZChuZXdDdWJlLnJvb3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3ViZXMucHVzaChuZXdDdWJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5yb290LmFkZCh0aGlzLmN1YmVzUGFyZW50KTtcbiAgICB9XG5cbiAgICBhZGRTa3koKSB7XG4gICAgICAgIGNvbnN0IHNreU1hdCA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogMHgwNTAzMjksXG4gICAgICAgICAgICBtZXRhbG5lc3M6IDAuMSxcbiAgICAgICAgICAgIHJvdWdobmVzczogMC45LFxuICAgICAgICAgICAgc2lkZTogQmFja1NpZGVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0YXJzTWF0ID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgICAgICAgIGNvbG9yOiAweGNjY2NkZCxcbiAgICAgICAgICAgIHNpZGU6IEJhY2tTaWRlLFxuICAgICAgICAgICAgd2lyZWZyYW1lOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBza3kgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgICAgICAgc2l6ZTogNSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygtMC41LCAxLCAwKSxcbiAgICAgICAgICAgIG1hdGVyaWFsOiBza3lNYXQsXG4gICAgICAgICAgICBoZWlnaHRTZWdtZW50czogNzIsXG4gICAgICAgICAgICB3aWR0aFNlZ21lbnRzOiAxMjhcbiAgICAgICAgfSk7XG4gICAgICAgIHNreS5yb290LnNjYWxlLmNvcHkobmV3IFZlY3RvcjMoMTAsIDkuMjUsIDEwKSk7XG4gICAgICAgIHRoaXMucm9vdC5hZGQoc2t5LnJvb3QpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEyMDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwaHkgPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDI7XG4gICAgICAgICAgICBjb25zdCB0aGV0YSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMC42O1xuICAgICAgICAgICAgY29uc3QgbmV3U3RhciA9IG5ldyBCYXNpY1NwaGVyZSh7XG4gICAgICAgICAgICAgICAgc2l6ZTogMC4wMTgsXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHN0YXJzTWF0LFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMyhNYXRoLnNpbihwaHkpICogMjAsIE1hdGguY29zKHRoZXRhKSAqIDgsIC0xMClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yb290LmFkZChuZXdTdGFyLnJvb3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkR3JvdW5kKCkge1xuICAgICAgICBjb25zdCBncm91bmRNYXQgPSBuZXcgTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICAgICAgY29sb3I6IDB4MTMxMzEzLFxuICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjcsXG4gICAgICAgICAgICByb3VnaG5lc3M6IDAuOSxcbiAgICAgICAgICAgIGZsYXRTaGFkaW5nOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBncm91bmQgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgICAgICAgc2l6ZTogMyxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygwLCAtMSwgMCksXG4gICAgICAgICAgICBtYXRlcmlhbDogZ3JvdW5kTWF0XG4gICAgICAgIH0pO1xuICAgICAgICBncm91bmQucm9vdC5zY2FsZS5jb3B5KG5ldyBWZWN0b3IzKDUsIDAuNSwgNCkpO1xuICAgICAgICB0aGlzLnJvb3QuYWRkKGdyb3VuZC5yb290KTtcbiAgICB9XG5cbiAgICBhZGRXaGVyZUFyZVlvdSgpIHtcbiAgICAgICAgdGhpcy53aGVyZUFyZVlvdSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gICAgICAgIHRoaXMud2hlcmVBcmVZb3UuaW5uZXJIVE1MID0gXCJ3aGVyZSBhcmUgeW91XCI7XG4gICAgICAgIHRoaXMud2hlcmVBcmVZb3Uuc3R5bGUubWFyZ2luID0gJ2F1dG8nO1xuICAgICAgICB0aGlzLndoZXJlQXJlWW91LnN0eWxlLm1hcmdpblRvcCA9ICczMHZoJztcbiAgICAgICAgdGhpcy53aGVyZUFyZVlvdS5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG4gICAgICAgIHRoaXMud2hlcmVBcmVZb3Uuc3R5bGUuZm9udEZhbWlseSA9IFwiJ1ZUMzIzJywgbW9ub3NwYWNlXCI7XG4gICAgICAgIHRoaXMud2hlcmVBcmVZb3Uuc3R5bGUuY29sb3IgPSAnYW50aXF1ZXdoaXRlJztcbiAgICAgICAgdGhpcy53aGVyZUFyZVlvdS5zdHlsZS5mb250V2VpZ2h0ID0gJ2xpZ2h0ZXInO1xuICAgICAgICB0aGlzLndoZXJlQXJlWW91LnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICAgICAgdGhpcy53aGVyZUFyZVlvdS5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gJzAuMmVtJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLndoZXJlQXJlWW91KTtcbiAgICB9XG4gICAgXG5cbiAgICB1cGRhdGUodGltZUVsYXBzZWQpIHtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uVGltZSA9IHRpbWVFbGFwc2VkICogMC4yO1xuICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZVNreXNjcmFwZXJzKGFuaW1hdGlvblRpbWUpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDYW1lcmEodGltZUVsYXBzZWQpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNreXNjcmFwZXJzKGFuaW1hdGlvblRpbWUpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1YmVzUGFyZW50LmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY3ViZXNQYXJlbnQuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBjb25zdCBuZXdQb3MgPSBjaGlsZC5wb3NpdGlvbjtcbiAgICAgICAgICAgIG5ld1Bvcy55ID0gTWF0aC5zaW4oKGkgKiBNYXRoLlBJICogMC4yNSkgKyBhbmltYXRpb25UaW1lKTtcbiAgICAgICAgICAgIGNoaWxkLnBvc2l0aW9uLmNvcHkobmV3UG9zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZUNhbWVyYSh0aW1lRWxhcHNlZCkge1xuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS5wb3NpdGlvbi5jb3B5KFxuICAgICAgICAgICAgbmV3IFZlY3RvcjMoXG4gICAgICAgICAgICAgICAgTWF0aC5jb3ModGltZUVsYXBzZWQgKiAuMTIpICogMTAgKyAyLFxuICAgICAgICAgICAgICAgIE1hdGguY29zKHRpbWVFbGFwc2VkICogLjIpICsgMSxcbiAgICAgICAgICAgICAgICAzMClcbiAgICAgICAgICAgICk7XG4gICAgICAgIHRoaXMuc2NlbmUuY2FtZXJhLmxvb2tBdChuZXcgVmVjdG9yMygwLCAyLjUsIDYpKTtcbiAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH1cblxuICAgIG9uUmVtb3ZlKCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMud2hlcmVBcmVZb3UpO1xuICAgIH1cblxufSJdLCJzb3VyY2VSb290IjoiIn0=