(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{18:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var a=o(17);var i=function e(t){var o=t.size,i=void 0===o?5:o,s=t.material,r=t.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed=Math.random();var n=1,h=1,d=1;this.color=new a.Color,this.color.setRGB(n,h,d),this.material=s||new a.MeshBasicMaterial({color:this.color}),this.geometry=new a.BoxGeometry(i,i,i),this.mesh=new a.Mesh(this.geometry,this.material),r&&this.mesh.position.copy(r),this.root=this.mesh}},28:function(e,t,o){e.exports=o.p+"obj/male.obj"},5:function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return l});var a=o(17),i=o(28),s=o.n(i),r=o(20),n=o(22),h=o(18),d=o(23);function c(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}d(a);var l=function(){function e(t){var o=t.scene,i=t.onLoad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=o,this.setupCamera(),o.renderer.shadowMap.enabled=!0,o.renderer.shadowMap.type=a.PCFSoftShadowMap,this.root=new a.Group,this.wireMat=new a.MeshBasicMaterial({color:16777215,wireframe:!0});var s=new a.MeshStandardMaterial({emissive:6161169,flatShading:!0});this.loadingCube=new h.a({size:6,material:s}),this.root.add(this.loadingCube.root),this.loading(.5),this.setupLights(),this.createSpheres(),this.loadHead(),i&&i()}var t,o,i;return t=e,(o=[{key:"loading",value:function(e){this.loadingCube.root.scale.copy(new a.Vector3(1,1-e,1)),this.loadingCube.root.position.copy(new a.Vector3(0,-.5*this.loadingCube.root.geometry.parameters.height*e,0));var t=new a.Quaternion;t.setFromAxisAngle(new a.Vector3(0,1,0),-2*Math.PI*e),this.loadingCube.root.quaternion.copy(t)}},{key:"setupLights",value:function(){var e=new r.a({intensity:1.8,castShadow:!0,bias:2e-5,projectionSides:2.5,mapSize:2048});e.rotateY(Math.PI),this.root.add(e)}},{key:"setupCamera",value:function(){var e=this.scene.camera.aspect;this.scene.camera=new a.OrthographicCamera(10*e/-2,10*e/2,5,-5,1,150),this.scene.camera.position.copy(new a.Vector3(0,3.5,10)),this.scene.camera.lookAt(new a.Vector3(0,0,0))}},{key:"createSpheres",value:function(){var e=[new a.MeshStandardMaterial({flatShading:!0,roughness:0}),this.wireMat],t=[new a.MeshStandardMaterial({emissive:6161169,flatShading:!0}),this.wireMat];this.spheres=new a.Group,this.sphereA=new n.a({size:8,widthSegments:6,heightSegments:6,material:e,castShadow:!0,receiveShadow:!0}),this.sphereA.root.position.copy(new a.Vector3(2.5,0,3)),this.sphereB=new n.a({size:7,widthSegments:7,heightSegments:6,material:e,castShadow:!0,receiveShadow:!0}),this.sphereB.root.position.copy(new a.Vector3(2,.5,-7)),this.sphereC=new n.a({size:5,widthSegments:5,heightSegments:4,material:t,castShadow:!0,receiveShadow:!0}),this.sphereC.root.position.copy(new a.Vector3(-6.5,.5,-1)),this.spheres.add(this.sphereA.root),this.spheres.add(this.sphereB.root),this.spheres.add(this.sphereC.root),this.spheres.position.copy(new a.Vector3(0,8,0))}},{key:"loadHead",value:function(){var e=new a.OBJLoader;this.onHeadReady=this.onHeadReady.bind(this),this.onHeadLoading=this.onHeadLoading.bind(this),e.load(s.a,this.onHeadReady,this.onHeadLoading,function(e){console.log("An error happened",e)})}},{key:"onHeadLoading",value:function(e){var t=e.loaded/e.total;console.log(100*t+"% loaded"),this.loading(Math.sin(t))}},{key:"onHeadReady",value:function(e){this.root.remove(this.loadingCube.root),this.loadingCube=null,e.scale.copy(new a.Vector3(.2,.2,.2)),e.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0,e.name&&e.name.indexOf("occhio")>=0&&(e.material.color.setRGB(0,0,0),e.material.specular.setRGB(.1,.1,.1),e.material.roughness=0)}),this.root.add(e),this.head=e,this.head.rotateY(-.25*Math.PI),this.head.add(this.spheres)}},{key:"update",value:function(e,t){if(this.head){var o=.1*e;this.head.rotateY(Math.sin(o)*t*.1),this.sphereA.root.rotateY(.3*t),this.sphereA.root.rotateX(.6*t),this.sphereB.root.rotateY(-.4*t),this.sphereB.root.rotateX(-.6*t),this.sphereC.root.rotateY(-.4*t),this.sphereC.root.rotateX(.6*t),this.sphereC.root.rotateZ(.9*t)}}}])&&c(t.prototype,o),i&&c(t,i),e}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY0N1YmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL29iai9tYWxlLm9iaiIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTG9vcHMvT3BlbkhlYWQuanMiXSwibmFtZXMiOlsiQmFzaWNDdWJlIiwiX3JlZiIsIl9yZWYkc2l6ZSIsInNpemUiLCJtYXRlcmlhbCIsInBvc2l0aW9uIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInNlZWQiLCJNYXRoIiwicmFuZG9tIiwiY29sb3IiLCJDb2xvciIsInNldFJHQiIsIk1lc2hCYXNpY01hdGVyaWFsIiwiZ2VvbWV0cnkiLCJCb3hHZW9tZXRyeSIsIm1lc2giLCJNZXNoIiwiY29weSIsInJvb3QiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJPQkpMb2FkZXIiLCJUSFJFRSIsIkxpc3Nham91eCIsInNjZW5lIiwib25Mb2FkIiwic2V0dXBDYW1lcmEiLCJyZW5kZXJlciIsInNoYWRvd01hcCIsImVuYWJsZWQiLCJ0eXBlIiwid2lyZU1hdCIsIndpcmVmcmFtZSIsImxvYWRpbmdDdWJlTWF0IiwiZW1pc3NpdmUiLCJmbGF0U2hhZGluZyIsImxvYWRpbmdDdWJlIiwiYWRkIiwibG9hZGluZyIsInNldHVwTGlnaHRzIiwiY3JlYXRlU3BoZXJlcyIsImxvYWRIZWFkIiwicGVyY2VudGFnZSIsInNjYWxlIiwicGFyYW1ldGVycyIsImhlaWdodCIsInF1YXRlcm5pb24iLCJzZXRGcm9tQXhpc0FuZ2xlIiwiUEkiLCJsaWdodHMiLCJMaWdodHMiLCJpbnRlbnNpdHkiLCJjYXN0U2hhZG93IiwiYmlhcyIsInByb2plY3Rpb25TaWRlcyIsIm1hcFNpemUiLCJyb3RhdGVZIiwiYXNwZWN0IiwiY2FtZXJhIiwiZnJ1c3R1bVNpemUiLCJsb29rQXQiLCJzcGhlcmVNYXQiLCJyb3VnaG5lc3MiLCJzcGhlcmVNYXQyIiwic3BoZXJlcyIsInNwaGVyZUEiLCJCYXNpY1NwaGVyZSIsIndpZHRoU2VnbWVudHMiLCJoZWlnaHRTZWdtZW50cyIsInJlY2VpdmVTaGFkb3ciLCJzcGhlcmVCIiwic3BoZXJlQyIsImxvYWRlciIsIm9uSGVhZFJlYWR5IiwiYmluZCIsIm9uSGVhZExvYWRpbmciLCJsb2FkIiwiaGVhZCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInhociIsImxvYWRlZCIsInRvdGFsIiwic2luIiwib2JqZWN0IiwicmVtb3ZlIiwidHJhdmVyc2UiLCJvYmoiLCJuYW1lIiwiaW5kZXhPZiIsInNwZWN1bGFyIiwidGltZUVsYXBzZWQiLCJkZWx0YSIsImFuaW1hdGlvblRpbWUiLCJyb3RhdGVYIiwicm90YXRlWiJdLCJtYXBwaW5ncyI6InlJQU9xQkEsRUFDbkIsU0FBQUEsRUFBQUMsR0FBNEMsSUFBQUMsRUFBQUQsRUFBL0JFLFlBQStCLElBQUFELEVBQXhCLEVBQXdCQSxFQUFyQkUsRUFBcUJILEVBQXJCRyxTQUFVQyxFQUFXSixFQUFYSSxzR0FBV0MsQ0FBQUMsS0FBQVAsR0FDMUNPLEtBQUtDLEtBQU9DLEtBQUtDLFNBQ2pCLElBQU1DLEVBQVcsRUFBWEEsRUFBZ0IsRUFBaEJBLEVBQXFCLEVBQzNCSixLQUFLSSxNQUFRLElBQUlDLFFBQ2pCTCxLQUFLSSxNQUFNRSxPQUFPRixFQUFTQSxFQUFTQSxHQUVwQ0osS0FBS0gsU0FBV0EsR0FBWSxJQUFJVSxvQkFBa0IsQ0FDaERILE1BQU9KLEtBQUtJLFFBR2RKLEtBQUtRLFNBQVcsSUFBSUMsY0FBWWIsRUFBTUEsRUFBTUEsR0FFNUNJLEtBQUtVLEtBQU8sSUFBSUMsT0FDZFgsS0FBS1EsU0FDTFIsS0FBS0gsVUFHSEMsR0FDRkUsS0FBS1UsS0FBS1osU0FBU2MsS0FBS2QsR0FHMUJFLEtBQUthLEtBQU9iLEtBQUtVLDBCQzdCckJJLEVBQUFDLFFBQWlCQyxFQUFBQyxFQUF1QiwrVENNeENDLEVBQVVDLE9BRVdDLGFBQ25CLFNBQUFBLEVBQUExQixHQUE2QixJQUFoQjJCLEVBQWdCM0IsRUFB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bEYsS0FBSzBFLEtBQUtyQixTQUFvQixJQUFWbkQsS0FBSzJDLElBQ3pCN0MsS0FBSzBFLEtBQUt4QyxJQUFJbEMsS0FBSzZELHdDQUdkNEIsRUFBYUMsR0FDbEIsR0FBSTFGLEtBQUswRSxLQUFNLENBQ2IsSUFBTWlCLEVBQThCLEdBQWRGLEVBQ3RCekYsS0FBSzBFLEtBQUtyQixRQUFTbkQsS0FBSytFLElBQUlVLEdBQWtCRCxFQUFRLElBRXREMUYsS0FBSzhELFFBQVFqRCxLQUFLd0MsUUFBUSxHQUFNcUMsR0FDaEMxRixLQUFLOEQsUUFBUWpELEtBQUsrRSxRQUFRLEdBQU1GLEdBRWhDMUYsS0FBS21FLFFBQVF0RCxLQUFLd0MsU0FBUyxHQUFNcUMsR0FDakMxRixLQUFLbUUsUUFBUXRELEtBQUsrRSxTQUFTLEdBQU1GLEdBRWpDMUYsS0FBS29FLFFBQVF2RCxLQUFLd0MsU0FBUyxHQUFNcUMsR0FDakMxRixLQUFLb0UsUUFBUXZELEtBQUsrRSxRQUFRLEdBQU1GLEdBQ2hDMUYsS0FBS29FLFFBQVF2RCxLQUFLZ0YsUUFBUSxHQUFNSCIsImZpbGUiOiIuL2pzL09wZW5IZWFkLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbG9yLFxuICBNZXNoQmFzaWNNYXRlcmlhbCxcbiAgQm94R2VvbWV0cnksXG4gIE1lc2hcbn0gZnJvbSAndGhyZWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNpY0N1YmUge1xuICBjb25zdHJ1Y3Rvcih7c2l6ZSA9IDUsIG1hdGVyaWFsLCBwb3NpdGlvbn0pIHtcbiAgICB0aGlzLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGNvbnN0IGNvbG9yID0ge3I6MSAsZzoxLCBiOjF9O1xuICAgIHRoaXMuY29sb3IgPSBuZXcgQ29sb3IoKTtcbiAgICB0aGlzLmNvbG9yLnNldFJHQihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iKTtcblxuICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbCB8fCBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IHRoaXMuY29sb3JcbiAgICB9KTtcblxuICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgQm94R2VvbWV0cnkoc2l6ZSwgc2l6ZSwgc2l6ZSk7XG5cbiAgICB0aGlzLm1lc2ggPSBuZXcgTWVzaChcbiAgICAgIHRoaXMuZ2VvbWV0cnksXG4gICAgICB0aGlzLm1hdGVyaWFsXG4gICAgKTtcblxuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMucm9vdCA9IHRoaXMubWVzaDtcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwib2JqL21hbGUub2JqXCI7IiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IGhlYWQgZnJvbSAnLi4vLi4vb2JqL21hbGUub2JqJztcbmltcG9ydCBMaWdodHMgZnJvbSAnLi4vTGlnaHRzL1R3b0RpcmVjdGlvbmFscyc7XG5pbXBvcnQgQmFzaWNTcGhlcmUgZnJvbSAnLi4vT2JqZWN0cy9CYXNpY1NwaGVyZSc7XG5pbXBvcnQgQmFzaWNDdWJlIGZyb20gJy4uL09iamVjdHMvQmFzaWNDdWJlJztcbmltcG9ydCAqIGFzIE9CSkxvYWRlciBmcm9tICd0aHJlZS1vYmotbG9hZGVyJztcbk9CSkxvYWRlcihUSFJFRSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3Nham91eCB7XG4gIGNvbnN0cnVjdG9yKHtzY2VuZSwgb25Mb2FkfSkge1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB0aGlzLnNldHVwQ2FtZXJhKCk7XG4gICAgXG4gICAgc2NlbmUucmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlO1xuICAgIHNjZW5lLnJlbmRlcmVyLnNoYWRvd01hcC50eXBlID0gVEhSRUUuUENGU29mdFNoYWRvd01hcDtcblxuICAgIHRoaXMucm9vdCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgdGhpcy53aXJlTWF0ID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIGNvbG9yOiAweGZmZmZmZixcbiAgICAgIHdpcmVmcmFtZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgY29uc3QgbG9hZGluZ0N1YmVNYXQgPSBcbiAgICAgIG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgIGVtaXNzaXZlOiAweDVlMDMxMSxcbiAgICAgICAgZmxhdFNoYWRpbmc6IHRydWVcbiAgICAgIH0pXG4gICAgO1xuXG4gICAgdGhpcy5sb2FkaW5nQ3ViZSA9IG5ldyBCYXNpY0N1YmUoe1xuICAgICAgc2l6ZTo2LFxuICAgICAgbWF0ZXJpYWw6IGxvYWRpbmdDdWJlTWF0LFxuICAgIH0pO1xuXG4gICAgdGhpcy5yb290LmFkZCh0aGlzLmxvYWRpbmdDdWJlLnJvb3QpO1xuXG4gICAgdGhpcy5sb2FkaW5nKDAuNSk7XG5cbiAgICB0aGlzLnNldHVwTGlnaHRzKCk7XG5cbiAgICB0aGlzLmNyZWF0ZVNwaGVyZXMoKTtcbiAgICBcbiAgICB0aGlzLmxvYWRIZWFkKCk7XG5cbiAgICBpZiAob25Mb2FkKSBvbkxvYWQoKTtcbiAgfVxuXG4gIGxvYWRpbmcocGVyY2VudGFnZSkgeyAgICBcbiAgICB0aGlzLmxvYWRpbmdDdWJlLnJvb3Quc2NhbGUuY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDEsIDEgLSBwZXJjZW50YWdlLCAxKVxuICAgICk7XG5cbiAgICB0aGlzLmxvYWRpbmdDdWJlLnJvb3QucG9zaXRpb24uY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsXG4gICAgICAgIC0wLjUgKiB0aGlzLmxvYWRpbmdDdWJlLnJvb3QuZ2VvbWV0cnkucGFyYW1ldGVycy5oZWlnaHQgKiAocGVyY2VudGFnZSksXG4gICAgICAgIDApXG4gICAgKVxuXG4gICAgdmFyIHF1YXRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgIHF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZSggbmV3IFRIUkVFLlZlY3RvcjMoIDAsIDEsIDAgKSwgKE1hdGguUEkgKiAtMikgKiBwZXJjZW50YWdlICk7XG4gICAgdGhpcy5sb2FkaW5nQ3ViZS5yb290LnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKVxuICB9XG5cbiAgc2V0dXBMaWdodHMoKSB7XG4gICAgY29uc3QgbGlnaHRzID0gbmV3IExpZ2h0cyh7XG4gICAgICBpbnRlbnNpdHk6IDEuOCxcbiAgICAgIGNhc3RTaGFkb3c6IHRydWUsXG4gICAgICBiaWFzOiAwLjAwMDAyLFxuICAgICAgcHJvamVjdGlvblNpZGVzOiAyLjUsXG4gICAgICBtYXBTaXplOiAyMDQ4XG4gICAgfSk7XG4gICAgbGlnaHRzLnJvdGF0ZVkoTWF0aC5QSSk7XG4gICAgdGhpcy5yb290LmFkZChsaWdodHMpO1xuICB9XG5cbiAgc2V0dXBDYW1lcmEoKSB7XG4gICAgY29uc3QgZnJ1c3R1bVNpemUgPSAxMDtcbiAgICBjb25zdCBhc3BlY3QgPSB0aGlzLnNjZW5lLmNhbWVyYS5hc3BlY3Q7XG4gICAgdGhpcy5zY2VuZS5jYW1lcmEgPSBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKFxuICAgICAgZnJ1c3R1bVNpemUgKiBhc3BlY3QgLyAtMixcbiAgICAgIGZydXN0dW1TaXplICogYXNwZWN0IC8gMixcbiAgICAgIGZydXN0dW1TaXplIC8gMixcbiAgICAgIGZydXN0dW1TaXplIC8gLTIsXG4gICAgICAxLFxuICAgICAgMTUwKTtcbiAgICB0aGlzLnNjZW5lLmNhbWVyYS5wb3NpdGlvbi5jb3B5KG5ldyBUSFJFRS5WZWN0b3IzKDAsIDMuNSwgMTApKTtcbiAgICB0aGlzLnNjZW5lLmNhbWVyYS5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMCkpO1xuICB9XG5cbiAgY3JlYXRlU3BoZXJlcygpIHtcbiAgICBjb25zdCBzcGhlcmVNYXQgPSBbXG4gICAgICBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICBmbGF0U2hhZGluZzogdHJ1ZSxcbiAgICAgICAgcm91Z2huZXNzOiAwXG4gICAgICB9KSxcbiAgICAgIHRoaXMud2lyZU1hdFxuICAgIF07XG4gICAgY29uc3Qgc3BoZXJlTWF0MiA9IFtcbiAgICAgIG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgIGVtaXNzaXZlOiAweDVlMDMxMSxcbiAgICAgICAgZmxhdFNoYWRpbmc6IHRydWVcbiAgICAgIH0pLFxuICAgICAgdGhpcy53aXJlTWF0XG4gICAgXTtcbiAgICB0aGlzLnNwaGVyZXMgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICB0aGlzLnNwaGVyZUEgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgc2l6ZTogOCxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDYsXG4gICAgICBoZWlnaHRTZWdtZW50czogNixcbiAgICAgIG1hdGVyaWFsOiBzcGhlcmVNYXQsXG4gICAgICBjYXN0U2hhZG93OiB0cnVlLFxuICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZSxcbiAgICB9KTtcbiAgICB0aGlzLnNwaGVyZUEucm9vdC5wb3NpdGlvbi5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMi41LCAwLCAzKVxuICAgICk7XG4gICAgXG4gICAgdGhpcy5zcGhlcmVCID0gbmV3IEJhc2ljU3BoZXJlKHtcbiAgICAgIHNpemU6IDcsXG4gICAgICB3aWR0aFNlZ21lbnRzOiA3LFxuICAgICAgaGVpZ2h0U2VnbWVudHM6IDYsXG4gICAgICBtYXRlcmlhbDogc3BoZXJlTWF0LFxuICAgICAgY2FzdFNoYWRvdzogdHJ1ZSxcbiAgICAgIHJlY2VpdmVTaGFkb3c6IHRydWUsXG4gICAgfSk7XG4gICAgdGhpcy5zcGhlcmVCLnJvb3QucG9zaXRpb24uY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDIsIDAuNSwgLTcpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnNwaGVyZUMgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgc2l6ZTogNSxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDUsXG4gICAgICBoZWlnaHRTZWdtZW50czogNCxcbiAgICAgIG1hdGVyaWFsOiBzcGhlcmVNYXQyLFxuICAgICAgY2FzdFNoYWRvdzogdHJ1ZSxcbiAgICAgIHJlY2VpdmVTaGFkb3c6IHRydWUsXG4gICAgfSk7XG4gICAgdGhpcy5zcGhlcmVDLnJvb3QucG9zaXRpb24uY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKC02LjUsIDAuNSwgLTEpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnNwaGVyZXMuYWRkKHRoaXMuc3BoZXJlQS5yb290KTtcbiAgICB0aGlzLnNwaGVyZXMuYWRkKHRoaXMuc3BoZXJlQi5yb290KTtcbiAgICB0aGlzLnNwaGVyZXMuYWRkKHRoaXMuc3BoZXJlQy5yb290KTtcbiAgICBcbiAgICB0aGlzLnNwaGVyZXMucG9zaXRpb24uY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDgsIDApXG4gICAgKTtcbiAgfVxuXG4gIGxvYWRIZWFkKCkge1xuICAgIGNvbnN0IGxvYWRlciA9IG5ldyBUSFJFRS5PQkpMb2FkZXIoKTtcbiAgICB0aGlzLm9uSGVhZFJlYWR5ID0gdGhpcy5vbkhlYWRSZWFkeS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25IZWFkTG9hZGluZyA9IHRoaXMub25IZWFkTG9hZGluZy5iaW5kKHRoaXMpO1xuICAgIGxvYWRlci5sb2FkKFxuICAgICAgaGVhZCxcbiAgICAgIHRoaXMub25IZWFkUmVhZHksXG4gICAgICB0aGlzLm9uSGVhZExvYWRpbmcsXG4gICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FuIGVycm9yIGhhcHBlbmVkJywgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBvbkhlYWRMb2FkaW5nKHhocikge1xuICAgIGNvbnN0IGxvYWRpbmcgPSB4aHIubG9hZGVkIC8geGhyLnRvdGFsO1xuICAgIGNvbnNvbGUubG9nKChsb2FkaW5nICogMTAwKSArICclIGxvYWRlZCcpO1xuICAgIFxuICAgIHRoaXMubG9hZGluZyhNYXRoLnNpbihsb2FkaW5nKSk7XG4gIH1cblxuICBvbkhlYWRSZWFkeShvYmplY3QpIHtcbiAgICB0aGlzLnJvb3QucmVtb3ZlKCB0aGlzLmxvYWRpbmdDdWJlLnJvb3QgKTtcbiAgICB0aGlzLmxvYWRpbmdDdWJlID0gbnVsbDtcbiAgICBcbiAgICBvYmplY3Quc2NhbGUuY29weShuZXcgVEhSRUUuVmVjdG9yMygwLjIsIDAuMiwgMC4yKSk7XG4gICAgb2JqZWN0LnRyYXZlcnNlKChvYmopID0+IHtcbiAgICAgIG9iai5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcbiAgICAgIG9iai5jYXN0U2hhZG93ID0gdHJ1ZTtcbiAgICAgIGlmIChvYmoubmFtZSAmJiBvYmoubmFtZS5pbmRleE9mKCdvY2NoaW8nKSA+PSAwKSB7XG4gICAgICAgIG9iai5tYXRlcmlhbC5jb2xvci5zZXRSR0IoMCwgMCwgMCk7XG4gICAgICAgIG9iai5tYXRlcmlhbC5zcGVjdWxhci5zZXRSR0IoMC4xLCAwLjEsIDAuMSk7XG4gICAgICAgIG9iai5tYXRlcmlhbC5yb3VnaG5lc3MgPSAwO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMucm9vdC5hZGQob2JqZWN0KTtcbiAgICB0aGlzLmhlYWQgPSBvYmplY3Q7XG4gICAgdGhpcy5oZWFkLnJvdGF0ZVkoLShNYXRoLlBJICogMC4yNSkpO1xuICAgIHRoaXMuaGVhZC5hZGQodGhpcy5zcGhlcmVzKTtcbiAgfVxuXG4gIHVwZGF0ZSh0aW1lRWxhcHNlZCwgZGVsdGEpIHtcbiAgICBpZiAodGhpcy5oZWFkKSB7XG4gICAgICBjb25zdCBhbmltYXRpb25UaW1lID0gdGltZUVsYXBzZWQgKiAwLjE7XG4gICAgICB0aGlzLmhlYWQucm90YXRlWSgoTWF0aC5zaW4oYW5pbWF0aW9uVGltZSkpICogZGVsdGEgKiAwLjEpO1xuXG4gICAgICB0aGlzLnNwaGVyZUEucm9vdC5yb3RhdGVZKDAuMyAqIGRlbHRhKTtcbiAgICAgIHRoaXMuc3BoZXJlQS5yb290LnJvdGF0ZVgoMC42ICogZGVsdGEpO1xuXG4gICAgICB0aGlzLnNwaGVyZUIucm9vdC5yb3RhdGVZKC0wLjQgKiBkZWx0YSk7XG4gICAgICB0aGlzLnNwaGVyZUIucm9vdC5yb3RhdGVYKC0wLjYgKiBkZWx0YSk7XG5cbiAgICAgIHRoaXMuc3BoZXJlQy5yb290LnJvdGF0ZVkoLTAuNCAqIGRlbHRhKTtcbiAgICAgIHRoaXMuc3BoZXJlQy5yb290LnJvdGF0ZVgoMC42ICogZGVsdGEpO1xuICAgICAgdGhpcy5zcGhlcmVDLnJvb3Qucm90YXRlWigwLjkgKiBkZWx0YSk7XG4gICAgfVxuICB9XG5cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=