(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{18:function(t,e,o){"use strict";o.d(e,"a",function(){return l});var n=o(16);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u={intensity:1},l=function(t){function e(){var t,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];(o=i(this,(t=s(e)).call.apply(t,[this].concat(c)))).params=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){a(t,e,o[e])})}return t}({},u,c[0]);var h=new n.HemisphereLight(16777215,16777215,1.5*o.params.intensity);return h.color.setHSL(f(325),.9,.94),h.groundColor.setHSL(f(325),.9,.64),h.position.set(0,2,0),o.add(h),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,n["Group"]),e}();function f(t){return t/360}},9:function(t,e,o){"use strict";o.r(e);var n=o(16),r=o(18);var a=function t(e){var o=e.size,r=void 0===o?5:o,a=e.material,i=e.position;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.seed=Math.random();var s=1,c=1,u=1;this.color=new n.Color,this.color.setRGB(s,c,u),this.material=a||new n.MeshBasicMaterial({color:this.color}),this.geometry=new n.CylinderGeometry(r,r,r),this.mesh=new n.Mesh(this.geometry,this.material),i&&this.mesh.position.copy(i),this.root=this.mesh};function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}o.d(e,"default",function(){return s});var s=function(){function t(e){var o=e.scene,a=e.onLoad;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=o,o.camera.far=350,this.scene.camera.updateProjectionMatrix();var i=new n.Color;i.setIntHSL(48,90,64),o.renderer.setClearColor(i),o.scene.fog=new n.Fog(i,.1,300),this.root=new n.Group;var s=new r.a;this.root.add(s);var c=new n.MeshStandardMaterial({color:16777215,metalness:.4,roughness:.2});this.amoebas=[];for(var u=-60;u<60;u++){var l=this.newAmeba({slices:17,amebaSize:15,material:c,xPosition:15*u*.1});this.amoebas.push(l),this.root.add(l)}a&&a()}var e,o,s;return e=t,(o=[{key:"newAmeba",value:function(t){var e=t.slices,o=t.amebaSize,r=t.material,i=t.xPosition,s=void 0===i?0:i,c=Math.PI/e*.5,u=new n.Group,l=-(this.scene.camera.far-o);u.translateZ(Math.random()*l);for(var f=-e;f<e;f++){var h=Math.cos(c*f)*o,p=Math.sin(c*f*.7)*o,y=new a({size:1,material:r,position:new n.Vector3(s*(u.position.z/(3*o)),p,0)});y.root.scale.copy(new n.Vector3(.7*h,.6*c*h,.7*h)),u.add(y.root)}return u.userData={initialPosition:u.position.clone(),randomValue:Math.random()},u}},{key:"update",value:function(t){for(var e=3*t,o=0;o<this.amoebas.length;o++)this.updateAmeba(o,e);this.updateCamera(.5*t)}},{key:"updateAmeba",value:function(t,e){for(var o=this.amoebas[t],n=0;n<o.children.length;n++){var r=o.children[n],a=r.position;r.position.copy(a),r.translateY(.12*Math.sin(e+(.08*n+o.userData.randomValue)+t*Math.PI)),r.rotateY(.005+.001*n)}var i=o.userData.initialPosition.clone(),s=(.01*e+t*Math.PI)*Math.pow(Math.abs(.01*o.position.z),.3);i.y=2*(s-Math.floor(.5+s))*250,o.position.copy(i)}},{key:"updateCamera",value:function(t){this.scene.camera.position.copy(new n.Vector3(0,14*Math.cos(t),10)),this.scene.camera.lookAt(new n.Vector3(0,0,-60)),this.scene.camera.updateProjectionMatrix()}}])&&i(e.prototype,o),s&&i(e,s),t}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL01hZ2VudGFQYXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY0N5bGluZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9Mb29wcy9GbG9hdGluZ0Jpby5qcyJdLCJuYW1lcyI6WyJkZWZhdWx0UGFyYW1zIiwiaW50ZW5zaXR5IiwiTWFnZW50YVBhcnR5IiwiX2dldFByb3RvdHlwZU9mMiIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfZ2V0UHJvdG90eXBlT2YiLCJjYWxsIiwiYXBwbHkiLCJjb25jYXQiLCJwYXJhbXMiLCJfb2JqZWN0U3ByZWFkIiwiaGVtaUxpZ2h0IiwiSGVtaXNwaGVyZUxpZ2h0IiwiY29sb3IiLCJzZXRIU0wiLCJOb3JtYWxpemVIIiwiZ3JvdW5kQ29sb3IiLCJwb3NpdGlvbiIsInNldCIsImFkZCIsIkdyb3VwIiwiaCIsIkJhc2ljQ3lsaW5kZXIiLCJfcmVmIiwiX3JlZiRzaXplIiwic2l6ZSIsIm1hdGVyaWFsIiwic2VlZCIsIk1hdGgiLCJyYW5kb20iLCJDb2xvciIsInNldFJHQiIsIk1lc2hCYXNpY01hdGVyaWFsIiwiZ2VvbWV0cnkiLCJDeWxpbmRlckdlb21ldHJ5IiwibWVzaCIsIk1lc2giLCJjb3B5Iiwicm9vdCIsIkZsb2F0aW5nQmlvIiwic2NlbmUiLCJvbkxvYWQiLCJGbG9hdGluZ0Jpb19jbGFzc0NhbGxDaGVjayIsImNhbWVyYSIsImZhciIsInVwZGF0ZVByb2plY3Rpb25NYXRyaXgiLCJjbGVhckNvbG9yIiwic2V0SW50SFNMIiwicmVuZGVyZXIiLCJzZXRDbGVhckNvbG9yIiwiZm9nIiwiRm9nIiwibGlnaHRzIiwiTGlnaHRzIiwiY3ViZU1hdCIsIk1lc2hTdGFuZGFyZE1hdGVyaWFsIiwibWV0YWxuZXNzIiwicm91Z2huZXNzIiwiYW1vZWJhcyIsImkiLCJuZXdBbWViYSIsInNsaWNlcyIsImFtZWJhU2l6ZSIsInhQb3NpdGlvbiIsInB1c2giLCJfcGFyYW1zJHhQb3NpdGlvbiIsInBpSyIsIlBJIiwiYW1lYmEiLCJ6RGlzdHJpYnV0aW9uIiwidHJhbnNsYXRlWiIsInkiLCJzY2FsZVgiLCJjb3MiLCJzY2FsZVkiLCJzaW4iLCJuZXdDdWJlIiwiVmVjdG9yMyIsInoiLCJzY2FsZSIsInVzZXJEYXRhIiwiaW5pdGlhbFBvc2l0aW9uIiwiY2xvbmUiLCJyYW5kb21WYWx1ZSIsInRpbWVFbGFwc2VkIiwiYW5pbWF0aW9uVGltZSIsImEiLCJ1cGRhdGVBbWViYSIsInVwZGF0ZUNhbWVyYSIsImNoaWxkcmVuIiwiY2hpbGQiLCJuZXdSb3QiLCJ0cmFuc2xhdGVZIiwicm90YXRlWSIsIm5ld1BvcyIsInNhd1RpbWUiLCJwb3ciLCJhYnMiLCJmbG9vciIsImxvb2tBdCJdLCJtYXBwaW5ncyI6IjgzQkFLQSxJQUFNQSxFQUFnQixDQUNsQkMsVUFBVyxHQUdNQyxjQUNwQixTQUFBQSxJQUFxQixJQUFBQyxFQUFBQywrRkFBQUMsQ0FBQUMsS0FBQUosR0FBQSxRQUFBSyxFQUFBQyxVQUFBQyxPQUFOQyxFQUFNLElBQUFDLE1BQUFKLEdBQUFLLEVBQUEsRUFBQUEsRUFBQUwsRUFBQUssSUFBTkYsRUFBTUUsR0FBQUosVUFBQUksSUFDcEJSLEVBQUFTLEVBQUFQLE1BQUFILEVBQUFXLEVBQUFaLElBQUFhLEtBQUFDLE1BQUFiLEVBQUEsQ0FBQUcsTUFBQVcsT0FBU1AsTUFDSlEseVVBQUxDLENBQUEsR0FDSW5CLEVBQ0FVLEVBQUssSUFHUCxJQUFNVSxFQUFZLElBQUlDLGtCQUN2QixTQUNBLFNBQ0EsSUFBTWpCLEVBQUtjLE9BQU9qQixXQVZDLE9BWXBCbUIsRUFBVUUsTUFBTUMsT0FDZkMsRUFBVyxLQUNYLEdBQ0EsS0FFREosRUFBVUssWUFBWUYsT0FDckJDLEVBQVcsS0FDWCxHQUNBLEtB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QXhCakQsS0FBSzZDLElBQUlXLEdBQ1YsS0FFUnZGLEtBQUsyQyxNQUFNRyxPQUFPd0QsT0FBTyxJQUFJdEIsVUFBUSxFQUFHLEdBQUksS0FFNUNoRixLQUFLMkMsTUFBTUcsT0FBT0UiLCJmaWxlIjoiLi9qcy9GbG9hdGluZ0Jpby5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEdyb3VwLFxyXG5cdEhlbWlzcGhlcmVMaWdodFxyXG59IGZyb20gJ3RocmVlJztcclxuXHJcbmNvbnN0IGRlZmF1bHRQYXJhbXMgPSB7XHJcbiAgICBpbnRlbnNpdHk6IDFcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFnZW50YVBhcnR5IGV4dGVuZHMgR3JvdXAge1xyXG5cdGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcclxuXHRcdHN1cGVyKC4uLmFyZ3MpO1xyXG5cdFx0dGhpcy5wYXJhbXMgPSB7XHJcblx0XHRcdC4uLmRlZmF1bHRQYXJhbXMsXHJcblx0XHRcdC4uLmFyZ3NbMF1cclxuXHRcdH07XHJcblxyXG4gICAgY29uc3QgaGVtaUxpZ2h0ID0gbmV3IEhlbWlzcGhlcmVMaWdodChcclxuXHRcdFx0MHhmZmZmZmYsXHJcblx0XHRcdDB4ZmZmZmZmLFxyXG5cdFx0XHQxLjUgKiB0aGlzLnBhcmFtcy5pbnRlbnNpdHlcclxuXHRcdCk7XHJcblx0XHRoZW1pTGlnaHQuY29sb3Iuc2V0SFNMKFxyXG5cdFx0XHROb3JtYWxpemVIKDMyNSksIFxyXG5cdFx0XHQwLjksXHJcblx0XHRcdDAuOTRcclxuXHRcdCk7XHJcblx0XHRoZW1pTGlnaHQuZ3JvdW5kQ29sb3Iuc2V0SFNMKFxyXG5cdFx0XHROb3JtYWxpemVIKDMyNSksIFxyXG5cdFx0XHQwLjksIFxyXG5cdFx0XHQwLjY0XHJcblx0XHQpO1xyXG5cdFx0aGVtaUxpZ2h0LnBvc2l0aW9uLnNldCggMCwgMiwgMCApO1xyXG5cdFx0dGhpcy5hZGQoIGhlbWlMaWdodCApO1xyXG5cdH1cclxufVxyXG5cdFxyXG5mdW5jdGlvbiBOb3JtYWxpemVIKGgpIHtcclxuXHRyZXR1cm4gaC8zNjAuMDtcclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIENvbG9yLFxyXG4gIE1lc2hCYXNpY01hdGVyaWFsLFxyXG4gIEN5bGluZGVyR2VvbWV0cnksXHJcbiAgTWVzaFxyXG59IGZyb20gJ3RocmVlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2ljQ3lsaW5kZXIge1xyXG4gIGNvbnN0cnVjdG9yKHtzaXplID0gNSwgbWF0ZXJpYWwsIHBvc2l0aW9ufSkge1xyXG4gICAgdGhpcy5zZWVkID0gTWF0aC5yYW5kb20oKTtcclxuICAgIGNvbnN0IGNvbG9yID0ge3I6MSAsZzoxLCBiOjF9O1xyXG4gICAgdGhpcy5jb2xvciA9IG5ldyBDb2xvcigpO1xyXG4gICAgdGhpcy5jb2xvci5zZXRSR0IoY29sb3IuciwgY29sb3IuZywgY29sb3IuYik7XHJcblxyXG4gICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsIHx8IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IEN5bGluZGVyR2VvbWV0cnkoc2l6ZSwgc2l6ZSwgc2l6ZSk7XHJcblxyXG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2goXHJcbiAgICAgIHRoaXMuZ2VvbWV0cnksXHJcbiAgICAgIHRoaXMubWF0ZXJpYWxcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHBvc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJvb3QgPSB0aGlzLm1lc2g7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgICBDb2xvcixcclxuICAgIFZlY3RvcjMsXHJcbiAgICBHcm91cCxcclxuICAgIE1lc2hTdGFuZGFyZE1hdGVyaWFsLFxyXG4gICAgRm9nXHJcbiAgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCBMaWdodHMgZnJvbSAnLi4vTGlnaHRzL01hZ2VudGFQYXJ0eS5qcyc7XHJcbmltcG9ydCBCYXNpY0N5bGluZGVyIGZyb20gJy4uL09iamVjdHMvQmFzaWNDeWxpbmRlci5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG9hdGluZ0JpbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7c2NlbmUsIG9uTG9hZH0pIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2NlbmUuY2FtZXJhLmZhciA9IDM1MDtcclxuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsZWFyQ29sb3IgPSBuZXcgQ29sb3IoKTtcclxuICAgICAgICBjbGVhckNvbG9yLnNldEludEhTTCg0OCwgOTAsIDY0KTtcclxuICAgICAgICBzY2VuZS5yZW5kZXJlci5zZXRDbGVhckNvbG9yKGNsZWFyQ29sb3IpO1xyXG4gICAgICAgIHNjZW5lLnNjZW5lLmZvZyA9IG5ldyBGb2coY2xlYXJDb2xvciwgMC4xLCAzMDApO1xyXG5cclxuICAgICAgICB0aGlzLnJvb3QgPSBuZXcgR3JvdXAoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlnaHRzID0gbmV3IExpZ2h0cygpO1xyXG4gICAgICAgIHRoaXMucm9vdC5hZGQobGlnaHRzKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3ViZU1hdCA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIGNvbG9yOiAweGZmZmZmZixcclxuICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjQsXHJcbiAgICAgICAgICAgIHJvdWdobmVzczogMC4yLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFtb2ViYXMgPSBbXTtcclxuICAgICAgICBjb25zdCBzbGljZXMgPSAxNztcclxuICAgICAgICBjb25zdCBhbWViYVNpemUgPSAxNTtcclxuICAgICAgICBjb25zdCBhbWViYUNvdW50ID0gNjA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAtYW1lYmFDb3VudDsgaSA8IGFtZWJhQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdBbWViYSA9IHRoaXMubmV3QW1lYmEoe1xyXG4gICAgICAgICAgICAgICAgc2xpY2VzLFxyXG4gICAgICAgICAgICAgICAgYW1lYmFTaXplLFxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IGN1YmVNYXQsXHJcbiAgICAgICAgICAgICAgICB4UG9zaXRpb246IGkqYW1lYmFTaXplKjAuMVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYW1vZWJhcy5wdXNoKG5ld0FtZWJhKTtcclxuICAgICAgICAgICAgdGhpcy5yb290LmFkZChuZXdBbWViYSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob25Mb2FkKSBvbkxvYWQoKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIG5ld0FtZWJhKHBhcmFtcykge1xyXG4gICAgICAgIGNvbnN0IHtzbGljZXMsIGFtZWJhU2l6ZSwgbWF0ZXJpYWwsIHhQb3NpdGlvbiA9IDB9ID0gcGFyYW1zO1xyXG5cclxuICAgICAgICBjb25zdCBwaUsgPSBNYXRoLlBJIC8gc2xpY2VzICogMC41O1xyXG4gICAgICAgIGNvbnN0IGFtZWJhID0gbmV3IEdyb3VwKCk7XHJcbiAgICAgICAgY29uc3QgekRpc3RyaWJ1dGlvbiA9IC0odGhpcy5zY2VuZS5jYW1lcmEuZmFyIC0gYW1lYmFTaXplKTtcclxuXHJcbiAgICAgICAgYW1lYmEudHJhbnNsYXRlWihNYXRoLnJhbmRvbSgpICogekRpc3RyaWJ1dGlvbik7XHJcbiAgICAgICAgZm9yIChsZXQgeSA9IC1zbGljZXM7IHkgPCBzbGljZXM7IHkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVggPSBNYXRoLmNvcyhwaUsgKiB5KSAqIGFtZWJhU2l6ZTtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVZID0gTWF0aC5zaW4ocGlLICogeSAqIDAuNykgKiBhbWViYVNpemU7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0N1YmUgPSBuZXcgQmFzaWNDeWxpbmRlcih7XHJcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IG1hdGVyaWFsLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKFxyXG4gICAgICAgICAgICAgICAgICAgIHhQb3NpdGlvbiAqIChhbWViYS5wb3NpdGlvbi56IC8gKGFtZWJhU2l6ZSAqIDMpKSxcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZVksXHJcbiAgICAgICAgICAgICAgICAgICAgMFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3Q3ViZS5yb290LnNjYWxlLmNvcHkobmV3IFZlY3RvcjMoXHJcbiAgICAgICAgICAgICAgICBzY2FsZVggKiAwLjcsXHJcbiAgICAgICAgICAgICAgICBwaUsgKiAwLjYgKiBzY2FsZVgsXHJcbiAgICAgICAgICAgICAgICBzY2FsZVggKiAwLjdcclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIGFtZWJhLmFkZChuZXdDdWJlLnJvb3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbWViYS51c2VyRGF0YSA9IHtcclxuICAgICAgICAgICAgJ2luaXRpYWxQb3NpdGlvbic6IGFtZWJhLnBvc2l0aW9uLmNsb25lKCksXHJcbiAgICAgICAgICAgICdyYW5kb21WYWx1ZSc6IE1hdGgucmFuZG9tKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBhbWViYTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUodGltZUVsYXBzZWQpIHtcclxuICAgICAgICBjb25zdCBhbmltYXRpb25UaW1lID0gdGltZUVsYXBzZWQgKiAzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGEgPSAwOyBhIDwgdGhpcy5hbW9lYmFzLmxlbmd0aDsgYSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW1lYmEoYSwgYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNhbWVyYSh0aW1lRWxhcHNlZCAqIC41KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVBbWViYShhLCBhbmltYXRpb25UaW1lKSB7XHJcbiAgICAgICAgY29uc3QgYW1lYmEgPSB0aGlzLmFtb2ViYXNbYV07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbWViYS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IGFtZWJhLmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdSb3QgPSBjaGlsZC5wb3NpdGlvbjtcclxuICAgICAgICAgICAgY2hpbGQucG9zaXRpb24uY29weShuZXdSb3QpO1xyXG4gICAgICAgICAgICBjaGlsZC50cmFuc2xhdGVZKE1hdGguc2luKGFuaW1hdGlvblRpbWUgKyAoaSAqIDAuMDggKyBhbWViYS51c2VyRGF0YS5yYW5kb21WYWx1ZSkgKyAoYSAqIE1hdGguUEkpKSAqIDAuMTIpO1xyXG4gICAgICAgICAgICBjaGlsZC5yb3RhdGVZKDAuMDA1ICsgKGkgKiAwLjAwMSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdQb3MgPSBhbWViYS51c2VyRGF0YS5pbml0aWFsUG9zaXRpb24uY2xvbmUoKTtcclxuICAgICAgICBjb25zdCBzYXdUaW1lID0gKGFuaW1hdGlvblRpbWUgKiAwLjAxICsgKGEgKiBNYXRoLlBJKSkgKiBNYXRoLnBvdyhNYXRoLmFicyhhbWViYS5wb3NpdGlvbi56ICogMC4wMSksIDAuMyk7XHJcbiAgICAgICAgY29uc3Qgc2F3QW1wID0gMjUwO1xyXG4gICAgICAgIG5ld1Bvcy55ID0gKDIgKiAoc2F3VGltZSAtIE1hdGguZmxvb3IoMC41ICsgc2F3VGltZSkpKSAqIHNhd0FtcDtcclxuICAgICAgICBhbWViYS5wb3NpdGlvbi5jb3B5KG5ld1Bvcyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ2FtZXJhKHRpbWVFbGFwc2VkKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEucG9zaXRpb24uY29weShcclxuICAgICAgICAgICAgbmV3IFZlY3RvcjMoXHJcbiAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgKE1hdGguY29zKHRpbWVFbGFwc2VkKSAqIDE0KSxcclxuICAgICAgICAgICAgICAgIDEwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuY2FtZXJhLmxvb2tBdChuZXcgVmVjdG9yMygwLCAwLCAtNjApKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICB9XHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==