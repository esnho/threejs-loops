(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{16:function(t,e,o){"use strict";o.d(e,"a",function(){return c});var n=o(14);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=a(this,i(e).call(this));var o=new n.i(16777215,16777215,1.5);return o.color.setHSL(u(325),.9,.94),o.groundColor.setHSL(u(325),.9,.64),o.position.set(0,2,0),t.add(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,n["h"]),e}();function u(t){return t/360}},7:function(t,e,o){"use strict";o.r(e);var n=o(14),r=o(16);var a=function t(e){var o=e.size,r=void 0===o?5:o,a=e.material,i=e.position;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.seed=Math.random();var s=1,c=1,u=1;this.color=new n.d,this.color.setRGB(s,c,u),this.material=a||new n.l({color:this.color}),this.geometry=new n.e(r,r,r),this.mesh=new n.k(this.geometry,this.material),i&&this.mesh.position.copy(i),this.root=this.mesh};function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}o.d(e,"default",function(){return s});var s=function(){function t(e){var o=e.scene,a=e.onLoad;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=o,o.camera.far=350,this.scene.camera.updateProjectionMatrix();var i=new n.d;i.setIntHSL(48,90,64),o.renderer.setClearColor(i),o.scene.fog=new n.g(i,.1,300),this.root=new n.h;var s=new r.a;this.root.add(s);var c=new n.m({color:16777215,metalness:.4,roughness:.2});this.amoebas=[];for(var u=-60;u<60;u++){var l=this.newAmeba({slices:17,amebaSize:15,material:c,xPosition:15*u*.1});this.amoebas.push(l),this.root.add(l)}a&&a()}var e,o,s;return e=t,(o=[{key:"newAmeba",value:function(t){var e=t.slices,o=t.amebaSize,r=t.material,i=t.xPosition,s=void 0===i?0:i,c=Math.PI/e*.5,u=new n.h,l=-(this.scene.camera.far-o);u.translateZ(Math.random()*l);for(var f=-e;f<e;f++){var h=Math.cos(c*f)*o,p=Math.sin(c*f*.7)*o,m=new a({size:1,material:r,position:new n.t(s*(u.position.z/(3*o)),p,0)});m.root.scale.copy(new n.t(.7*h,.6*c*h,.7*h)),u.add(m.root)}return u.userData={initialPosition:u.position.clone(),randomValue:Math.random()},u}},{key:"update",value:function(t){for(var e=3*t,o=0;o<this.amoebas.length;o++)this.updateAmeba(o,e);this.updateCamera(.5*t)}},{key:"updateAmeba",value:function(t,e){for(var o=this.amoebas[t],n=0;n<o.children.length;n++){var r=o.children[n],a=r.position;r.position.copy(a),r.translateY(.12*Math.sin(e+(.08*n+o.userData.randomValue)+t*Math.PI)),r.rotateY(.005+.001*n)}var i=o.userData.initialPosition.clone(),s=(.01*e+t*Math.PI)*Math.pow(Math.abs(.01*o.position.z),.3);i.y=2*(s-Math.floor(.5+s))*250,o.position.copy(i)}},{key:"updateCamera",value:function(t){this.scene.camera.position.copy(new n.t(0,14*Math.cos(t),10)),this.scene.camera.lookAt(new n.t(0,0,-60)),this.scene.camera.updateProjectionMatrix()}}])&&i(e.prototype,o),s&&i(e,s),t}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL01hZ2VudGFQYXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY0N5bGluZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9Mb29wcy9GbG9hdGluZ0Jpby5qcyJdLCJuYW1lcyI6WyJNYWdlbnRhUGFydHkiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9nZXRQcm90b3R5cGVPZiIsImNhbGwiLCJoZW1pTGlnaHQiLCJUSFJFRSIsImNvbG9yIiwic2V0SFNMIiwiTm9ybWFsaXplSCIsImdyb3VuZENvbG9yIiwicG9zaXRpb24iLCJzZXQiLCJhZGQiLCJoIiwiQmFzaWNDeWxpbmRlciIsIl9yZWYiLCJfcmVmJHNpemUiLCJzaXplIiwibWF0ZXJpYWwiLCJzZWVkIiwiTWF0aCIsInJhbmRvbSIsInNldFJHQiIsImdlb21ldHJ5IiwibWVzaCIsImNvcHkiLCJyb290IiwiRmxvYXRpbmdCaW8iLCJzY2VuZSIsIm9uTG9hZCIsIkZsb2F0aW5nQmlvX2NsYXNzQ2FsbENoZWNrIiwiY2FtZXJhIiwiZmFyIiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsImNsZWFyQ29sb3IiLCJzZXRJbnRIU0wiLCJyZW5kZXJlciIsInNldENsZWFyQ29sb3IiLCJmb2ciLCJsaWdodHMiLCJMaWdodHMiLCJjdWJlTWF0IiwibWV0YWxuZXNzIiwicm91Z2huZXNzIiwiYW1vZWJhcyIsImkiLCJuZXdBbWViYSIsInNsaWNlcyIsImFtZWJhU2l6ZSIsInhQb3NpdGlvbiIsInB1c2giLCJwYXJhbXMiLCJfcGFyYW1zJHhQb3NpdGlvbiIsInBpSyIsIlBJIiwiYW1lYmEiLCJ6RGlzdHJpYnV0aW9uIiwidHJhbnNsYXRlWiIsInkiLCJzY2FsZVgiLCJjb3MiLCJzY2FsZVkiLCJzaW4iLCJuZXdDdWJlIiwieiIsInNjYWxlIiwidXNlckRhdGEiLCJpbml0aWFsUG9zaXRpb24iLCJjbG9uZSIsInJhbmRvbVZhbHVlIiwidGltZUVsYXBzZWQiLCJhbmltYXRpb25UaW1lIiwiYSIsImxlbmd0aCIsInVwZGF0ZUFtZWJhIiwidXBkYXRlQ2FtZXJhIiwiY2hpbGRyZW4iLCJjaGlsZCIsIm5ld1JvdCIsInRyYW5zbGF0ZVkiLCJyb3RhdGVZIiwibmV3UG9zIiwic2F3VGltZSIsInBvdyIsImFicyIsImZsb29yIiwibG9va0F0Il0sIm1hcHBpbmdzIjoiMHdCQUVxQkEsY0FDbkIsU0FBQUEsSUFBYyxJQUFBQywrRkFBQUMsQ0FBQUMsS0FBQUgsR0FDWkMsRUFBQUcsRUFBQUQsS0FBQUUsRUFBQUwsR0FBQU0sS0FBQUgsT0FFQSxJQUFNSSxFQUFZLElBQUlDLElBQXVCLFNBQVUsU0FBVSxLQUhyRCxPQUlkRCxFQUFVRSxNQUFNQyxPQUNmQyxFQUFXLEtBQ1gsR0FDQSxLQUVESixFQUFVSyxZQUFZRixPQUNyQkMsRUFBVyxLQUNYLEdBQ0EsS0FFREosRUFBVU0sU0FBU0MsSUFBSyxFQUFHLEVBQUcsR0FDOUJiLEVBQUtjLElBQUtSLEdBZklOLDhPQUQwQk8sYUFvQjFDLFNBQVNHLEVBQVdLLEdBQ25CLE9BQU9BLEVBQUUsb0VDckJXQyxFQUNuQixTQUFBQSxFQUFBQyxHQUE0QyxJQUFBQyxFQUFBRCxFQUEvQkUsWUFBK0IsSUFBQUQsRUFBeEIsRUFBd0JBLEVBQXJCRSxFQUFxQkgsRUFBckJHLFNBQVVSLEVBQVdLLEVBQVhMLHNHQUFXWCxDQUFBQyxLQUFBYyxHQUMxQ2QsS0FBS21CLEtBQU9DLEtBQUtDLFNBQ2pCLElBQU1mLEVBQVcsRUFBWEEsRUFBZ0IsRUFBaEJBLEVBQXFCLEVBQzNCTixLQUFLTSxNQUFRLElBQUlELElBQ2pCTCxLQUFLTSxNQUFNZ0IsT0FBT2hCLEVBQVNBLEVBQVNBLEdBRXBDTixLQUFLa0IsU0FBV0EsR0FBWSxJQUFJYixJQUF3QixDQUN0REMsTUFBT04sS0FBS00sUUFHZE4sS0FBS3VCLFNBQVcsSUFBSWxCLElBQXVCWSxFQUFNQSxF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QXBGM0QsS0FBSzBDLElBQUlTLEdBQXFCLElBQUoxQixFQUFXVSxFQUFNVyxTQUFTRyxhQUFnQkcsRUFBSXBELEtBQUtrQyxLQUM5RnVCLEVBQU1HLFFBQVEsS0FBYSxLQUFKbkMsR0FFM0IsSUFBTW9DLEVBQVMxQixFQUFNVyxTQUFTQyxnQkFBZ0JDLFFBQ3hDYyxHQUEyQixJQUFoQlgsRUFBd0JDLEVBQUlwRCxLQUFLa0MsSUFBT2xDLEtBQUsrRCxJQUFJL0QsS0FBS2dFLElBQXVCLElBQW5CN0IsRUFBTTdDLFNBQVNzRCxHQUFXLElBRXJHaUIsRUFBT3ZCLEVBQUssR0FBS3dCLEVBQVU5RCxLQUFLaUUsTUFBTSxHQUFNSCxJQUQ3QixJQUVmM0IsRUFBTTdDLFNBQVNlLEtBQUt3RCx3Q0FHWFgsR0FDVHRFLEtBQUs0QixNQUFNRyxPQUFPckIsU0FBU2UsS0FDdkIsSUFBSXBCLElBQ0EsRUFDeUIsR0FBeEJlLEtBQUt3QyxJQUFJVSxHQUNWLEtBRVJ0RSxLQUFLNEIsTUFBTUcsT0FBT3VELE9BQU8sSUFBSWpGLElBQWMsRUFBRyxHQUFJLEtBRWxETCxLQUFLNEIsTUFBTUcsT0FBT0UiLCJmaWxlIjoiLi9qcy9GbG9hdGluZ0Jpby5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hZ2VudGFQYXJ0eSBleHRlbmRzIFRIUkVFLkdyb3VwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IGhlbWlMaWdodCA9IG5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQoIDB4ZmZmZmZmLCAweGZmZmZmZiwgMS41ICk7XG5cdFx0aGVtaUxpZ2h0LmNvbG9yLnNldEhTTChcblx0XHRcdE5vcm1hbGl6ZUgoMzI1KSwgXG5cdFx0XHQwLjksXG5cdFx0XHQwLjk0XG5cdFx0KTtcblx0XHRoZW1pTGlnaHQuZ3JvdW5kQ29sb3Iuc2V0SFNMKFxuXHRcdFx0Tm9ybWFsaXplSCgzMjUpLCBcblx0XHRcdDAuOSwgXG5cdFx0XHQwLjY0XG5cdFx0KTtcblx0XHRoZW1pTGlnaHQucG9zaXRpb24uc2V0KCAwLCAyLCAwICk7XG5cdFx0dGhpcy5hZGQoIGhlbWlMaWdodCApO1xuXHR9XG59XG5cdFxuZnVuY3Rpb24gTm9ybWFsaXplSChoKSB7XG5cdHJldHVybiBoLzM2MC4wO1xufVxuIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNpY0N5bGluZGVyIHtcbiAgY29uc3RydWN0b3Ioe3NpemUgPSA1LCBtYXRlcmlhbCwgcG9zaXRpb259KSB7XG4gICAgdGhpcy5zZWVkID0gTWF0aC5yYW5kb20oKTtcbiAgICBjb25zdCBjb2xvciA9IHtyOjEgLGc6MSwgYjoxfTtcbiAgICB0aGlzLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7XG4gICAgdGhpcy5jb2xvci5zZXRSR0IoY29sb3IuciwgY29sb3IuZywgY29sb3IuYik7XG5cbiAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWwgfHwgbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXG4gICAgfSk7XG5cbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoc2l6ZSwgc2l6ZSwgc2l6ZSk7XG5cbiAgICB0aGlzLm1lc2ggPSBuZXcgVEhSRUUuTWVzaChcbiAgICAgIHRoaXMuZ2VvbWV0cnksXG4gICAgICB0aGlzLm1hdGVyaWFsXG4gICAgKTtcblxuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMucm9vdCA9IHRoaXMubWVzaDtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IExpZ2h0cyBmcm9tICcuLi9MaWdodHMvTWFnZW50YVBhcnR5LmpzJztcbmltcG9ydCBCYXNpY0N5bGluZGVyIGZyb20gJy4uL09iamVjdHMvQmFzaWNDeWxpbmRlci5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsb2F0aW5nQmlvIHtcbiAgICBjb25zdHJ1Y3Rvcih7c2NlbmUsIG9uTG9hZH0pIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgICAgICBcbiAgICAgICAgc2NlbmUuY2FtZXJhLmZhciA9IDM1MDtcbiAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgICAgICAgXG4gICAgICAgIGNvbnN0IGNsZWFyQ29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKTtcbiAgICAgICAgY2xlYXJDb2xvci5zZXRJbnRIU0woNDgsIDkwLCA2NCk7XG4gICAgICAgIHNjZW5lLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoY2xlYXJDb2xvcik7XG4gICAgICAgIHNjZW5lLnNjZW5lLmZvZyA9IG5ldyBUSFJFRS5Gb2coY2xlYXJDb2xvciwgMC4xLCAzMDApO1xuXG4gICAgICAgIHRoaXMucm9vdCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgICAgIGNvbnN0IGxpZ2h0cyA9IG5ldyBMaWdodHMoKTtcbiAgICAgICAgdGhpcy5yb290LmFkZChsaWdodHMpO1xuXG4gICAgICAgIGNvbnN0IGN1YmVNYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICAgICAgY29sb3I6IDB4ZmZmZmZmLFxuICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjQsXG4gICAgICAgICAgICByb3VnaG5lc3M6IDAuMixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hbW9lYmFzID0gW107XG4gICAgICAgIGNvbnN0IHNsaWNlcyA9IDE3O1xuICAgICAgICBjb25zdCBhbWViYVNpemUgPSAxNTtcbiAgICAgICAgY29uc3QgYW1lYmFDb3VudCA9IDYwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAtYW1lYmFDb3VudDsgaSA8IGFtZWJhQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbmV3QW1lYmEgPSB0aGlzLm5ld0FtZWJhKHtcbiAgICAgICAgICAgICAgICBzbGljZXMsXG4gICAgICAgICAgICAgICAgYW1lYmFTaXplLFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBjdWJlTWF0LFxuICAgICAgICAgICAgICAgIHhQb3NpdGlvbjogaSphbWViYVNpemUqMC4xXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5hbW9lYmFzLnB1c2gobmV3QW1lYmEpO1xuICAgICAgICAgICAgdGhpcy5yb290LmFkZChuZXdBbWViYSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25Mb2FkKSBvbkxvYWQoKTtcbiAgICB9XG4gICAgXG5cbiAgICBuZXdBbWViYShwYXJhbXMpIHtcbiAgICAgICAgY29uc3Qge3NsaWNlcywgYW1lYmFTaXplLCBtYXRlcmlhbCwgeFBvc2l0aW9uID0gMH0gPSBwYXJhbXM7XG5cbiAgICAgICAgY29uc3QgcGlLID0gTWF0aC5QSSAvIHNsaWNlcyAqIDAuNTtcbiAgICAgICAgY29uc3QgYW1lYmEgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICAgICAgY29uc3QgekRpc3RyaWJ1dGlvbiA9IC0odGhpcy5zY2VuZS5jYW1lcmEuZmFyIC0gYW1lYmFTaXplKTtcblxuICAgICAgICBhbWViYS50cmFuc2xhdGVaKE1hdGgucmFuZG9tKCkgKiB6RGlzdHJpYnV0aW9uKTtcbiAgICAgICAgZm9yIChsZXQgeSA9IC1zbGljZXM7IHkgPCBzbGljZXM7IHkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gTWF0aC5jb3MocGlLICogeSkgKiBhbWViYVNpemU7XG4gICAgICAgICAgICBjb25zdCBzY2FsZVkgPSBNYXRoLnNpbihwaUsgKiB5ICogMC43KSAqIGFtZWJhU2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0N1YmUgPSBuZXcgQmFzaWNDeWxpbmRlcih7XG4gICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICBtYXRlcmlhbDogbWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBUSFJFRS5WZWN0b3IzKFxuICAgICAgICAgICAgICAgICAgICB4UG9zaXRpb24gKiAoYW1lYmEucG9zaXRpb24ueiAvIChhbWViYVNpemUgKiAzKSksXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWSxcbiAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbmV3Q3ViZS5yb290LnNjYWxlLmNvcHkobmV3IFRIUkVFLlZlY3RvcjMoXG4gICAgICAgICAgICAgICAgc2NhbGVYICogMC43LFxuICAgICAgICAgICAgICAgIHBpSyAqIDAuNiAqIHNjYWxlWCxcbiAgICAgICAgICAgICAgICBzY2FsZVggKiAwLjdcbiAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgYW1lYmEuYWRkKG5ld0N1YmUucm9vdCk7XG4gICAgICAgIH1cbiAgICAgICAgYW1lYmEudXNlckRhdGEgPSB7XG4gICAgICAgICAgICAnaW5pdGlhbFBvc2l0aW9uJzogYW1lYmEucG9zaXRpb24uY2xvbmUoKSxcbiAgICAgICAgICAgICdyYW5kb21WYWx1ZSc6IE1hdGgucmFuZG9tKClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGFtZWJhO1xuICAgIH1cblxuICAgIHVwZGF0ZSh0aW1lRWxhcHNlZCkge1xuICAgICAgICBjb25zdCBhbmltYXRpb25UaW1lID0gdGltZUVsYXBzZWQgKiAzO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgYSA9IDA7IGEgPCB0aGlzLmFtb2ViYXMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW1lYmEoYSwgYW5pbWF0aW9uVGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZUNhbWVyYSh0aW1lRWxhcHNlZCAqIC41KTtcbiAgICB9XG5cbiAgICB1cGRhdGVBbWViYShhLCBhbmltYXRpb25UaW1lKSB7XG4gICAgICAgIGNvbnN0IGFtZWJhID0gdGhpcy5hbW9lYmFzW2FdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFtZWJhLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IGFtZWJhLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgY29uc3QgbmV3Um90ID0gY2hpbGQucG9zaXRpb247XG4gICAgICAgICAgICBjaGlsZC5wb3NpdGlvbi5jb3B5KG5ld1JvdCk7XG4gICAgICAgICAgICBjaGlsZC50cmFuc2xhdGVZKE1hdGguc2luKGFuaW1hdGlvblRpbWUgKyAoaSAqIDAuMDggKyBhbWViYS51c2VyRGF0YS5yYW5kb21WYWx1ZSkgKyAoYSAqIE1hdGguUEkpKSAqIDAuMTIpO1xuICAgICAgICAgICAgY2hpbGQucm90YXRlWSgwLjAwNSArIChpICogMC4wMDEpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdQb3MgPSBhbWViYS51c2VyRGF0YS5pbml0aWFsUG9zaXRpb24uY2xvbmUoKTtcbiAgICAgICAgY29uc3Qgc2F3VGltZSA9IChhbmltYXRpb25UaW1lICogMC4wMSArIChhICogTWF0aC5QSSkpICogTWF0aC5wb3coTWF0aC5hYnMoYW1lYmEucG9zaXRpb24ueiAqIDAuMDEpLCAwLjMpO1xuICAgICAgICBjb25zdCBzYXdBbXAgPSAyNTA7XG4gICAgICAgIG5ld1Bvcy55ID0gKDIgKiAoc2F3VGltZSAtIE1hdGguZmxvb3IoMC41ICsgc2F3VGltZSkpKSAqIHNhd0FtcDtcbiAgICAgICAgYW1lYmEucG9zaXRpb24uY29weShuZXdQb3MpO1xuICAgIH1cblxuICAgIHVwZGF0ZUNhbWVyYSh0aW1lRWxhcHNlZCkge1xuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS5wb3NpdGlvbi5jb3B5KFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAoTWF0aC5jb3ModGltZUVsYXBzZWQpICogMTQpLFxuICAgICAgICAgICAgICAgIDEwKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIC02MCkpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH1cblxufSJdLCJzb3VyY2VSb290IjoiIn0=