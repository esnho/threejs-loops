(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{17:function(t,e,o){"use strict";o.d(e,"a",function(){return c});var n=o(15);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=a(this,i(e).call(this));var o=new n.HemisphereLight(16777215,16777215,1.5);return o.color.setHSL(u(325),.9,.94),o.groundColor.setHSL(u(325),.9,.64),o.position.set(0,2,0),t.add(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,n["Group"]),e}();function u(t){return t/360}},8:function(t,e,o){"use strict";o.r(e);var n=o(15),r=o(17);var a=function t(e){var o=e.size,r=void 0===o?5:o,a=e.material,i=e.position;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.seed=Math.random();var s=1,c=1,u=1;this.color=new n.Color,this.color.setRGB(s,c,u),this.material=a||new n.MeshBasicMaterial({color:this.color}),this.geometry=new n.CylinderGeometry(r,r,r),this.mesh=new n.Mesh(this.geometry,this.material),i&&this.mesh.position.copy(i),this.root=this.mesh};function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}o.d(e,"default",function(){return s});var s=function(){function t(e){var o=e.scene,a=e.onLoad;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=o,o.camera.far=350,this.scene.camera.updateProjectionMatrix();var i=new n.Color;i.setIntHSL(48,90,64),o.renderer.setClearColor(i),o.scene.fog=new n.Fog(i,.1,300),this.root=new n.Group;var s=new r.a;this.root.add(s);var c=new n.MeshStandardMaterial({color:16777215,metalness:.4,roughness:.2});this.amoebas=[];for(var u=-60;u<60;u++){var l=this.newAmeba({slices:17,amebaSize:15,material:c,xPosition:15*u*.1});this.amoebas.push(l),this.root.add(l)}a&&a()}var e,o,s;return e=t,(o=[{key:"newAmeba",value:function(t){var e=t.slices,o=t.amebaSize,r=t.material,i=t.xPosition,s=void 0===i?0:i,c=Math.PI/e*.5,u=new n.Group,l=-(this.scene.camera.far-o);u.translateZ(Math.random()*l);for(var h=-e;h<e;h++){var f=Math.cos(c*h)*o,p=Math.sin(c*h*.7)*o,m=new a({size:1,material:r,position:new n.Vector3(s*(u.position.z/(3*o)),p,0)});m.root.scale.copy(new n.Vector3(.7*f,.6*c*f,.7*f)),u.add(m.root)}return u.userData={initialPosition:u.position.clone(),randomValue:Math.random()},u}},{key:"update",value:function(t){for(var e=3*t,o=0;o<this.amoebas.length;o++)this.updateAmeba(o,e);this.updateCamera(.5*t)}},{key:"updateAmeba",value:function(t,e){for(var o=this.amoebas[t],n=0;n<o.children.length;n++){var r=o.children[n],a=r.position;r.position.copy(a),r.translateY(.12*Math.sin(e+(.08*n+o.userData.randomValue)+t*Math.PI)),r.rotateY(.005+.001*n)}var i=o.userData.initialPosition.clone(),s=(.01*e+t*Math.PI)*Math.pow(Math.abs(.01*o.position.z),.3);i.y=2*(s-Math.floor(.5+s))*250,o.position.copy(i)}},{key:"updateCamera",value:function(t){this.scene.camera.position.copy(new n.Vector3(0,14*Math.cos(t),10)),this.scene.camera.lookAt(new n.Vector3(0,0,-60)),this.scene.camera.updateProjectionMatrix()}}])&&i(e.prototype,o),s&&i(e,s),t}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL01hZ2VudGFQYXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY0N5bGluZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9Mb29wcy9GbG9hdGluZ0Jpby5qcyJdLCJuYW1lcyI6WyJNYWdlbnRhUGFydHkiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9nZXRQcm90b3R5cGVPZiIsImNhbGwiLCJoZW1pTGlnaHQiLCJIZW1pc3BoZXJlTGlnaHQiLCJjb2xvciIsInNldEhTTCIsIk5vcm1hbGl6ZUgiLCJncm91bmRDb2xvciIsInBvc2l0aW9uIiwic2V0IiwiYWRkIiwiR3JvdXAiLCJoIiwiQmFzaWNDeWxpbmRlciIsIl9yZWYiLCJfcmVmJHNpemUiLCJzaXplIiwibWF0ZXJpYWwiLCJzZWVkIiwiTWF0aCIsInJhbmRvbSIsIkNvbG9yIiwic2V0UkdCIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJnZW9tZXRyeSIsIkN5bGluZGVyR2VvbWV0cnkiLCJtZXNoIiwiTWVzaCIsImNvcHkiLCJyb290IiwiRmxvYXRpbmdCaW8iLCJzY2VuZSIsIm9uTG9hZCIsIkZsb2F0aW5nQmlvX2NsYXNzQ2FsbENoZWNrIiwiY2FtZXJhIiwiZmFyIiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsImNsZWFyQ29sb3IiLCJzZXRJbnRIU0wiLCJyZW5kZXJlciIsInNldENsZWFyQ29sb3IiLCJmb2ciLCJGb2ciLCJsaWdodHMiLCJMaWdodHMiLCJjdWJlTWF0IiwiTWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJtZXRhbG5lc3MiLCJyb3VnaG5lc3MiLCJhbW9lYmFzIiwiaSIsIm5ld0FtZWJhIiwic2xpY2VzIiwiYW1lYmFTaXplIiwieFBvc2l0aW9uIiwicHVzaCIsInBhcmFtcyIsIl9wYXJhbXMkeFBvc2l0aW9uIiwicGlLIiwiUEkiLCJhbWViYSIsInpEaXN0cmlidXRpb24iLCJ0cmFuc2xhdGVaIiwieSIsInNjYWxlWCIsImNvcyIsInNjYWxlWSIsInNpbiIsIm5ld0N1YmUiLCJWZWN0b3IzIiwieiIsInNjYWxlIiwidXNlckRhdGEiLCJpbml0aWFsUG9zaXRpb24iLCJjbG9uZSIsInJhbmRvbVZhbHVlIiwidGltZUVsYXBzZWQiLCJhbmltYXRpb25UaW1lIiwiYSIsImxlbmd0aCIsInVwZGF0ZUFtZWJhIiwidXBkYXRlQ2FtZXJhIiwiY2hpbGRyZW4iLCJjaGlsZCIsIm5ld1JvdCIsInRyYW5zbGF0ZVkiLCJyb3RhdGVZIiwibmV3UG9zIiwic2F3VGltZSIsInBvdyIsImFicyIsImZsb29yIiwibG9va0F0Il0sIm1hcHBpbmdzIjoiMHdCQUtxQkEsY0FDbkIsU0FBQUEsSUFBYyxJQUFBQywrRkFBQUMsQ0FBQUMsS0FBQUgsR0FDWkMsRUFBQUcsRUFBQUQsS0FBQUUsRUFBQUwsR0FBQU0sS0FBQUgsT0FFQSxJQUFNSSxFQUFZLElBQUlDLGtCQUFpQixTQUFVLFNBQVUsS0FIL0MsT0FJZEQsRUFBVUUsTUFBTUMsT0FDZkMsRUFBVyxLQUNYLEdBQ0EsS0FFREosRUFBVUssWUFBWUYsT0FDckJDLEVBQVcsS0FDWCxHQUNBLEtBRURKLEVBQVVNLFNBQVNDLElBQUssRUFBRyxFQUFHLEdBQzlCYixFQUFLYyxJQUFLUixHQWZJTiw4T0FEMEJlLGlCQW9CMUMsU0FBU0wsRUFBV00sR0FDbkIsT0FBT0EsRUFBRSxvRUNuQldDLEVBQ25CLFNBQUFBLEVBQUFDLEdBQTRDLElBQUFDLEVBQUFELEVBQS9CRSxZQUErQixJQUFBRCxFQUF4QixFQUF3QkEsRUFBckJFLEVBQXFCSCxFQUFyQkcsU0FBVVQsRUFBV00sRUFBWE4sc0dBQVdYLENBQUFDLEtBQUFlLEdBQzFDZixLQUFLb0IsS0FBT0MsS0FBS0MsU0FDakIsSUFBTWhCLEVBQVcsRUFBWEEsRUFBZ0IsRUFBaEJBLEVBQXFCLEVBQzNCTixLQUFLTSxNQUFRLElBQUlpQixRQUNqQnZCLEtBQUtNLE1BQU1rQixPQUFPbEIsRUFBU0EsRUFBU0EsR0FFcENOLEtBQUttQixTQUFXQSxHQUFZLElBQUlNLG9CQUFrQixDQUNoRG5CLE1BQU9OLEtBQUtNLFFBR2ROLEtBQUswQixTQUFXLElBQUlDLG1CQUFpQlQsRUFBTUEsRUFBTUEsR0FFakRsQixLQUFLNEIsS0FBTyxJQUFJQyxPQUNkN0IsS0FBSzBCLFNBQ0wxQixLQUFLbUIsVUFHSFQsR0FDRlYsS0FBSzRCLEtBQUtsQixTQUFTb0IsS0FBS3BCLEdBRzFCVixLQUFLK0IsS0FBTy9CLEtBQUs0QixzTkNuQkFJLGFBQ2pCLFNBQUFBLEVBQUFoQixHQUE2QixJQUFoQmlCLEVBQWdCakIsRUFBaEJpQixNQUFPQyxFQUFTbEIsRUFBVGtCLG9HQUFTQyxDQUFBbkMsS0FBQWdDLEdBQ3pCaEMsS0FBS2lDLE1BQVFBLEVBRWJBLEVBQU1HLE9BQU9DLElBQU0sSUFDbkJyQyxLQUFLaUMsTUFBTUcsT0FBT0UseUJBRWxCLElBQU1DLEVBQWEsSUFBSWhCLFFBQ3ZCZ0IsRUFBV0MsVUFBVSxHQUFJLEdBQUksSUFDN0JQLEVBQU1RLFNBQVNDLGNBQWNILEdBQzdCTixFQUFNQSxNQUFNVSxJQUFNLElBQUlDLE1BQUlMLEVBQVksR0FBSyxLQUUzQ3ZDLEtBQUsrQixLQUFPLElBQUlsQixRQUVoQixJQUFNZ0MsRUFBUyxJQUFJQyxJQUNuQjlDLEtBQUsrQixLQUFLbkIsSUFBSWlDLEdBRWQsSUFBTUUsRUFBVSxJQUFJQyx1QkFBcUIsQ0FDckMxQyxNQUFPLFNBQ1AyQyxVQUFXLEdBQ1hDLFVBQVcsS0FHZmxELEtBQUttRCxRQUFVLEdBS2YsSUFKQSxJQUlTQyxHQUZVLEdBRU9BLEVBRlAsR0FFdUJBLElBQUssQ0FDM0MsSUFBTUMsRUFBV3JELEtBQUtxRCxTQUFTLENBQzNCQyxPQU5PLEdBT1BDLFVBTlUsR0FPVnBDLFNBQVU0QixFQUNWUyxVQVJVLEdBUUNKLEVBQVksS0FHM0JwRCxLQUFLbUQsUUFBUU0sS0FBS0osR0FDbEJyRCxLQUFLK0IsS0FBS25CLElBQUl5QyxHQUdkbkIsR0FBUUEsNERBSVB3QixHQUFRLElBQ05KLEVBQThDSSxFQUE5Q0osT0FBUUMsRUFBc0NHLEVBQXRDSCxVQUFXcEMsRUFBMkJ1QyxFQUEzQnZDLFNBRGJ3QyxFQUN3Q0QsRUFBakJGLGlCQUR2QixJQUFBRyxFQUNtQyxFQURuQ0EsRUFHUEMsRUFBTXZDLEtBQUt3QyxHQUFLUCxFQUFTLEdBQ3pCUSxFQUFRLElBQUlqRCxRQUNaa0QsSUFBa0IvRCxLQUFLaUMsTUFBTUcsT0FBT0MsSUFBTWtCLEdBRWhETyxFQUFNRSxXQUFXM0MsS0FBS0MsU0FBV3lDLEdBQ2pDLElBQUssSUFBSUUsR0FBS1gsRUFBUVcsRUFBSVgsRUFBUVcsSUFBSyxDQUNuQyxJQUFNQyxFQUFTN0MsS0FBSzhDLElBQUlQLEVBQU1LLEdBQUtWLEVBQzdCYSxFQUFTL0MsS0FBS2dELElBQUlULEVBQU1LLEVBQUksSUFBT1YsRUFDbkNlLEVBQVUsSUFBSXZELEVBQWMsQ0FDOUJHLEtBQU0sRUFDTkMsU0FBVUEsRUFDVlQsU0FBVSxJQUFJNkQsVUFDVmYsR0FBYU0sRUFBTXBELFNBQVM4RCxHQUFpQixFQUFaakIsSUFDakNhLEVBQ0EsS0FHUkUsRUFBUXZDLEtBQUswQyxNQUFNM0MsS0FBSyxJQUFJeUMsVUFDZixHQUFUTCxFQUNNLEdBQU5OLEVBQVlNLEVBQ0gsR0FBVEEsSUFFSkosRUFBTWxELElBQUkwRCxFQUFRdkMsTUFNdEIsT0FKQStCLEVBQU1ZLFNBQVcsQ0FDYkMsZ0JBQW1CYixFQUFNcEQsU0FBU2tFLFFBQ2xDQyxZQUFleEQsS0FBS0MsVUFFakJ3QyxpQ0FHSmdCLEdBR0gsSUFGQSxJQUFNQyxFQUE4QixFQUFkRCxFQUViRSxFQUFJLEVBQUdBLEVBQUloRixLQUFLbUQsUUFBUThCLE9BQVFELElBQ3JDaEYsS0FBS2tGLFlBQVlGLEVBQUdELEdBR3hCL0UsS0FBS21GLGFBQTJCLEdBQWRMLHVDQUdWRSxFQUFHRCxHQUVYLElBREEsSUFBTWpCLEVBQVE5RCxLQUFLbUQsUUFBUTZCLEdBQ2xCNUIsRUFBSSxFQUFHQSxFQUFJVSxFQUFNc0IsU0FBU0gsT0FBUTdCLElBQUssQ0FDNUMsSUFBTWlDLEVBQVF2QixFQUFNc0IsU0FBU2hDLEdBQ3ZCa0MsRUFBU0QsRUFBTTNFLFNBQ3JCMkUsRUFBTTNFLFNBQVNvQixLQUFLd0QsR0FDcEJELEVBQU1FLFdBQStGLElBQXBGbEUsS0FBS2dELElBQUlVLEdBQXFCLElBQUozQixFQUFXVSxFQUFNWSxTQUFTRyxhQUFnQkcsRUFBSTNELEtBQUt3QyxLQUM5RndCLEVBQU1HLFFBQVEsS0FBYSxLQUFKcEMsR0FFM0IsSUFBTXFDLEVBQVMzQixFQUFNWSxTQUFTQyxnQkFBZ0JDLFFBQ3hDYyxHQUEyQixJQUFoQlgsRUFBd0JDLEVBQUkzRCxLQUFLd0MsSUFBT3hDLEtBQUtzRSxJQUFJdEUsS0FBS3VFLElBQXVCLElBQW5COUIsRUFBTXBELFNBQVM4RCxHQUFXLElBRXJHaUIsRUFBT3hCLEVBQUssR0FBS3lCLEVBQVVyRSxLQUFLd0UsTUFBTSxHQUFNSCxJQUQ3QixJQUVmNUIsRUFBTXBELFNBQVNvQixLQUFLMkQsd0NBR1hYLEdBQ1Q5RSxLQUFLaUMsTUFBTUcsT0FBTzFCLFNBQVNvQixLQUN2QixJQUFJeUMsVUFDQSxFQUN5QixHQUF4QmxELEtBQUs4QyxJQUFJVyxHQUNWLEtBRVI5RSxLQUFLaUMsTUFBTUcsT0FBTzBELE9BQU8sSUFBSXZCLFVBQVEsRUFBRyxHQUFJLEtBRTVDdkUsS0FBS2lDLE1BQU1HLE9BQU9FIiwiZmlsZSI6Ii4vanMvRmxvYXRpbmdCaW8uYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgR3JvdXAsXG5cdEhlbWlzcGhlcmVMaWdodFxufSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hZ2VudGFQYXJ0eSBleHRlbmRzIEdyb3VwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IGhlbWlMaWdodCA9IG5ldyBIZW1pc3BoZXJlTGlnaHQoIDB4ZmZmZmZmLCAweGZmZmZmZiwgMS41ICk7XG5cdFx0aGVtaUxpZ2h0LmNvbG9yLnNldEhTTChcblx0XHRcdE5vcm1hbGl6ZUgoMzI1KSwgXG5cdFx0XHQwLjksXG5cdFx0XHQwLjk0XG5cdFx0KTtcblx0XHRoZW1pTGlnaHQuZ3JvdW5kQ29sb3Iuc2V0SFNMKFxuXHRcdFx0Tm9ybWFsaXplSCgzMjUpLCBcblx0XHRcdDAuOSwgXG5cdFx0XHQwLjY0XG5cdFx0KTtcblx0XHRoZW1pTGlnaHQucG9zaXRpb24uc2V0KCAwLCAyLCAwICk7XG5cdFx0dGhpcy5hZGQoIGhlbWlMaWdodCApO1xuXHR9XG59XG5cdFxuZnVuY3Rpb24gTm9ybWFsaXplSChoKSB7XG5cdHJldHVybiBoLzM2MC4wO1xufVxuIiwiaW1wb3J0IHtcbiAgQ29sb3IsXG4gIE1lc2hCYXNpY01hdGVyaWFsLFxuICBDeWxpbmRlckdlb21ldHJ5LFxuICBNZXNoXG59IGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzaWNDeWxpbmRlciB7XG4gIGNvbnN0cnVjdG9yKHtzaXplID0gNSwgbWF0ZXJpYWwsIHBvc2l0aW9ufSkge1xuICAgIHRoaXMuc2VlZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgY29uc3QgY29sb3IgPSB7cjoxICxnOjEsIGI6MX07XG4gICAgdGhpcy5jb2xvciA9IG5ldyBDb2xvcigpO1xuICAgIHRoaXMuY29sb3Iuc2V0UkdCKGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIpO1xuXG4gICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsIHx8IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICBjb2xvcjogdGhpcy5jb2xvclxuICAgIH0pO1xuXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBDeWxpbmRlckdlb21ldHJ5KHNpemUsIHNpemUsIHNpemUpO1xuXG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2goXG4gICAgICB0aGlzLmdlb21ldHJ5LFxuICAgICAgdGhpcy5tYXRlcmlhbFxuICAgICk7XG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLnJvb3QgPSB0aGlzLm1lc2g7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ29sb3IsXG4gICAgVmVjdG9yMyxcbiAgICBHcm91cCxcbiAgICBNZXNoU3RhbmRhcmRNYXRlcmlhbCxcbiAgICBGb2dcbiAgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgTGlnaHRzIGZyb20gJy4uL0xpZ2h0cy9NYWdlbnRhUGFydHkuanMnO1xuaW1wb3J0IEJhc2ljQ3lsaW5kZXIgZnJvbSAnLi4vT2JqZWN0cy9CYXNpY0N5bGluZGVyLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxvYXRpbmdCaW8ge1xuICAgIGNvbnN0cnVjdG9yKHtzY2VuZSwgb25Mb2FkfSkge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgICAgIFxuICAgICAgICBzY2VuZS5jYW1lcmEuZmFyID0gMzUwO1xuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgY29uc3QgY2xlYXJDb2xvciA9IG5ldyBDb2xvcigpO1xuICAgICAgICBjbGVhckNvbG9yLnNldEludEhTTCg0OCwgOTAsIDY0KTtcbiAgICAgICAgc2NlbmUucmVuZGVyZXIuc2V0Q2xlYXJDb2xvcihjbGVhckNvbG9yKTtcbiAgICAgICAgc2NlbmUuc2NlbmUuZm9nID0gbmV3IEZvZyhjbGVhckNvbG9yLCAwLjEsIDMwMCk7XG5cbiAgICAgICAgdGhpcy5yb290ID0gbmV3IEdyb3VwKCk7XG5cbiAgICAgICAgY29uc3QgbGlnaHRzID0gbmV3IExpZ2h0cygpO1xuICAgICAgICB0aGlzLnJvb3QuYWRkKGxpZ2h0cyk7XG5cbiAgICAgICAgY29uc3QgY3ViZU1hdCA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogMHhmZmZmZmYsXG4gICAgICAgICAgICBtZXRhbG5lc3M6IDAuNCxcbiAgICAgICAgICAgIHJvdWdobmVzczogMC4yLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFtb2ViYXMgPSBbXTtcbiAgICAgICAgY29uc3Qgc2xpY2VzID0gMTc7XG4gICAgICAgIGNvbnN0IGFtZWJhU2l6ZSA9IDE1O1xuICAgICAgICBjb25zdCBhbWViYUNvdW50ID0gNjA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IC1hbWViYUNvdW50OyBpIDwgYW1lYmFDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdBbWViYSA9IHRoaXMubmV3QW1lYmEoe1xuICAgICAgICAgICAgICAgIHNsaWNlcyxcbiAgICAgICAgICAgICAgICBhbWViYVNpemUsXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IGN1YmVNYXQsXG4gICAgICAgICAgICAgICAgeFBvc2l0aW9uOiBpKmFtZWJhU2l6ZSowLjFcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmFtb2ViYXMucHVzaChuZXdBbWViYSk7XG4gICAgICAgICAgICB0aGlzLnJvb3QuYWRkKG5ld0FtZWJhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvbkxvYWQpIG9uTG9hZCgpO1xuICAgIH1cbiAgICBcblxuICAgIG5ld0FtZWJhKHBhcmFtcykge1xuICAgICAgICBjb25zdCB7c2xpY2VzLCBhbWViYVNpemUsIG1hdGVyaWFsLCB4UG9zaXRpb24gPSAwfSA9IHBhcmFtcztcblxuICAgICAgICBjb25zdCBwaUsgPSBNYXRoLlBJIC8gc2xpY2VzICogMC41O1xuICAgICAgICBjb25zdCBhbWViYSA9IG5ldyBHcm91cCgpO1xuICAgICAgICBjb25zdCB6RGlzdHJpYnV0aW9uID0gLSh0aGlzLnNjZW5lLmNhbWVyYS5mYXIgLSBhbWViYVNpemUpO1xuXG4gICAgICAgIGFtZWJhLnRyYW5zbGF0ZVooTWF0aC5yYW5kb20oKSAqIHpEaXN0cmlidXRpb24pO1xuICAgICAgICBmb3IgKGxldCB5ID0gLXNsaWNlczsgeSA8IHNsaWNlczsgeSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzY2FsZVggPSBNYXRoLmNvcyhwaUsgKiB5KSAqIGFtZWJhU2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlWSA9IE1hdGguc2luKHBpSyAqIHkgKiAwLjcpICogYW1lYmFTaXplO1xuICAgICAgICAgICAgY29uc3QgbmV3Q3ViZSA9IG5ldyBCYXNpY0N5bGluZGVyKHtcbiAgICAgICAgICAgICAgICBzaXplOiAxLFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbCxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoXG4gICAgICAgICAgICAgICAgICAgIHhQb3NpdGlvbiAqIChhbWViYS5wb3NpdGlvbi56IC8gKGFtZWJhU2l6ZSAqIDMpKSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVZLFxuICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXdDdWJlLnJvb3Quc2NhbGUuY29weShuZXcgVmVjdG9yMyhcbiAgICAgICAgICAgICAgICBzY2FsZVggKiAwLjcsXG4gICAgICAgICAgICAgICAgcGlLICogMC42ICogc2NhbGVYLFxuICAgICAgICAgICAgICAgIHNjYWxlWCAqIDAuN1xuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICBhbWViYS5hZGQobmV3Q3ViZS5yb290KTtcbiAgICAgICAgfVxuICAgICAgICBhbWViYS51c2VyRGF0YSA9IHtcbiAgICAgICAgICAgICdpbml0aWFsUG9zaXRpb24nOiBhbWViYS5wb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgICAgICAgJ3JhbmRvbVZhbHVlJzogTWF0aC5yYW5kb20oKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYW1lYmE7XG4gICAgfVxuXG4gICAgdXBkYXRlKHRpbWVFbGFwc2VkKSB7XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvblRpbWUgPSB0aW1lRWxhcHNlZCAqIDM7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBhID0gMDsgYSA8IHRoaXMuYW1vZWJhcy5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBbWViYShhLCBhbmltYXRpb25UaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlQ2FtZXJhKHRpbWVFbGFwc2VkICogLjUpO1xuICAgIH1cblxuICAgIHVwZGF0ZUFtZWJhKGEsIGFuaW1hdGlvblRpbWUpIHtcbiAgICAgICAgY29uc3QgYW1lYmEgPSB0aGlzLmFtb2ViYXNbYV07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1lYmEuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gYW1lYmEuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBjb25zdCBuZXdSb3QgPSBjaGlsZC5wb3NpdGlvbjtcbiAgICAgICAgICAgIGNoaWxkLnBvc2l0aW9uLmNvcHkobmV3Um90KTtcbiAgICAgICAgICAgIGNoaWxkLnRyYW5zbGF0ZVkoTWF0aC5zaW4oYW5pbWF0aW9uVGltZSArIChpICogMC4wOCArIGFtZWJhLnVzZXJEYXRhLnJhbmRvbVZhbHVlKSArIChhICogTWF0aC5QSSkpICogMC4xMik7XG4gICAgICAgICAgICBjaGlsZC5yb3RhdGVZKDAuMDA1ICsgKGkgKiAwLjAwMSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1BvcyA9IGFtZWJhLnVzZXJEYXRhLmluaXRpYWxQb3NpdGlvbi5jbG9uZSgpO1xuICAgICAgICBjb25zdCBzYXdUaW1lID0gKGFuaW1hdGlvblRpbWUgKiAwLjAxICsgKGEgKiBNYXRoLlBJKSkgKiBNYXRoLnBvdyhNYXRoLmFicyhhbWViYS5wb3NpdGlvbi56ICogMC4wMSksIDAuMyk7XG4gICAgICAgIGNvbnN0IHNhd0FtcCA9IDI1MDtcbiAgICAgICAgbmV3UG9zLnkgPSAoMiAqIChzYXdUaW1lIC0gTWF0aC5mbG9vcigwLjUgKyBzYXdUaW1lKSkpICogc2F3QW1wO1xuICAgICAgICBhbWViYS5wb3NpdGlvbi5jb3B5KG5ld1Bvcyk7XG4gICAgfVxuXG4gICAgdXBkYXRlQ2FtZXJhKHRpbWVFbGFwc2VkKSB7XG4gICAgICAgIHRoaXMuc2NlbmUuY2FtZXJhLnBvc2l0aW9uLmNvcHkoXG4gICAgICAgICAgICBuZXcgVmVjdG9yMyhcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIChNYXRoLmNvcyh0aW1lRWxhcHNlZCkgKiAxNCksXG4gICAgICAgICAgICAgICAgMTApXG4gICAgICAgICAgICApO1xuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS5sb29rQXQobmV3IFZlY3RvcjMoMCwgMCwgLTYwKSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgfVxuXG59Il0sInNvdXJjZVJvb3QiOiIifQ==