(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{106:function(t,e,o){"use strict";o.d(e,"a",function(){return c});var n=o(104);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=i(this,a(e).call(this));var o=new n.HemisphereLight(16777215,16777215,3);return o.color.setHSL(Math.NormalizeHue(325),.1,.94),o.groundColor.setHSL(Math.NormalizeHue(325),.1,.64),o.position.set(0,2,0),t.add(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,n["Group"]),e}()},107:function(t,e,o){"use strict";o.d(e,"a",function(){return p});var n=o(104);o(106);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function a(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h={intensity:1,castShadow:!1,bias:0,projectionSides:void 0,mapSize:512},p=function(t){function e(){var t,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];o=s(this,(t=c(e)).call.apply(t,[this].concat(a)));var p=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){i(t,e,o[e])})}return t}({},h,a[0]),f=p.intensity,l=p.castShadow,y=p.bias,m=p.projectionSides,d=p.mapSize;o.intensity=f,o.projectionSides=m,o.mapSize=d,console.log("mapsize",o.mapSize);var w=new n.DirectionalLight("white",.65*o.intensity),b=new n.DirectionalLight("white",.55*o.intensity);return w.shadow.bias=y||0,b.shadow.bias=y||0,w.castShadow=l,b.castShadow=l,o.updateProjection(w,o.projectionSides),o.updateProjection(b,o.projectionSides),o.updateShadowMap(w,o.mapSize),o.updateShadowMap(b,o.mapSize),w.position.copy(new n.Vector3(9,3.5,0)),b.position.copy(new n.Vector3(-10,2,0)),o.add(w,b),o}var o,r,p;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,n["Group"]),o=e,(r=[{key:"updateProjection",value:function(t,e){t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.updateProjectionMatrix()}},{key:"updateShadowMap",value:function(t,e){t.shadow.mapSize.width=e,t.shadow.mapSize.height=e}}])&&a(o.prototype,r),p&&a(o,p),e}()},108:function(t,e,o){"use strict";o.d(e,"a",function(){return r});var n=o(104);var r=function t(e){var o=e.size,r=void 0===o?5:o,i=e.material,a=e.position,s=e.widthSegments,c=e.heightSegments,u=e.castShadow,h=e.receiveShadow;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.seed=Math.random();var p=1,f=1,l=1;this.color=new n.Color,this.color.setRGB(p,f,l),this.material=i||new n.MeshBasicMaterial({color:this.color});var y=this.material.length>1?n.SphereBufferGeometry:n.SphereGeometry;if(this.geometry=new y(r,s||7,c||9),this.material.length){this.geometry.clearGroups();for(var m=0;m<i.length;m++)this.geometry.addGroup(0,1/0,m)}this.mesh=new n.Mesh(this.geometry,this.material),this.mesh.castShadow=u,this.mesh.receiveShadow=h,a&&this.mesh.position.copy(a),this.root=this.mesh}},33:function(t,e,o){"use strict";o.r(e),o.d(e,"default",function(){return s});var n=o(104),r=o(107),i=o(108);function a(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(e){var o=e.scene,r=e.onLoad;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=o,this.setupCamera(),this.root=new n.Group,this.setupLights(),this.initScene(),r&&r()}var e,o,s;return e=t,(o=[{key:"initScene",value:function(){var t=new n.MeshStandardMaterial({flatShading:!0});this.sphere=new i.a({size:4,material:t,widthSegments:6,heightSegments:4}),this.root.add(this.sphere.root),this.startCrasy(this.sphere,.5,4)}},{key:"startCrasy",value:function(t,e,o,r){var a=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(r=r||t.root.geometry.vertices.length,s<r){var c=new i.a({size:t.geometry.parameters.radius*e,material:t.material,widthSegments:Math.max(t.geometry.parameters.widthSegments-1,1),heightSegments:Math.max(t.geometry.parameters.heightSegments-1,1)});t.root.add(c.root);var u=t.root.geometry.vertices[s].clone();c.root.position.copy(u);var h=new n.Vector3(0,1,0);c.root.quaternion.setFromUnitVectors(h,u.sub(t.root.position).clone().normalize()),s++,window.requestAnimationFrame(function(){a.startCrasy(t,e,o,r,s),--o>0&&window.requestAnimationFrame(function(){a.startCrasy(c,e,o)})})}}},{key:"setupLights",value:function(){var t=new r.a({intensity:1.8,castShadow:!0,bias:2e-5,projectionSides:6.5,mapSize:1024});t.rotateY(Math.PI),this.root.add(t)}},{key:"setupCamera",value:function(){this.scene.camera.position.copy(new n.Vector3(0,4.5,18)),this.scene.camera.lookAt(new n.Vector3(0,0,0))}},{key:"update",value:function(t,e){this.sphere.root.rotateY(.5*e),this.sphere.root.rotateX(.2*e)}}])&&a(e.prototype,o),s&&a(e,s),t}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1doaXRlSGVtaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1R3b0RpcmVjdGlvbmFscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY1NwaGVyZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTG9vcHMvTm90T3B0aW1pemVkLmpzIl0sIm5hbWVzIjpbIldoaXRlSGVtaSIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX2dldFByb3RvdHlwZU9mIiwiY2FsbCIsImhlbWlMaWdodCIsIkhlbWlzcGhlcmVMaWdodCIsImNvbG9yIiwic2V0SFNMIiwiTWF0aCIsIk5vcm1hbGl6ZUh1ZSIsImdyb3VuZENvbG9yIiwicG9zaXRpb24iLCJzZXQiLCJhZGQiLCJHcm91cCIsImRlZmF1bHRQYXJhbXMiLCJpbnRlbnNpdHkiLCJjYXN0U2hhZG93IiwiYmlhcyIsInByb2plY3Rpb25TaWRlcyIsInVuZGVmaW5lZCIsIm1hcFNpemUiLCJUd29EaXJlY3Rpb25hbHMiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJhcHBseSIsImNvbmNhdCIsIl9kZWZhdWx0UGFyYW1zJGFyZ3MkIiwiX29iamVjdFNwcmVhZCIsImNvbnNvbGUiLCJsb2ciLCJkaXJlY3Rpb25hbExpZ2h0IiwiRGlyZWN0aW9uYWxMaWdodCIsImRpcmVjdGlvbmFsTGlnaHQyIiwic2hhZG93IiwidXBkYXRlUHJvamVjdGlvbiIsInVwZGF0ZVNoYWRvd01hcCIsImNvcHkiLCJWZWN0b3IzIiwibGlnaHQiLCJjYW1lcmEiLCJsZWZ0IiwicmlnaHQiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4Iiwid2lkdGgiLCJoZWlnaHQiLCJCYXNpY1NwaGVyZSIsIl9yZWYiLCJfcmVmJHNpemUiLCJzaXplIiwibWF0ZXJpYWwiLCJ3aWR0aFNlZ21lbnRzIiwiaGVpZ2h0U2VnbWVudHMiLCJyZWNlaXZlU2hhZG93Iiwic2VlZCIsInJhbmRvbSIsIkNvbG9yIiwic2V0UkdCIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJTcGhlcmUiLCJTcGhlcmVCdWZmZXJHZW9tZXRyeSIsIlNwaGVyZUdlb21ldHJ5IiwiZ2VvbWV0cnkiLCJjbGVhckdyb3VwcyIsImkiLCJhZGRHcm91cCIsIkluZmluaXR5IiwibWVzaCIsIk1lc2giLCJyb290IiwiTm90T3B0aW1pemVkIiwic2NlbmUiLCJvbkxvYWQiLCJzZXR1cENhbWVyYSIsIlRIUkVFIiwic2V0dXBMaWdodHMiLCJpbml0U2NlbmUiLCJzcGhlcmVNYXRlcmlhbCIsImZsYXRTaGFkaW5nIiwic3BoZXJlIiwic3RhcnRDcmFzeSIsInRhcmdldCIsInJhdGlvIiwibGltaXQiLCJ0b3RhbEVsZW1lbnRzIiwiY3VycmVudEVsZW1lbnQiLCJ2ZXJ0aWNlcyIsInBhcmFtZXRlcnMiLCJyYWRpdXMiLCJtYXgiLCJuZXdQb3NpdGlvbiIsImNsb25lIiwiYXhpcyIsInF1YXRlcm5pb24iLCJzZXRGcm9tVW5pdFZlY3RvcnMiLCJzdWIiLCJub3JtYWxpemUiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsaWdodHMiLCJMaWdodHMiLCJyb3RhdGVZIiwiUEkiLCJsb29rQXQiLCJ0aW1lRWxhcHNlZCIsImRlbHRhIiwicm90YXRlWCJdLCJtYXBwaW5ncyI6IjR3QkFLcUJBLGNBQ25CLFNBQUFBLElBQWMsSUFBQUMsK0ZBQUFDLENBQUFDLEtBQUFILEdBQ1pDLEVBQUFHLEVBQUFELEtBQUFFLEVBQUFMLEdBQUFNLEtBQUFILE9BRUEsSUFBTUksRUFBWSxJQUFJQyxrQkFBaUIsU0FBVSxTQUFVLEdBSC9DLE9BSWRELEVBQVVFLE1BQU1DLE9BQ2ZDLEtBQUtDLGFBQWEsS0FDbEIsR0FDQSxLQUVETCxFQUFVTSxZQUFZSCxPQUNyQkMsS0FBS0MsYUFBYSxLQUNsQixH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Q2xCOUcsS0FBS29GLE9BQU9WLEtBQUtnQyxRQUFnQixHQUFSSSxHQUN6QjlHLEtBQUtvRixPQUFPVixLQUFLcUMsUUFBZ0IsR0FBUkQiLCJmaWxlIjoiLi9qcy9Ob3RPcHRpbWl6ZWQuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcblx0R3JvdXAsXG5cdEhlbWlzcGhlcmVMaWdodFxufSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdoaXRlSGVtaSBleHRlbmRzIEdyb3VwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IGhlbWlMaWdodCA9IG5ldyBIZW1pc3BoZXJlTGlnaHQoIDB4ZmZmZmZmLCAweGZmZmZmZiwgMy4wICk7XG5cdFx0aGVtaUxpZ2h0LmNvbG9yLnNldEhTTChcblx0XHRcdE1hdGguTm9ybWFsaXplSHVlKDMyNSksIFxuXHRcdFx0MC4xLFxuXHRcdFx0MC45NFxuXHRcdCk7XG5cdFx0aGVtaUxpZ2h0Lmdyb3VuZENvbG9yLnNldEhTTChcblx0XHRcdE1hdGguTm9ybWFsaXplSHVlKDMyNSksIFxuXHRcdFx0MC4xLCBcblx0XHRcdDAuNjRcblx0XHQpO1xuXHRcdGhlbWlMaWdodC5wb3NpdGlvbi5zZXQoIDAsIDIsIDAgKTtcblx0XHR0aGlzLmFkZCggaGVtaUxpZ2h0ICk7XG5cdH1cbn1cbiIsImltcG9ydCB7XG4gICAgR3JvdXAsXG4gICAgRGlyZWN0aW9uYWxMaWdodCxcbiAgICBWZWN0b3IzXG4gIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IFdoaXRlSGVtaSBmcm9tICcuL1doaXRlSGVtaS5qcyc7XG5cbmNvbnN0IGRlZmF1bHRQYXJhbXMgPSB7XG4gICAgaW50ZW5zaXR5OiAxLFxuICAgIGNhc3RTaGFkb3c6IGZhbHNlLFxuICAgIGJpYXM6IDAsXG4gICAgcHJvamVjdGlvblNpZGVzOiB1bmRlZmluZWQsXG4gICAgbWFwU2l6ZTogNTEyLFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUd29EaXJlY3Rpb25hbHMgZXh0ZW5kcyBHcm91cCB7XG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICBzdXBlciguLi5hcmdzKTtcblx0XHRjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnNpdHksXG4gICAgICAgICAgICBjYXN0U2hhZG93LFxuICAgICAgICAgICAgYmlhcyxcbiAgICAgICAgICAgIHByb2plY3Rpb25TaWRlcyxcbiAgICAgICAgICAgIG1hcFNpemVcbiAgICAgICAgfSA9IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRQYXJhbXMsXG4gICAgICAgICAgICAuLi5hcmdzWzBdXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW50ZW5zaXR5ID0gaW50ZW5zaXR5O1xuICAgICAgICB0aGlzLnByb2plY3Rpb25TaWRlcyA9IHByb2plY3Rpb25TaWRlcztcbiAgICAgICAgdGhpcy5tYXBTaXplID0gbWFwU2l6ZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJtYXBzaXplXCIsIHRoaXMubWFwU2l6ZSlcbiAgICAgICAgXG4gICAgICAgIC8qIGNvbnN0IHdoaXRlRW1pID0gbmV3IFdoaXRlSGVtaSgpO1xuICAgICAgICB0aGlzLmFkZCh3aGl0ZUVtaSk7ICovXG5cbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KCd3aGl0ZScsIDAuNjUgKiB0aGlzLmludGVuc2l0eSk7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHQyID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoJ3doaXRlJywgMC41NSAqIHRoaXMuaW50ZW5zaXR5KTtcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuYmlhcyA9IGJpYXMgfHwgMDtcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodDIuc2hhZG93LmJpYXMgPSBiaWFzIHx8IDA7XG4gICAgICAgIFxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Mi5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcblxuICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3Rpb24oZGlyZWN0aW9uYWxMaWdodCwgdGhpcy5wcm9qZWN0aW9uU2lkZXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3Rpb24oZGlyZWN0aW9uYWxMaWdodDIsIHRoaXMucHJvamVjdGlvblNpZGVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVTaGFkb3dNYXAoZGlyZWN0aW9uYWxMaWdodCwgdGhpcy5tYXBTaXplKTtcbiAgICAgICAgdGhpcy51cGRhdGVTaGFkb3dNYXAoZGlyZWN0aW9uYWxMaWdodDIsIHRoaXMubWFwU2l6ZSk7XG5cbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5jb3B5KFxuICAgICAgICAgICAgbmV3IFZlY3RvcjMoXG4gICAgICAgICAgICAgICAgOSxcbiAgICAgICAgICAgICAgICAzLjUsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQyLnBvc2l0aW9uLmNvcHkoXG4gICAgICAgICAgICBuZXcgVmVjdG9yMyhcbiAgICAgICAgICAgICAgICAtMTAsXG4gICAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5hZGQoZGlyZWN0aW9uYWxMaWdodCwgZGlyZWN0aW9uYWxMaWdodDIpO1xuICAgIH1cblxuICAgIHVwZGF0ZVByb2plY3Rpb24obGlnaHQsIHByb2plY3Rpb25TaWRlcykge1xuICAgICAgICBsaWdodC5zaGFkb3cuY2FtZXJhLmxlZnQgPSAtcHJvamVjdGlvblNpZGVzO1xuICAgICAgICBsaWdodC5zaGFkb3cuY2FtZXJhLnJpZ2h0ID0gcHJvamVjdGlvblNpZGVzO1xuICAgICAgICBsaWdodC5zaGFkb3cuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTaGFkb3dNYXAobGlnaHQsIG1hcFNpemUpIHtcbiAgICAgICAgbGlnaHQuc2hhZG93Lm1hcFNpemUud2lkdGggPSBtYXBTaXplO1xuICAgICAgICBsaWdodC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSBtYXBTaXplO1xuICAgIH1cbn0iLCJpbXBvcnQge1xuICBDb2xvcixcbiAgTWVzaEJhc2ljTWF0ZXJpYWwsXG4gIFNwaGVyZUJ1ZmZlckdlb21ldHJ5LFxuICBTcGhlcmVHZW9tZXRyeSxcbiAgTWVzaFxufSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2ljU3BoZXJlIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHNpemUgPSA1LFxuICAgIG1hdGVyaWFsLFxuICAgIHBvc2l0aW9uLFxuICAgIHdpZHRoU2VnbWVudHMsXG4gICAgaGVpZ2h0U2VnbWVudHMsXG4gICAgY2FzdFNoYWRvdyxcbiAgICByZWNlaXZlU2hhZG93XG4gIH0pIHtcbiAgICB0aGlzLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGNvbnN0IGNvbG9yID0ge3I6MSAsZzoxLCBiOjF9O1xuICAgIHRoaXMuY29sb3IgPSBuZXcgQ29sb3IoKTtcbiAgICB0aGlzLmNvbG9yLnNldFJHQihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iKTtcblxuICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbCB8fCBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IHRoaXMuY29sb3JcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBTcGhlcmUgPSB0aGlzLm1hdGVyaWFsLmxlbmd0aCA+IDEgPyBTcGhlcmVCdWZmZXJHZW9tZXRyeSA6IFNwaGVyZUdlb21ldHJ5O1xuXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBTcGhlcmUoXG4gICAgICBzaXplLCBcbiAgICAgIHdpZHRoU2VnbWVudHMgfHwgNywgXG4gICAgICBoZWlnaHRTZWdtZW50cyB8fCA5KTtcbiAgICBcbiAgICBpZiAodGhpcy5tYXRlcmlhbC5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnkuY2xlYXJHcm91cHMoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0ZXJpYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hZGRHcm91cCggMCwgSW5maW5pdHksIGkgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1lc2ggPSBuZXcgTWVzaChcbiAgICAgIHRoaXMuZ2VvbWV0cnksXG4gICAgICB0aGlzLm1hdGVyaWFsXG4gICAgKTtcblxuICAgIHRoaXMubWVzaC5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcbiAgICB0aGlzLm1lc2gucmVjZWl2ZVNoYWRvdyA9IHJlY2VpdmVTaGFkb3c7XG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLnJvb3QgPSB0aGlzLm1lc2g7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCBMaWdodHMgZnJvbSAnLi4vTGlnaHRzL1R3b0RpcmVjdGlvbmFscyc7XG5pbXBvcnQgQmFzaWNTcGhlcmUgZnJvbSAnLi4vT2JqZWN0cy9CYXNpY1NwaGVyZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdE9wdGltaXplZCB7XG4gIGNvbnN0cnVjdG9yKHtzY2VuZSwgb25Mb2FkfSkge1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB0aGlzLnNldHVwQ2FtZXJhKCk7XG4gICAgdGhpcy5yb290ID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgdGhpcy5zZXR1cExpZ2h0cygpO1xuXG4gICAgdGhpcy5pbml0U2NlbmUoKTtcblxuICAgIGlmIChvbkxvYWQpIG9uTG9hZCgpO1xuICB9XG5cbiAgaW5pdFNjZW5lKCkge1xuICAgIGNvbnN0IHNwaGVyZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICAgIGZsYXRTaGFkaW5nOiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLnNwaGVyZSA9IG5ldyBCYXNpY1NwaGVyZSh7XG4gICAgICBzaXplOiA0LFxuICAgICAgbWF0ZXJpYWw6IHNwaGVyZU1hdGVyaWFsLFxuICAgICAgd2lkdGhTZWdtZW50czogNixcbiAgICAgIGhlaWdodFNlZ21lbnRzOiA0XG4gICAgfSk7XG5cbiAgICB0aGlzLnJvb3QuYWRkKHRoaXMuc3BoZXJlLnJvb3QpXG5cbiAgICB0aGlzLnN0YXJ0Q3Jhc3kodGhpcy5zcGhlcmUsIDAuNSwgNCk7XG4gIH1cblxuICBzdGFydENyYXN5KHRhcmdldCwgcmF0aW8sIGxpbWl0LCB0b3RhbEVsZW1lbnRzLCBjdXJyZW50RWxlbWVudCA9IDApIHtcbiAgICB0b3RhbEVsZW1lbnRzID0gdG90YWxFbGVtZW50cyB8fCB0YXJnZXQucm9vdC5nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGg7XG4gICAgaWYgKGN1cnJlbnRFbGVtZW50IDwgdG90YWxFbGVtZW50cykge1xuICAgICAgY29uc3Qgc3BoZXJlID0gbmV3IEJhc2ljU3BoZXJlKHtcbiAgICAgICAgc2l6ZTogdGFyZ2V0Lmdlb21ldHJ5LnBhcmFtZXRlcnMucmFkaXVzICogcmF0aW8sXG4gICAgICAgIG1hdGVyaWFsOiB0YXJnZXQubWF0ZXJpYWwsXG4gICAgICAgIHdpZHRoU2VnbWVudHM6IE1hdGgubWF4KCB0YXJnZXQuZ2VvbWV0cnkucGFyYW1ldGVycy53aWR0aFNlZ21lbnRzIC0gMSwgMSApLFxuICAgICAgICBoZWlnaHRTZWdtZW50czogTWF0aC5tYXgodGFyZ2V0Lmdlb21ldHJ5LnBhcmFtZXRlcnMuaGVpZ2h0U2VnbWVudHMgLSAxLCAxICksXG4gICAgICB9KTtcbiAgICAgIHRhcmdldC5yb290LmFkZChzcGhlcmUucm9vdCk7XG5cbiAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gdGFyZ2V0LnJvb3QuZ2VvbWV0cnkudmVydGljZXNbY3VycmVudEVsZW1lbnRdLmNsb25lKCk7XG4gICAgICBzcGhlcmUucm9vdC5wb3NpdGlvbi5jb3B5KG5ld1Bvc2l0aW9uKTtcbiAgICAgIFxuICAgICAgY29uc3QgYXhpcyA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDEsIDApO1xuICAgICAgc3BoZXJlLnJvb3QucXVhdGVybmlvbi5zZXRGcm9tVW5pdFZlY3RvcnMoXG4gICAgICAgIGF4aXMsIFxuICAgICAgICBuZXdQb3NpdGlvbi5zdWIodGFyZ2V0LnJvb3QucG9zaXRpb24pLmNsb25lKCkubm9ybWFsaXplKClcbiAgICAgICk7XG5cbiAgICAgIGN1cnJlbnRFbGVtZW50Kys7XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5zdGFydENyYXN5KHRhcmdldCwgcmF0aW8sIGxpbWl0LCB0b3RhbEVsZW1lbnRzLCBjdXJyZW50RWxlbWVudCk7XG4gICAgICAgIGxpbWl0LS07XG4gICAgICAgIGlmIChsaW1pdCA+IDApIHtcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5zdGFydENyYXN5KHNwaGVyZSwgcmF0aW8sIGxpbWl0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2V0dXBMaWdodHMoKSB7XG4gICAgY29uc3QgbGlnaHRzID0gbmV3IExpZ2h0cyh7XG4gICAgICBpbnRlbnNpdHk6IDEuOCxcbiAgICAgIGNhc3RTaGFkb3c6IHRydWUsXG4gICAgICBiaWFzOiAwLjAwMDAyLFxuICAgICAgcHJvamVjdGlvblNpZGVzOiA2LjUsXG4gICAgICBtYXBTaXplOiAxMDI0XG4gICAgfSk7XG4gICAgbGlnaHRzLnJvdGF0ZVkoTWF0aC5QSSk7XG4gICAgdGhpcy5yb290LmFkZChsaWdodHMpO1xuICB9XG5cbiAgc2V0dXBDYW1lcmEoKSB7XG4gICAgdGhpcy5zY2VuZS5jYW1lcmEucG9zaXRpb24uY29weShuZXcgVEhSRUUuVmVjdG9yMygwLCA0LjUsIDE4KSk7XG4gICAgdGhpcy5zY2VuZS5jYW1lcmEubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApKTtcbiAgfVxuXG5cbiAgdXBkYXRlKHRpbWVFbGFwc2VkLCBkZWx0YSkge1xuICAgIHRoaXMuc3BoZXJlLnJvb3Qucm90YXRlWShkZWx0YSAqIDAuNSk7XG4gICAgdGhpcy5zcGhlcmUucm9vdC5yb3RhdGVYKGRlbHRhICogMC4yKTtcbiAgfVxuXG59XG4iXSwic291cmNlUm9vdCI6IiJ9