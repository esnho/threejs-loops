(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{106:function(t,e,o){"use strict";o.d(e,"a",function(){return c});var r=o(104);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=i(this,a(e).call(this));var o=new r.HemisphereLight(16777215,16777215,3);return o.color.setHSL(Math.NormalizeHue(325),.1,.94),o.groundColor.setHSL(Math.NormalizeHue(325),.1,.64),o.position.set(0,2,0),t.add(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,r["Group"]),e}()},107:function(t,e,o){"use strict";o.d(e,"a",function(){return p});var r=o(104);o(106);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h={intensity:1,castShadow:!1,bias:0,projectionSides:void 0,mapSize:512},p=function(t){function e(){var t,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];o=s(this,(t=c(e)).call.apply(t,[this].concat(a)));var p=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),r.forEach(function(e){i(t,e,o[e])})}return t}({},h,a[0]),f=p.intensity,l=p.castShadow,y=p.bias,m=p.projectionSides,d=p.mapSize;o.intensity=f,o.projectionSides=m,o.mapSize=d,console.log("mapsize",o.mapSize);var w=new r.DirectionalLight("white",.65*o.intensity),b=new r.DirectionalLight("white",.55*o.intensity);return w.shadow.bias=y||0,b.shadow.bias=y||0,w.castShadow=l,b.castShadow=l,o.updateProjection(w,o.projectionSides),o.updateProjection(b,o.projectionSides),o.updateShadowMap(w,o.mapSize),o.updateShadowMap(b,o.mapSize),w.position.copy(new r.Vector3(9,3.5,0)),b.position.copy(new r.Vector3(-10,2,0)),o.add(w,b),o}var o,n,p;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,r["Group"]),o=e,(n=[{key:"updateProjection",value:function(t,e){t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.updateProjectionMatrix()}},{key:"updateShadowMap",value:function(t,e){t.shadow.mapSize.width=e,t.shadow.mapSize.height=e}}])&&a(o.prototype,n),p&&a(o,p),e}()},108:function(t,e,o){"use strict";o.d(e,"a",function(){return n});var r=o(104);var n=function t(e){var o=e.size,n=void 0===o?5:o,i=e.material,a=e.position,s=e.widthSegments,c=e.heightSegments,u=e.castShadow,h=e.receiveShadow;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.seed=Math.random();var p=1,f=1,l=1;this.color=new r.Color,this.color.setRGB(p,f,l),this.material=i||new r.MeshBasicMaterial({color:this.color});var y=this.material.length>1?r.SphereBufferGeometry:r.SphereGeometry;if(this.geometry=new y(n,s||7,c||9),this.material.length){this.geometry.clearGroups();for(var m=0;m<i.length;m++)this.geometry.addGroup(0,1/0,m)}this.mesh=new r.Mesh(this.geometry,this.material),this.mesh.castShadow=u,this.mesh.receiveShadow=h,a&&this.mesh.position.copy(a),this.root=this.mesh}},33:function(t,e,o){"use strict";o.r(e),o.d(e,"default",function(){return s});var r=o(104),n=o(107),i=o(108);function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){var o=e.scene,n=e.onLoad;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=o,this.setupCamera(),this.root=new r.Group,this.setupLights();var a=new r.MeshStandardMaterial({flatShading:!0});this.sphere=new i.a({size:5,material:a,widthSegments:5,heightSegments:4}),this.root.add(this.sphere.root),this.startCrasy(this.sphere,.4,3),n&&n()}var e,o,s;return e=t,(o=[{key:"startCrasy",value:function(t,e,o){o--;for(var n=0;n<t.root.geometry.vertices.length;n++){var a=new i.a({size:t.geometry.parameters.radius*e,material:t.material,widthSegments:t.geometry.parameters.widthSegments,heightSegments:t.geometry.parameters.heightSegments});t.root.add(a.root);var s=t.root.geometry.vertices[n].clone();a.root.position.copy(s);var c=new r.Vector3(0,1,0);a.root.quaternion.setFromUnitVectors(c,s.sub(t.root.position).clone().normalize()),o>0&&this.startCrasy(a,e,o)}}},{key:"setupLights",value:function(){var t=new n.a({intensity:1.8,castShadow:!0,bias:2e-5,projectionSides:6.5,mapSize:1024});t.rotateY(Math.PI),this.root.add(t)}},{key:"setupCamera",value:function(){this.scene.camera.position.copy(new r.Vector3(0,4.5,18)),this.scene.camera.lookAt(new r.Vector3(0,0,0))}},{key:"update",value:function(t,e){this.sphere.root.rotateY(.5*e),this.sphere.root.rotateX(.2*e)}}])&&a(e.prototype,o),s&&a(e,s),t}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1doaXRlSGVtaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1R3b0RpcmVjdGlvbmFscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY1NwaGVyZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTG9vcHMvTm90T3B0aW1pemVkLmpzIl0sIm5hbWVzIjpbIldoaXRlSGVtaSIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX2dldFByb3RvdHlwZU9mIiwiY2FsbCIsImhlbWlMaWdodCIsIkhlbWlzcGhlcmVMaWdodCIsImNvbG9yIiwic2V0SFNMIiwiTWF0aCIsIk5vcm1hbGl6ZUh1ZSIsImdyb3VuZENvbG9yIiwicG9zaXRpb24iLCJzZXQiLCJhZGQiLCJHcm91cCIsImRlZmF1bHRQYXJhbXMiLCJpbnRlbnNpdHkiLCJjYXN0U2hhZG93IiwiYmlhcyIsInByb2plY3Rpb25TaWRlcyIsInVuZGVmaW5lZCIsIm1hcFNpemUiLCJUd29EaXJlY3Rpb25hbHMiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJhcHBseSIsImNvbmNhdCIsIl9kZWZhdWx0UGFyYW1zJGFyZ3MkIiwiX29iamVjdFNwcmVhZCIsImNvbnNvbGUiLCJsb2ciLCJkaXJlY3Rpb25hbExpZ2h0IiwiRGlyZWN0aW9uYWxMaWdodCIsImRpcmVjdGlvbmFsTGlnaHQyIiwic2hhZG93IiwidXBkYXRlUHJvamVjdGlvbiIsInVwZGF0ZVNoYWRvd01hcCIsImNvcHkiLCJWZWN0b3IzIiwibGlnaHQiLCJjYW1lcmEiLCJsZWZ0IiwicmlnaHQiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4Iiwid2lkdGgiLCJoZWlnaHQiLCJCYXNpY1NwaGVyZSIsIl9yZWYiLCJfcmVmJHNpemUiLCJzaXplIiwibWF0ZXJpYWwiLCJ3aWR0aFNlZ21lbnRzIiwiaGVpZ2h0U2VnbWVudHMiLCJyZWNlaXZlU2hhZG93Iiwic2VlZCIsInJhbmRvbSIsIkNvbG9yIiwic2V0UkdCIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJTcGhlcmUiLCJTcGhlcmVCdWZmZXJHZW9tZXRyeSIsIlNwaGVyZUdlb21ldHJ5IiwiZ2VvbWV0cnkiLCJjbGVhckdyb3VwcyIsImkiLCJhZGRHcm91cCIsIkluZmluaXR5IiwibWVzaCIsIk1lc2giLCJyb290IiwiTm90T3B0aW1pemVkIiwic2NlbmUiLCJvbkxvYWQiLCJzZXR1cENhbWVyYSIsIlRIUkVFIiwic2V0dXBMaWdodHMiLCJzcGhlcmVNYXRlcmlhbCIsImZsYXRTaGFkaW5nIiwic3BoZXJlIiwic3RhcnRDcmFzeSIsInRhcmdldCIsInJhdGlvIiwibGltaXQiLCJ2ZXJ0aWNlcyIsInBhcmFtZXRlcnMiLCJyYWRpdXMiLCJuZXdQb3NpdGlvbiIsImNsb25lIiwiYXhpcyIsInF1YXRlcm5pb24iLCJzZXRGcm9tVW5pdFZlY3RvcnMiLCJzdWIiLCJub3JtYWxpemUiLCJsaWdodHMiLCJMaWdodHMiLCJyb3RhdGVZIiwiUEkiLCJsb29rQXQiLCJ0aW1lRWxhcHNlZCIsImRlbHRhIiwicm90YXRlWCJdLCJtYXBwaW5ncyI6IjR3QkFLcUJBLGNBQ25CLFNBQUFBLElBQWMsSUFBQUMsK0ZBQUFDLENBQUFDLEtBQUFILEdBQ1pDLEVBQUFHLEVBQUFELEtBQUFFLEVBQUFMLEdBQUFNLEtBQUFILE9BRUEsSUFBTUksRUFBWSxJQUFJQyxrQkFBaUIsU0FBVSxTQUFVLEdBSC9DLE9BSWRELEVBQVVFLE1BQU1DLE9BQ2ZDLEtBQUtDLGFBQWEsS0FDbEIsR0FDQSxLQUVETCxFQUFVTSxZQUFZSCxPQUNyQkMsS0FBS0MsYUFBYSxLQUNsQixHQUNBLEtBRURMLEVBQVVPLFNBQVNDLElBQUssRUFBRyxFQUFHLEdBQzlCZCxFQUFLZSxJQUFLVCxHQWZJTiw4T0FEdUJnQixzZ0NDRXZDLElBQU1D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LEVBQU9sQixTQUFTc0IsV0FBV2hDLGlCQUc3QzRCLEVBQU9YLEtBQUs3RCxJQUFJc0UsRUFBT1QsTUFDdkIsSUFBTWlCLEVBQWNOLEVBQU9YLEtBQUtQLFNBQVNxQixTQUFTbkIsR0FBR3VCLFFBQ3JEVCxFQUFPVCxLQUFLL0QsU0FBUytCLEtBQUtpRCxHQUUxQixJQUFNRSxFQUFPLElBQUlkLFVBQWMsRUFBRyxFQUFHLEdBRXJDSSxFQUFPVCxLQUFLb0IsV0FBV0MsbUJBQ3JCRixFQUNBRixFQUFZSyxJQUFJWCxFQUFPWCxLQUFLL0QsVUFBVWlGLFFBQVFLLGFBRzVDVixFQUFRLEdBQ1Z2RixLQUFLb0YsV0FBV0QsRUFBUUcsRUFBT0MsMENBTW5DLElBQU1XLEVBQVMsSUFBSUMsSUFBTyxDQUN4Qm5GLFVBQVcsSUFDWEMsWUFBWSxFQUNaQyxLQUFNLEtBQ05DLGdCQUFpQixJQUNqQkUsUUFBUyxPQUVYNkUsRUFBT0UsUUFBUTVGLEtBQUs2RixJQUNwQnJHLEtBQUswRSxLQUFLN0QsSUFBSXFGLHlDQUlkbEcsS0FBSzRFLE1BQU0vQixPQUFPbEMsU0FBUytCLEtBQUssSUFBSXFDLFVBQWMsRUFBRyxJQUFLLEtBQzFEL0UsS0FBSzRFLE1BQU0vQixPQUFPeUQsT0FBTyxJQUFJdkIsVUFBYyxFQUFHLEVBQUcsbUNBSTVDd0IsRUFBYUMsR0FDbEJ4RyxLQUFLbUYsT0FBT1QsS0FBSzBCLFFBQWdCLEdBQVJJLEdBQ3pCeEcsS0FBS21GLE9BQU9ULEtBQUsrQixRQUFnQixHQUFSRCIsImZpbGUiOiIuL2pzL05vdE9wdGltaXplZC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRHcm91cCxcblx0SGVtaXNwaGVyZUxpZ2h0XG59IGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2hpdGVIZW1pIGV4dGVuZHMgR3JvdXAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3QgaGVtaUxpZ2h0ID0gbmV3IEhlbWlzcGhlcmVMaWdodCggMHhmZmZmZmYsIDB4ZmZmZmZmLCAzLjAgKTtcblx0XHRoZW1pTGlnaHQuY29sb3Iuc2V0SFNMKFxuXHRcdFx0TWF0aC5Ob3JtYWxpemVIdWUoMzI1KSwgXG5cdFx0XHQwLjEsXG5cdFx0XHQwLjk0XG5cdFx0KTtcblx0XHRoZW1pTGlnaHQuZ3JvdW5kQ29sb3Iuc2V0SFNMKFxuXHRcdFx0TWF0aC5Ob3JtYWxpemVIdWUoMzI1KSwgXG5cdFx0XHQwLjEsIFxuXHRcdFx0MC42NFxuXHRcdCk7XG5cdFx0aGVtaUxpZ2h0LnBvc2l0aW9uLnNldCggMCwgMiwgMCApO1xuXHRcdHRoaXMuYWRkKCBoZW1pTGlnaHQgKTtcblx0fVxufVxuIiwiaW1wb3J0IHtcbiAgICBHcm91cCxcbiAgICBEaXJlY3Rpb25hbExpZ2h0LFxuICAgIFZlY3RvcjNcbiAgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgV2hpdGVIZW1pIGZyb20gJy4vV2hpdGVIZW1pLmpzJztcblxuY29uc3QgZGVmYXVsdFBhcmFtcyA9IHtcbiAgICBpbnRlbnNpdHk6IDEsXG4gICAgY2FzdFNoYWRvdzogZmFsc2UsXG4gICAgYmlhczogMCxcbiAgICBwcm9qZWN0aW9uU2lkZXM6IHVuZGVmaW5lZCxcbiAgICBtYXBTaXplOiA1MTIsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR3b0RpcmVjdGlvbmFscyBleHRlbmRzIEdyb3VwIHtcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xuXHRcdGNvbnN0IHtcbiAgICAgICAgICAgIGludGVuc2l0eSxcbiAgICAgICAgICAgIGNhc3RTaGFkb3csXG4gICAgICAgICAgICBiaWFzLFxuICAgICAgICAgICAgcHJvamVjdGlvblNpZGVzLFxuICAgICAgICAgICAgbWFwU2l6ZVxuICAgICAgICB9ID0ge1xuICAgICAgICAgICAgLi4uZGVmYXVsdFBhcmFtcyxcbiAgICAgICAgICAgIC4uLmFyZ3NbMF1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSBpbnRlbnNpdHk7XG4gICAgICAgIHRoaXMucHJvamVjdGlvblNpZGVzID0gcHJvamVjdGlvblNpZGVzO1xuICAgICAgICB0aGlzLm1hcFNpemUgPSBtYXBTaXplO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1hcHNpemVcIiwgdGhpcy5tYXBTaXplKVxuICAgICAgICBcbiAgICAgICAgLyogY29uc3Qgd2hpdGVFbWkgPSBuZXcgV2hpdGVIZW1pKCk7XG4gICAgICAgIHRoaXMuYWRkKHdoaXRlRW1pKTsgKi9cblxuICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoJ3doaXRlJywgMC42NSAqIHRoaXMuaW50ZW5zaXR5KTtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodDIgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCgnd2hpdGUnLCAwLjU1ICogdGhpcy5pbnRlbnNpdHkpO1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5iaWFzID0gYmlhcyB8fCAwO1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Mi5zaGFkb3cuYmlhcyA9IGJpYXMgfHwgMDtcbiAgICAgICAgXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuY2FzdFNoYWRvdyA9IGNhc3RTaGFkb3c7XG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQyLmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xuXG4gICAgICAgIHRoaXMudXBkYXRlUHJvamVjdGlvbihkaXJlY3Rpb25hbExpZ2h0LCB0aGlzLnByb2plY3Rpb25TaWRlcyk7XG4gICAgICAgIHRoaXMudXBkYXRlUHJvamVjdGlvbihkaXJlY3Rpb25hbExpZ2h0MiwgdGhpcy5wcm9qZWN0aW9uU2lkZXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYWRvd01hcChkaXJlY3Rpb25hbExpZ2h0LCB0aGlzLm1hcFNpemUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYWRvd01hcChkaXJlY3Rpb25hbExpZ2h0MiwgdGhpcy5tYXBTaXplKTtcblxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnBvc2l0aW9uLmNvcHkoXG4gICAgICAgICAgICBuZXcgVmVjdG9yMyhcbiAgICAgICAgICAgICAgICA5LFxuICAgICAgICAgICAgICAgIDMuNSxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodDIucG9zaXRpb24uY29weShcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKFxuICAgICAgICAgICAgICAgIC0xMCxcbiAgICAgICAgICAgICAgICAyLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmFkZChkaXJlY3Rpb25hbExpZ2h0LCBkaXJlY3Rpb25hbExpZ2h0Mik7XG4gICAgfVxuXG4gICAgdXBkYXRlUHJvamVjdGlvbihsaWdodCwgcHJvamVjdGlvblNpZGVzKSB7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEubGVmdCA9IC1wcm9qZWN0aW9uU2lkZXM7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEucmlnaHQgPSBwcm9qZWN0aW9uU2lkZXM7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNoYWRvd01hcChsaWdodCwgbWFwU2l6ZSkge1xuICAgICAgICBsaWdodC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IG1hcFNpemU7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IG1hcFNpemU7XG4gICAgfVxufSIsImltcG9ydCB7XG4gIENvbG9yLFxuICBNZXNoQmFzaWNNYXRlcmlhbCxcbiAgU3BoZXJlQnVmZmVyR2VvbWV0cnksXG4gIFNwaGVyZUdlb21ldHJ5LFxuICBNZXNoXG59IGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzaWNTcGhlcmUge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgc2l6ZSA9IDUsXG4gICAgbWF0ZXJpYWwsXG4gICAgcG9zaXRpb24sXG4gICAgd2lkdGhTZWdtZW50cyxcbiAgICBoZWlnaHRTZWdtZW50cyxcbiAgICBjYXN0U2hhZG93LFxuICAgIHJlY2VpdmVTaGFkb3dcbiAgfSkge1xuICAgIHRoaXMuc2VlZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgY29uc3QgY29sb3IgPSB7cjoxICxnOjEsIGI6MX07XG4gICAgdGhpcy5jb2xvciA9IG5ldyBDb2xvcigpO1xuICAgIHRoaXMuY29sb3Iuc2V0UkdCKGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIpO1xuXG4gICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsIHx8IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICBjb2xvcjogdGhpcy5jb2xvclxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IFNwaGVyZSA9IHRoaXMubWF0ZXJpYWwubGVuZ3RoID4gMSA/IFNwaGVyZUJ1ZmZlckdlb21ldHJ5IDogU3BoZXJlR2VvbWV0cnk7XG5cbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFNwaGVyZShcbiAgICAgIHNpemUsIFxuICAgICAgd2lkdGhTZWdtZW50cyB8fCA3LCBcbiAgICAgIGhlaWdodFNlZ21lbnRzIHx8IDkpO1xuICAgIFxuICAgIGlmICh0aGlzLm1hdGVyaWFsLmxlbmd0aCkge1xuICAgICAgdGhpcy5nZW9tZXRyeS5jbGVhckdyb3VwcygpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRlcmlhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmdlb21ldHJ5LmFkZEdyb3VwKCAwLCBJbmZpbml0eSwgaSApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWVzaCA9IG5ldyBNZXNoKFxuICAgICAgdGhpcy5nZW9tZXRyeSxcbiAgICAgIHRoaXMubWF0ZXJpYWxcbiAgICApO1xuXG4gICAgdGhpcy5tZXNoLmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xuICAgIHRoaXMubWVzaC5yZWNlaXZlU2hhZG93ID0gcmVjZWl2ZVNoYWRvdztcblxuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMucm9vdCA9IHRoaXMubWVzaDtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IExpZ2h0cyBmcm9tICcuLi9MaWdodHMvVHdvRGlyZWN0aW9uYWxzJztcbmltcG9ydCBCYXNpY1NwaGVyZSBmcm9tICcuLi9PYmplY3RzL0Jhc2ljU3BoZXJlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90T3B0aW1pemVkIHtcbiAgY29uc3RydWN0b3Ioe3NjZW5lLCBvbkxvYWR9KSB7XG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIHRoaXMuc2V0dXBDYW1lcmEoKTtcbiAgICB0aGlzLnJvb3QgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICB0aGlzLnNldHVwTGlnaHRzKCk7XG5cbiAgICBcbiAgICBjb25zdCBzcGhlcmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICBmbGF0U2hhZGluZzogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5zcGhlcmUgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgc2l6ZTogNSxcbiAgICAgIG1hdGVyaWFsOiBzcGhlcmVNYXRlcmlhbCxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDUsXG4gICAgICBoZWlnaHRTZWdtZW50czogNFxuICAgIH0pO1xuXG4gICAgdGhpcy5yb290LmFkZCh0aGlzLnNwaGVyZS5yb290KVxuXG4gICAgdGhpcy5zdGFydENyYXN5KHRoaXMuc3BoZXJlLCAwLjQsIDMpO1xuXG4gICAgaWYgKG9uTG9hZCkgb25Mb2FkKCk7XG4gIH1cblxuICBzdGFydENyYXN5KHRhcmdldCwgcmF0aW8sIGxpbWl0KSB7XG4gICAgbGltaXQtLTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldC5yb290Lmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7ICBcbiAgICAgIGNvbnN0IHNwaGVyZSA9IG5ldyBCYXNpY1NwaGVyZSh7XG4gICAgICAgIHNpemU6IHRhcmdldC5nZW9tZXRyeS5wYXJhbWV0ZXJzLnJhZGl1cyAqIHJhdGlvLFxuICAgICAgICBtYXRlcmlhbDogdGFyZ2V0Lm1hdGVyaWFsLFxuICAgICAgICB3aWR0aFNlZ21lbnRzOiB0YXJnZXQuZ2VvbWV0cnkucGFyYW1ldGVycy53aWR0aFNlZ21lbnRzLFxuICAgICAgICBoZWlnaHRTZWdtZW50czogdGFyZ2V0Lmdlb21ldHJ5LnBhcmFtZXRlcnMuaGVpZ2h0U2VnbWVudHMsXG4gICAgICB9KTtcblxuICAgICAgdGFyZ2V0LnJvb3QuYWRkKHNwaGVyZS5yb290KTtcbiAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gdGFyZ2V0LnJvb3QuZ2VvbWV0cnkudmVydGljZXNbaV0uY2xvbmUoKTtcbiAgICAgIHNwaGVyZS5yb290LnBvc2l0aW9uLmNvcHkobmV3UG9zaXRpb24pO1xuICAgICAgXG4gICAgICBjb25zdCBheGlzID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCk7XG4gICAgICBcbiAgICAgIHNwaGVyZS5yb290LnF1YXRlcm5pb24uc2V0RnJvbVVuaXRWZWN0b3JzKFxuICAgICAgICBheGlzLCBcbiAgICAgICAgbmV3UG9zaXRpb24uc3ViKHRhcmdldC5yb290LnBvc2l0aW9uKS5jbG9uZSgpLm5vcm1hbGl6ZSgpXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAobGltaXQgPiAwKSB7XG4gICAgICAgIHRoaXMuc3RhcnRDcmFzeShzcGhlcmUsIHJhdGlvLCBsaW1pdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0dXBMaWdodHMoKSB7XG4gICAgY29uc3QgbGlnaHRzID0gbmV3IExpZ2h0cyh7XG4gICAgICBpbnRlbnNpdHk6IDEuOCxcbiAgICAgIGNhc3RTaGFkb3c6IHRydWUsXG4gICAgICBiaWFzOiAwLjAwMDAyLFxuICAgICAgcHJvamVjdGlvblNpZGVzOiA2LjUsXG4gICAgICBtYXBTaXplOiAxMDI0XG4gICAgfSk7XG4gICAgbGlnaHRzLnJvdGF0ZVkoTWF0aC5QSSk7XG4gICAgdGhpcy5yb290LmFkZChsaWdodHMpO1xuICB9XG5cbiAgc2V0dXBDYW1lcmEoKSB7XG4gICAgdGhpcy5zY2VuZS5jYW1lcmEucG9zaXRpb24uY29weShuZXcgVEhSRUUuVmVjdG9yMygwLCA0LjUsIDE4KSk7XG4gICAgdGhpcy5zY2VuZS5jYW1lcmEubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApKTtcbiAgfVxuXG5cbiAgdXBkYXRlKHRpbWVFbGFwc2VkLCBkZWx0YSkge1xuICAgIHRoaXMuc3BoZXJlLnJvb3Qucm90YXRlWShkZWx0YSAqIDAuNSk7XG4gICAgdGhpcy5zcGhlcmUucm9vdC5yb3RhdGVYKGRlbHRhICogMC4yKTtcbiAgfVxuXG59XG4iXSwic291cmNlUm9vdCI6IiJ9