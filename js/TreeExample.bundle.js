(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{45:function(e,t,o){e.exports=o.p+"obj/Lowpoly_tree_sample.obj"},8:function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return c});var a=o(28),r=o(45),i=o.n(r),n=o(31),s=o(33),h=o(34);function d(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}h(a);var c=function(){function e(t){var o=t.scene,r=t.onLoad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=o,this.setupCamera(),o.renderer.shadowMap.enabled=!0,o.renderer.shadowMap.type=a.PCFShadowMap,this.root=new a.Group,this.loadTree(),this.setupLights();var i=new a.MeshStandardMaterial({emissive:6161169,flatShading:!0});i.emissive.setRGB(157/255,239/255,247/255),this.sphere=new s.a({size:6,material:i,widthSegments:20,heightSegments:10,receiveShadow:!0}),this.sphere.root.rotateX(Math.PI/180*26),console.log(this.sphere.root.geometry),this.root.add(this.sphere.root),r&&r()}var t,o,r;return t=e,(o=[{key:"loading",value:function(e){}},{key:"setupLights",value:function(){var e=new n.a({intensity:1.8,castShadow:!0,bias:2e-5,projectionSides:6.5,mapSize:1024});e.rotateY(Math.PI),this.root.add(e)}},{key:"setupCamera",value:function(){this.scene.camera.position.copy(new a.Vector3(0,4.5,18)),this.scene.camera.lookAt(new a.Vector3(0,0,0))}},{key:"loadTree",value:function(){var e=new a.OBJLoader;this.onHeadReady=this.onTreeReady.bind(this),this.onHeadLoading=this.onHeadLoading.bind(this),this.onTreeReady=this.onTreeReady.bind(this),e.load(i.a,this.onTreeReady,this.onHeadLoading,function(e){console.log("An error happened",e)})}},{key:"onHeadLoading",value:function(e){var t=e.loaded/e.total;console.log(100*t+"% loaded"),this.loading(Math.sin(t))}},{key:"onTreeReady",value:function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0});for(var t=0;t<this.sphere.root.geometry.vertices.length;t++)this.addTree(e,this.sphere.root.geometry.vertices[t],.1)}},{key:"addTree",value:function(e,t,o){var r=e.clone();r.position.copy(t),r.scale.copy(new a.Vector3(o,o,o));var i=new a.Vector3(0,1,0);r.quaternion.setFromUnitVectors(i,t.sub(this.sphere.root.position).clone().normalize()),r.children[0].material[0].color.setRGB(1,.6,0),r.children[0].material[1].color.setRGB(224/255,252/255,1),r.children[0].material[1].emissive.setRGB(224/255*.2,252/255*.2,.2),r.rotateY(360*Math.random()),this.sphere.root.add(r)}},{key:"update",value:function(e,t){var o=new a.Color;this.sphere.root.material.emissive.getHSL(o),o.s=.5*(Math.sin(e+.27*Math.PI)+1),o.l=.1*(Math.cos(e)+1),this.sphere.root.material.emissive.setHSL(o.h,o.s,o.l);for(var r=0;r<this.sphere.root.children.length;r+=1){var i=this.sphere.root.children[r].children[0],n=i.position;n.y=30*Math.sin(e+.05*r),i.position.copy(n)}this.sphere.root.rotateY(.35*t)}}])&&d(t.prototype,o),r&&d(t,r),e}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvb2JqL0xvd3BvbHlfdHJlZV9zYW1wbGUub2JqIiwid2VicGFjazovLy8uL3NyYy9qcy9Mb29wcy9UcmVlRXhhbXBsZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJPQkpMb2FkZXIiLCJUSFJFRSIsIlRyZWVFeGFtcGxlIiwiX3JlZiIsInNjZW5lIiwib25Mb2FkIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInNldHVwQ2FtZXJhIiwicmVuZGVyZXIiLCJzaGFkb3dNYXAiLCJlbmFibGVkIiwidHlwZSIsInJvb3QiLCJsb2FkVHJlZSIsInNldHVwTGlnaHRzIiwic3BoZXJlTWF0ZXJpYWwiLCJlbWlzc2l2ZSIsImZsYXRTaGFkaW5nIiwic2V0UkdCIiwic3BoZXJlIiwiQmFzaWNTcGhlcmUiLCJzaXplIiwibWF0ZXJpYWwiLCJ3aWR0aFNlZ21lbnRzIiwiaGVpZ2h0U2VnbWVudHMiLCJyZWNlaXZlU2hhZG93Iiwicm90YXRlWCIsIk1hdGgiLCJQSSIsImNvbnNvbGUiLCJsb2ciLCJnZW9tZXRyeSIsImFkZCIsInBlcmNlbnRhZ2UiLCJsaWdodHMiLCJMaWdodHMiLCJpbnRlbnNpdHkiLCJjYXN0U2hhZG93IiwiYmlhcyIsInByb2plY3Rpb25TaWRlcyIsIm1hcFNpemUiLCJyb3RhdGVZIiwiY2FtZXJhIiwicG9zaXRpb24iLCJjb3B5IiwibG9va0F0IiwibG9hZGVyIiwib25IZWFkUmVhZHkiLCJvblRyZWVSZWFkeSIsImJpbmQiLCJvbkhlYWRMb2FkaW5nIiwibG9hZCIsInRyZWUiLCJlcnJvciIsInhociIsImxvYWRpbmciLCJsb2FkZWQiLCJ0b3RhbCIsInNpbiIsIm9iamVjdCIsInRyYXZlcnNlIiwib2JqIiwiaSIsInZlcnRpY2VzIiwibGVuZ3RoIiwiYWRkVHJlZSIsIm5ld1Bvc2l0aW9uIiwic2NhbGUiLCJuZXdUcmVlIiwiY2xvbmUiLCJheGlzIiwicXVhdGVybmlvbiIsInNldEZyb21Vbml0VmVjdG9ycyIsInN1YiIsIm5vcm1hbGl6ZSIsImNoaWxkcmVuIiwiY29sb3IiLCJyYW5kb20iLCJ0aW1lRWxhcHNlZCIsImRlbHRhIiwibmV3Q29sb3IiLCJnZXRIU0wiLCJzIiwibCIsImNvcyIsInNldEhTTCIsImgiLCJjb250ZWdnaW8iLCJ5Il0sIm1hcHBpbmdzIjoiNkVBQUFBLEVBQUFDLFFBQWlCQyxFQUFBQyxFQUF1QixzVUNLeENDLEVBQVVDLE9BRVdDLGFBQ25CLFNBQUFBLEVBQUFDLEdBQTZCLElBQWhCQyxFQUFnQkQsRUFBaEJDLE1BQU9DLEVBQVNGLEVBQVRFLG9HQUFTQyxDQUFBQyxLQUFBTCxHQUMzQkssS0FBS0gsTUFBUUEsRUFDYkcsS0FBS0MsY0FFTEosRUFBTUssU0FBU0MsVUFBVUMsU0FBVSxFQUNuQ1AsRUFBTUssU0FBU0MsVUFBVUUsS0FBT1gsZUFFaENNLEtBQUtNLEtBQU8sSUFBSVosUUFFaEJNLEtBQUtPLFdBQ0xQLEtBQUtRLGNBRUwsSUFBTUMsRUFBaUIsSUFBSWYsdUJBQTJCLENBQ3BEZ0IsU0FBVSxRQUNWQyxhQUFhLElBR2ZGLEVBQWVDLFNBQVNFLE9BQU8sSUFBSSxJQUFLLElBQUksSUFBSyxJQUFJLEtBRXJEWixLQUFLYSxPQUFTLElBQUlDLElBQVksQ0FDNUJDLEtBQU0sRUFDTkMsU0FBVVAsRUFDVlEsY0FBZSxHQUNmQyxlQUFnQixHQUNoQkMsZUFBZSxJQUdqQm5CLEtBQUthLE9BQU9QLEtBQUtjLFFBQWNDLEtBQUtDLEdBQUssSUFBaEIsSUFFekJDLFFBQVFDLElBQUl4QixLQUFLYSxPQUFPUCxLQUFLbUIsVUFFN0J6QixLQUFLTSxLQUFLb0IsSUFBSTFCLEtBQUthLE9BQU9QLE1BRXRCUixHQUFRQSwyREFHTjZCLDBDQUtOLElBQU1DLEVBQVMsSUFBSUMsSUFBTyxDQUN4QkMsVUFBVyxJQUNYQyxZQUFZLEVBQ1pDLEtBQU0sS0FDTkMsZ0JBQWlCLElBQ2pCQyxRQUFTLE9BRVhOLEVBQU9PLFFBQVFkLEtBQUtD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Q29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJvYmovTG93cG9seV90cmVlX3NhbXBsZS5vYmpcIjsiLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgdHJlZSBmcm9tICcuLi8uLi9vYmovTG93cG9seV90cmVlX3NhbXBsZS5vYmonO1xuaW1wb3J0IExpZ2h0cyBmcm9tICcuLi9MaWdodHMvVHdvRGlyZWN0aW9uYWxzJztcbmltcG9ydCBCYXNpY1NwaGVyZSBmcm9tICcuLi9PYmplY3RzL0Jhc2ljU3BoZXJlJztcbmltcG9ydCAqIGFzIE9CSkxvYWRlciBmcm9tICd0aHJlZS1vYmotbG9hZGVyJztcbk9CSkxvYWRlcihUSFJFRSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyZWVFeGFtcGxlIHtcbiAgY29uc3RydWN0b3Ioe3NjZW5lLCBvbkxvYWR9KSB7XG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIHRoaXMuc2V0dXBDYW1lcmEoKTtcbiAgICBcbiAgICBzY2VuZS5yZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7XG4gICAgc2NlbmUucmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBUSFJFRS5QQ0ZTaGFkb3dNYXA7XG5cbiAgICB0aGlzLnJvb3QgPSBuZXcgVEhSRUUuR3JvdXAoKTtcblxuICAgIHRoaXMubG9hZFRyZWUoKTtcbiAgICB0aGlzLnNldHVwTGlnaHRzKCk7XG5cbiAgICBjb25zdCBzcGhlcmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICBlbWlzc2l2ZTogMHg1ZTAzMTEsXG4gICAgICBmbGF0U2hhZGluZzogdHJ1ZVxuICAgIH0pO1xuXG4gICAgc3BoZXJlTWF0ZXJpYWwuZW1pc3NpdmUuc2V0UkdCKDE1Ny8yNTUsIDIzOS8yNTUsIDI0Ny8yNTUpO1xuXG4gICAgdGhpcy5zcGhlcmUgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgc2l6ZTogNixcbiAgICAgIG1hdGVyaWFsOiBzcGhlcmVNYXRlcmlhbCxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDIwLFxuICAgICAgaGVpZ2h0U2VnbWVudHM6IDEwLFxuICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5zcGhlcmUucm9vdC5yb3RhdGVYKDI2ICogKE1hdGguUEkgLyAxODApKVxuXG4gICAgY29uc29sZS5sb2codGhpcy5zcGhlcmUucm9vdC5nZW9tZXRyeSlcblxuICAgIHRoaXMucm9vdC5hZGQodGhpcy5zcGhlcmUucm9vdCk7XG5cbiAgICBpZiAob25Mb2FkKSBvbkxvYWQoKTtcbiAgfVxuXG4gIGxvYWRpbmcocGVyY2VudGFnZSkgeyAgICBcbiAgICBcbiAgfVxuXG4gIHNldHVwTGlnaHRzKCkge1xuICAgIGNvbnN0IGxpZ2h0cyA9IG5ldyBMaWdodHMoe1xuICAgICAgaW50ZW5zaXR5OiAxLjgsXG4gICAgICBjYXN0U2hhZG93OiB0cnVlLFxuICAgICAgYmlhczogMC4wMDAwMixcbiAgICAgIHByb2plY3Rpb25TaWRlczogNi41LFxuICAgICAgbWFwU2l6ZTogMTAyNFxuICAgIH0pO1xuICAgIGxpZ2h0cy5yb3RhdGVZKE1hdGguUEkpO1xuICAgIHRoaXMucm9vdC5hZGQobGlnaHRzKTtcbiAgfVxuXG4gIHNldHVwQ2FtZXJhKCkge1xuICAgIHRoaXMuc2NlbmUuY2FtZXJhLnBvc2l0aW9uLmNvcHkobmV3IFRIUkVFLlZlY3RvcjMoMCwgNC41LCAxOCkpO1xuICAgIHRoaXMuc2NlbmUuY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKSk7XG4gIH1cblxuICBsb2FkVHJlZSgpIHtcbiAgICBjb25zdCBsb2FkZXIgPSBuZXcgVEhSRUUuT0JKTG9hZGVyKCk7XG4gICAgdGhpcy5vbkhlYWRSZWFkeSA9IHRoaXMub25UcmVlUmVhZHkuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uSGVhZExvYWRpbmcgPSB0aGlzLm9uSGVhZExvYWRpbmcuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVHJlZVJlYWR5ID0gdGhpcy5vblRyZWVSZWFkeS5iaW5kKHRoaXMpO1xuICAgIGxvYWRlci5sb2FkKFxuICAgICAgdHJlZSxcbiAgICAgIHRoaXMub25UcmVlUmVhZHksXG4gICAgICB0aGlzLm9uSGVhZExvYWRpbmcsXG4gICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FuIGVycm9yIGhhcHBlbmVkJywgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBvbkhlYWRMb2FkaW5nKHhocikge1xuICAgIGNvbnN0IGxvYWRpbmcgPSB4aHIubG9hZGVkIC8geGhyLnRvdGFsO1xuICAgIGNvbnNvbGUubG9nKChsb2FkaW5nICogMTAwKSArICclIGxvYWRlZCcpO1xuICAgIFxuICAgIHRoaXMubG9hZGluZyhNYXRoLnNpbihsb2FkaW5nKSk7XG4gIH1cblxuICBvblRyZWVSZWFkeShvYmplY3QpIHtcbiAgICBvYmplY3QudHJhdmVyc2UoKG9iaikgPT4ge1xuICAgICAgb2JqLmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgICAgb2JqLnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3BoZXJlLnJvb3QuZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoOyBpKyspIHsgICAgICBcbiAgICAgIHRoaXMuYWRkVHJlZShvYmplY3QsIHRoaXMuc3BoZXJlLnJvb3QuZ2VvbWV0cnkudmVydGljZXNbaV0sIDAuMSk7XG4gICAgfVxuICB9XG5cbiAgYWRkVHJlZShvYmplY3QsIG5ld1Bvc2l0aW9uLCBzY2FsZSkge1xuICAgIGNvbnN0IG5ld1RyZWUgPSBvYmplY3QuY2xvbmUoKTtcbiAgICAvLyBzZXQgcG9zaXRpb25cbiAgICBuZXdUcmVlLnBvc2l0aW9uLmNvcHkobmV3UG9zaXRpb24pO1xuICAgIC8vIHNjYWxlXG4gICAgbmV3VHJlZS5zY2FsZS5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoc2NhbGUsIHNjYWxlLCBzY2FsZSlcbiAgICApO1xuXG4gICAgY29uc3QgYXhpcyA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDEsIDApO1xuICAgIFxuICAgIG5ld1RyZWUucXVhdGVybmlvbi5zZXRGcm9tVW5pdFZlY3RvcnMoYXhpcywgXG4gICAgICBuZXdQb3NpdGlvbi5zdWIodGhpcy5zcGhlcmUucm9vdC5wb3NpdGlvbikuY2xvbmUoKS5ub3JtYWxpemUoKSk7XG5cbiAgICBuZXdUcmVlLmNoaWxkcmVuWzBdLm1hdGVyaWFsWzBdLmNvbG9yLnNldFJHQigxLCAwLjYsIDApO1xuICAgIG5ld1RyZWUuY2hpbGRyZW5bMF0ubWF0ZXJpYWxbMV0uY29sb3Iuc2V0UkdCKDIyNC8yNTUsIDI1Mi8yNTUsIDEpO1xuICAgIG5ld1RyZWUuY2hpbGRyZW5bMF0ubWF0ZXJpYWxbMV0uZW1pc3NpdmUuc2V0UkdCKDIyNC8yNTUqMC4yLCAyNTIvMjU1KjAuMiwgMSowLjIpO1xuICAgIG5ld1RyZWUucm90YXRlWShNYXRoLnJhbmRvbSgpICogMzYwKTtcbiAgICB0aGlzLnNwaGVyZS5yb290LmFkZChuZXdUcmVlKTtcbiAgfVxuXG4gIHVwZGF0ZSh0aW1lRWxhcHNlZCwgZGVsdGEpIHtcbiAgICBsZXQgbmV3Q29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKTtcbiAgICB0aGlzLnNwaGVyZS5yb290Lm1hdGVyaWFsLmVtaXNzaXZlLmdldEhTTChuZXdDb2xvcik7XG4gICAgbmV3Q29sb3IucyA9IChNYXRoLnNpbih0aW1lRWxhcHNlZCArIChNYXRoLlBJICogMC4yNykpICsgMSkgKiAwLjU7XG4gICAgbmV3Q29sb3IubCA9IChNYXRoLmNvcyh0aW1lRWxhcHNlZCkgKyAxKSAqIDAuMTtcbiAgICB0aGlzLnNwaGVyZS5yb290Lm1hdGVyaWFsLmVtaXNzaXZlLnNldEhTTChuZXdDb2xvci5oLCBuZXdDb2xvci5zLCBuZXdDb2xvci5sKTtcblxuICAgIGZvciAobGV0IGNvbnRlZ2dpbyA9IDA7IGNvbnRlZ2dpbyA8IHRoaXMuc3BoZXJlLnJvb3QuY2hpbGRyZW4ubGVuZ3RoOyBjb250ZWdnaW8gPSBjb250ZWdnaW8gKyAxKSB7XG4gICAgICBjb25zdCB0cmVlID0gdGhpcy5zcGhlcmUucm9vdC5jaGlsZHJlbltjb250ZWdnaW9dLmNoaWxkcmVuWzBdO1xuICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSB0cmVlLnBvc2l0aW9uO1xuICAgICAgbmV3UG9zaXRpb24ueSA9IE1hdGguc2luKHRpbWVFbGFwc2VkICsgKGNvbnRlZ2dpbyAqIDAuMDUpKSAqIDMwO1xuICAgICAgdHJlZS5wb3NpdGlvbi5jb3B5KG5ld1Bvc2l0aW9uKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zcGhlcmUucm9vdC5yb3RhdGVZKGRlbHRhICogMC4zNSk7XG4gIH1cblxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==