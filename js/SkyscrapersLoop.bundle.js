(window.webpackJsonp=window.webpackJsonp||[]).push([[5],[,,,,,function(t,e,o){"use strict";o.r(e);var n=o(14);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=i(this,a(e).call(this));var o=new n.i(16777215,16777215,3);return o.color.setHSL(Math.NormalizeHue(325),.1,.94),o.groundColor.setHSL(Math.NormalizeHue(325),.1,.64),o.position.set(0,2,0),t.add(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,n["h"]),e}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=h(this,l(e).call(this));var o=new c;t.add(o);var r=new n.f("white",.65),i=new n.f("white",.55);return r.position.copy(new n.t(9,3.5,0)),i.position.copy(new n.t(-10,2,0)),t.add(r,i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,n["h"]),e}(),d=o(15);var y=function t(e){var o=e.size,r=void 0===o?5:o,i=e.material,a=e.position,s=e.widthSegments,c=e.heightSegments;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.seed=Math.random();var u=1,h=1,l=1;this.color=new n.d,this.color.setRGB(u,h,l),this.material=i||new n.l({color:this.color});var f=i.length>1?n.r:n.s;if(this.geometry=new f(r,s||7,c||9),i.length){this.geometry.clearGroups();for(var p=0;p<i.length;p++)this.geometry.addGroup(0,1/0,p)}this.mesh=new n.k(this.geometry,this.material),a&&this.mesh.position.copy(a),this.root=this.mesh};function w(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}o.d(e,"default",function(){return m}),o(20);var m=function(){function t(e){var o=e.scene,r=e.onLoad;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=o,this.editScene(),this.root=new n.h;var i=new p;this.root.add(i),this.addSkyscrapers(),this.addSky(),this.addGround(),this.addWhereAreYou(),r&&r()}var e,o,r;return e=t,(o=[{key:"editScene",value:function(){var t=this.scene.camera.aspect,e=new n.d;e.setIntHSL(244,30,8),this.scene.renderer.setClearColor(e),this.scene.camera=new n.n(7*t/-2,7*t/2,3.5,-3.5,.1,150),this.scene.camera.position.copy(new n.t(10,10,10)),this.scene.camera.lookAt(new n.t(0,0,0))}},{key:"addSkyscrapers",value:function(){var t=new n.m({color:4276048,metalness:.3,roughness:.2}),e=new n.l({color:2301751}),o=new n.l({color:13421789});this.cubes=[];this.cubesParent=new n.h;for(var r=-5;r<5;r++)for(var i=-5;i<5;i++){for(var a=new d.a({size:1,material:t,position:new n.t(1.5*r+(Math.random()-.5),0,1.5*i)}),s=0;s<80;s++){var c=Math.random()>.5?.5:-.5;if(!(c<0)){var u=.8*Math.random()-.4,h=Math.random()*(Math.random()>.5?.4:-.4);u=.1*Math.round(10*u),h=.2*Math.round(5*h);var l=new d.a({size:.05,material:Math.random()>.1?e:o,position:new n.t(h,u,c)});a.root.add(l.root)}}a.root.scale.copy(new n.t(1,2,1)),this.cubesParent.add(a.root),this.cubes.push(a)}this.root.add(this.cubesParent)}},{key:"addSky",value:function(){var t=new n.m({color:328489,metalness:.1,roughness:.9,side:n.a}),e=new n.l({color:13421789,side:n.a,wireframe:!0}),o=new y({size:5,position:new n.t(-.5,1,0),material:t,heightSegments:72,widthSegments:128});o.root.scale.copy(new n.t(10,9.25,10)),this.root.add(o.root);for(var r=0;r<120;r++){var i=Math.random()*Math.PI*2,a=Math.random()*Math.PI*.6,s=new y({size:.018,material:e,position:new n.t(20*Math.sin(i),8*Math.cos(a),-10)});this.root.add(s.root)}}},{key:"addGround",value:function(){var t=new n.m({color:1250067,metalness:.7,roughness:.9,flatShading:!0}),e=new y({size:3,position:new n.t(0,-1,0),material:t});e.root.scale.copy(new n.t(5,.5,4)),this.root.add(e.root)}},{key:"addWhereAreYou",value:function(){this.whereAreYou=document.createElement("h1"),this.whereAreYou.innerHTML="where are you",this.whereAreYou.style.margin="auto",this.whereAreYou.style.marginTop="30vh",this.whereAreYou.style.verticalAlign="middle",this.whereAreYou.style.fontFamily="'VT323', monospace",this.whereAreYou.style.color="antiquewhite",this.whereAreYou.style.fontWeight="lighter",this.whereAreYou.style.cursor="default",this.whereAreYou.style.letterSpacing="0.2em",document.body.appendChild(this.whereAreYou)}},{key:"update",value:function(t){var e=.2*t;this.updateSkyscrapers(e),this.updateCamera(t)}},{key:"updateSkyscrapers",value:function(t){for(var e=0;e<this.cubesParent.children.length;e++){var o=this.cubesParent.children[e],n=o.position;n.y=Math.sin(e*Math.PI*.25+t),o.position.copy(n)}}},{key:"updateCamera",value:function(t){this.scene.camera.position.copy(new n.t(10*Math.cos(.12*t)+2,Math.cos(.2*t)+1,30)),this.scene.camera.lookAt(new n.t(0,2.5,6)),this.scene.camera.updateProjectionMatrix()}},{key:"onRemove",value:function(){document.body.removeChild(this.whereAreYou)}}])&&w(e.prototype,o),r&&w(e,r),t}()},,,,,,,,,,function(t,e,o){"use strict";o.d(e,"a",function(){return r});var n=o(14);var r=function t(e){var o=e.size,r=void 0===o?5:o,i=e.material,a=e.position;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.seed=Math.random();var s=1,c=1,u=1;this.color=new n.d,this.color.setRGB(s,c,u),this.material=i||new n.l({color:this.color}),this.geometry=new n.b(r,r,r),this.mesh=new n.k(this.geometry,this.material),a&&this.mesh.position.copy(a),this.root=this.mesh}},,,,,function(t,e,o){var n=o(21);"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};o(1)(n,r);n.locals&&(t.exports=n.locals)},function(t,e,o){e=t.exports=o(0)(!1);var n=o(22),r=n(o(23)),i=n(o(24));e.push([t.i,"/* vt323-400normal - latin */\n@font-face {\n  font-family: 'VT323';\n  font-style: normal;\n  font-display: swap;\n  font-weight: 400;\n  src:\n    local('VT323 Regular '),\n    local('VT323-Regular'),\n    url("+r+") format('woff2'), \n    url("+i+") format('woff'); /* Modern Browsers */\n}\n\n",""])},function(t,e,o){"use strict";t.exports=function(t,e){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)||e?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e,o){t.exports=o.p+"fonts/vt323-latin-400.woff2"},function(t,e,o){t.exports=o.p+"fonts/vt323-latin-400.woff"}]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1doaXRlSGVtaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1R3b0RpcmVjdGlvbmFscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY1NwaGVyZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTG9vcHMvU2t5c2NyYXBlcnNMb29wLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9PYmplY3RzL0Jhc2ljQ3ViZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdHlwZWZhY2UtdnQzMjMvaW5kZXguY3NzPzYxNjUiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3R5cGVmYWNlLXZ0MzIzL2luZGV4LmNzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvdXJsLWVzY2FwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdHlwZWZhY2UtdnQzMjMvZmlsZXMvdnQzMjMtbGF0aW4tNDAwLndvZmYyIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90eXBlZmFjZS12dDMyMy9maWxlcy92dDMyMy1sYXRpbi00MDAud29mZiJdLCJuYW1lcyI6WyJXaGl0ZUhlbWkiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9nZXRQcm90b3R5cGVPZiIsImNhbGwiLCJoZW1pTGlnaHQiLCJUSFJFRSIsImNvbG9yIiwic2V0SFNMIiwiTWF0aCIsIk5vcm1hbGl6ZUh1ZSIsImdyb3VuZENvbG9yIiwicG9zaXRpb24iLCJzZXQiLCJhZGQiLCJUd29EaXJlY3Rpb25hbHMiLCJUd29EaXJlY3Rpb25hbHNfY2xhc3NDYWxsQ2hlY2siLCJUd29EaXJlY3Rpb25hbHNfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlR3b0RpcmVjdGlvbmFsc19nZXRQcm90b3R5cGVPZiIsIndoaXRlRW1pIiwiZGlyZWN0aW9uYWxMaWdodCIsImRpcmVjdGlvbmFsTGlnaHQyIiwiY29weSIsIkJhc2ljU3BoZXJlIiwiX3JlZiIsIl9yZWYkc2l6ZSIsInNpemUiLCJtYXRlcmlhbCIsIndpZHRoU2VnbWVudHMiLCJoZWlnaHRTZWdtZW50cyIsIkJhc2ljU3BoZXJlX2NsYXNzQ2FsbENoZWNrIiwic2VlZCIsInJhbmRvbSIsInNldFJHQiIsIlNwaGVyZSIsImxlbmd0aCIsImdlb21ldHJ5IiwiY2xlYXJHcm91cHMiLCJpIiwiYWRkR3JvdXAiLCJJbmZpbml0eSIsIm1lc2giLCJyb290IiwicmVxdWlyZSIsIlNreXNjcmFwZXJzTG9vcCIsInNjZW5lIiwib25Mb2FkIiwiU2t5c2NyYXBlcnNMb29wX2NsYXNzQ2FsbENoZWNrIiwiZWRpdFNjZW5lIiwibGlnaHRzIiwiTGlnaHRzIiwiYWRkU2t5c2NyYXBlcnMiLCJhZGRTa3kiLCJhZGRHcm91bmQiLCJhZGRXaGVyZUFyZVlvdSIsImFzcGVjdCIsImNhbWVyYSIsImNsZWFyQ29sb3IiLCJzZXRJbnRIU0wiLCJyZW5kZXJlciIsInNldENsZWFyQ29sb3IiLCJmcnVzdHVtU2l6ZSIsImxvb2tBdCIsInNreVNjcmFwZXJNYXQiLCJtZXRhbG5lc3MiLCJyb3VnaG5lc3MiLCJ3aW5kb3dPZmZNYXQiLCJ3aW5kb3dPbk1hdCIsImN1YmVzIiwiY3ViZXNQYXJlbnQiLCJ4IiwieiIsIm5ld0N1YmUiLCJCYXNpY0N1YmUiLCJqIiwieE9mZnNldCIsInlPZmZzZXQiLCJ6T2Zmc2V0Iiwicm91bmQiLCJuZXdXaW5kb3ciLCJzY2FsZSIsInB1c2giLCJza3lNYXQiLCJzaWRlIiwic3RhcnNNYXQiLCJ3aXJlZnJhbWUiLCJza3kiLCJwaHkiLCJQSSIsInRoZXRhIiwibmV3U3RhciIsInNpbiIsImNvcyIsImdyb3VuZE1hdCIsImZsYXRTaGFkaW5nIiwiZ3JvdW5kIiwid2hlcmVBcmVZb3UiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJzdHlsZSIsIm1hcmdpbiIsIm1hcmdpblRvcCIsInZlcnRpY2FsQWxpZ24iLCJmb250RmFtaWx5IiwiZm9udFdlaWdodCIsImN1cnNvciIsImxldHRlclNwYWNpbmciLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJ0aW1lRWxhcHNlZCIsImFuaW1hdGlvblRpbWUiLCJ1cGRhdGVTa3lzY3JhcGVycyIsInVwZGF0ZUNhbWVyYSIsImNoaWxkcmVuIiwiY2hpbGQiLCJuZXdQb3MiLCJ5IiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsInJlbW92ZUNoaWxkIiwiY29udGVudCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGUiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsInVuZGVmaW5lZCIsImxvY2FscyIsImV4cG9ydHMiLCJ1cmxFc2NhcGUiLCJfX19DU1NfTE9BREVSX1VSTF9fXzBfX18iLCJfX19DU1NfTE9BREVSX1VSTF9fXzFfX18iLCJ1cmwiLCJuZWVkUXVvdGVzIiwidGVzdCIsInNsaWNlIiwicmVwbGFjZSIsInAiXSwibWFwcGluZ3MiOiJtdkJBRXFCQSxjQUNuQixTQUFBQSxJQUFjLElBQUFDLCtGQUFBQyxDQUFBQyxLQUFBSCxHQUNaQyxFQUFBRyxFQUFBRCxLQUFBRSxFQUFBTCxHQUFBTSxLQUFBSCxPQUVBLElBQU1JLEVBQVksSUFBSUMsSUFBdUIsU0FBVSxTQUFVLEdBSHJELE9BSWRELEVBQVVFLE1BQU1DLE9BQ2ZDLEtBQUtDLGFBQWEsS0FDbEIsR0FDQSxLQUVETCxFQUFVTSxZQUFZSCxPQUNyQkMsS0FBS0MsYUFBYSxLQUNsQixHQUNBLEtBRURMLEVBQVVPLFNBQVNDLElBQUssRUFBRyxFQUFHLEdBQzlCZCxFQUFLZSxJQUFLVCxHQWZJTiw4T0FEdUJPLGtwQkNDbEJTLGNBQ2pCLFNBQUFBLElBQWMsSUFBQWhCLCtGQUFBaUIsQ0FBQWYsS0FBQWMsR0FDVmhCLEVBQUFrQixFQUFBaEIsS0FBQWlCLEVBQUFILEdBQUFYLEtBQUFILE9BQ0EsSUFBTWtCLEVB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LEVBQUFpQixFQUF1QiIsImZpbGUiOiIuL2pzL1NreXNjcmFwZXJzTG9vcC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdoaXRlSGVtaSBleHRlbmRzIFRIUkVFLkdyb3VwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IGhlbWlMaWdodCA9IG5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQoIDB4ZmZmZmZmLCAweGZmZmZmZiwgMy4wICk7XG5cdFx0aGVtaUxpZ2h0LmNvbG9yLnNldEhTTChcblx0XHRcdE1hdGguTm9ybWFsaXplSHVlKDMyNSksIFxuXHRcdFx0MC4xLFxuXHRcdFx0MC45NFxuXHRcdCk7XG5cdFx0aGVtaUxpZ2h0Lmdyb3VuZENvbG9yLnNldEhTTChcblx0XHRcdE1hdGguTm9ybWFsaXplSHVlKDMyNSksIFxuXHRcdFx0MC4xLCBcblx0XHRcdDAuNjRcblx0XHQpO1xuXHRcdGhlbWlMaWdodC5wb3NpdGlvbi5zZXQoIDAsIDIsIDAgKTtcblx0XHR0aGlzLmFkZCggaGVtaUxpZ2h0ICk7XG5cdH1cbn1cbiIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCBXaGl0ZUhlbWkgZnJvbSAnLi9XaGl0ZUhlbWkuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUd29EaXJlY3Rpb25hbHMgZXh0ZW5kcyBUSFJFRS5Hcm91cCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGNvbnN0IHdoaXRlRW1pID0gbmV3IFdoaXRlSGVtaSgpO1xuICAgICAgICB0aGlzLmFkZCh3aGl0ZUVtaSk7XG5cbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KCd3aGl0ZScsIDAuNjUpO1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0MiA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KCd3aGl0ZScsIDAuNTUpO1xuXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQucG9zaXRpb24uY29weShcbiAgICAgICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKFxuICAgICAgICAgICAgICAgIDksXG4gICAgICAgICAgICAgICAgMy41LFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Mi5wb3NpdGlvbi5jb3B5KFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoXG4gICAgICAgICAgICAgICAgLTEwLFxuICAgICAgICAgICAgICAgIDIsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuYWRkKGRpcmVjdGlvbmFsTGlnaHQsIGRpcmVjdGlvbmFsTGlnaHQyKTtcbiAgICB9XG59IiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNpY1NwaGVyZSB7XG4gIGNvbnN0cnVjdG9yKHtzaXplID0gNSwgbWF0ZXJpYWwsIHBvc2l0aW9uLCB3aWR0aFNlZ21lbnRzLCBoZWlnaHRTZWdtZW50c30pIHtcbiAgICB0aGlzLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGNvbnN0IGNvbG9yID0ge3I6MSAsZzoxLCBiOjF9O1xuICAgIHRoaXMuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKTtcbiAgICB0aGlzLmNvbG9yLnNldFJHQihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iKTtcblxuICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbCB8fCBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IHRoaXMuY29sb3JcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBTcGhlcmUgPSBtYXRlcmlhbC5sZW5ndGggPiAxID8gVEhSRUUuU3BoZXJlQnVmZmVyR2VvbWV0cnkgOiBUSFJFRS5TcGhlcmVHZW9tZXRyeTtcblxuICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgU3BoZXJlKFxuICAgICAgc2l6ZSwgXG4gICAgICB3aWR0aFNlZ21lbnRzIHx8IDcsIFxuICAgICAgaGVpZ2h0U2VnbWVudHMgfHwgOSk7XG4gICAgXG4gICAgaWYgKG1hdGVyaWFsLmxlbmd0aCkge1xuICAgICAgdGhpcy5nZW9tZXRyeS5jbGVhckdyb3VwcygpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRlcmlhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmdlb21ldHJ5LmFkZEdyb3VwKCAwLCBJbmZpbml0eSwgaSApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWVzaCA9IG5ldyBUSFJFRS5NZXNoKFxuICAgICAgdGhpcy5nZW9tZXRyeSxcbiAgICAgIHRoaXMubWF0ZXJpYWxcbiAgICApO1xuXG4gICAgaWYgKHBvc2l0aW9uKSB7XG4gICAgICB0aGlzLm1lc2gucG9zaXRpb24uY29weShwb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5yb290ID0gdGhpcy5tZXNoO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgTGlnaHRzIGZyb20gJy4uL0xpZ2h0cy9Ud29EaXJlY3Rpb25hbHMuanMnO1xuaW1wb3J0IEJhc2ljQ3ViZSBmcm9tICcuLi9PYmplY3RzL0Jhc2ljQ3ViZS5qcyc7XG5pbXBvcnQgQmFzaWNTcGhlcmUgZnJvbSAnLi4vT2JqZWN0cy9CYXNpY1NwaGVyZS5qcyc7XG5yZXF1aXJlKCd0eXBlZmFjZS12dDMyMycpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTa3lzY3JhcGVyc0xvb3Age1xuICAgIGNvbnN0cnVjdG9yKHtzY2VuZSwgb25Mb2FkfSkge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG5cbiAgICAgICAgdGhpcy5lZGl0U2NlbmUoKTtcblxuICAgICAgICB0aGlzLnJvb3QgPSBuZXcgVEhSRUUuR3JvdXAoKTtcblxuICAgICAgICBjb25zdCBsaWdodHMgPSBuZXcgTGlnaHRzKCk7XG4gICAgICAgIHRoaXMucm9vdC5hZGQobGlnaHRzKTtcblxuICAgICAgICB0aGlzLmFkZFNreXNjcmFwZXJzKCk7XG5cbiAgICAgICAgdGhpcy5hZGRTa3koKTtcblxuICAgICAgICB0aGlzLmFkZEdyb3VuZCgpO1xuXG4gICAgICAgIHRoaXMuYWRkV2hlcmVBcmVZb3UoKTtcblxuICAgICAgICBpZiAob25Mb2FkKSBvbkxvYWQoKTtcbiAgICB9XG5cbiAgICBlZGl0U2NlbmUoKSB7XG4gICAgICAgIGNvbnN0IGZydXN0dW1TaXplID0gNztcbiAgICAgICAgY29uc3QgYXNwZWN0ID0gdGhpcy5zY2VuZS5jYW1lcmEuYXNwZWN0O1xuICAgICAgICBjb25zdCBjbGVhckNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7XG4gICAgICAgIGNsZWFyQ29sb3Iuc2V0SW50SFNMKDI0NCwgMzAsIDgpO1xuICAgICAgICB0aGlzLnNjZW5lLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoY2xlYXJDb2xvcik7XG4gICAgICAgIHRoaXMuc2NlbmUuY2FtZXJhID0gbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYShmcnVzdHVtU2l6ZSAqIGFzcGVjdCAvIC0yLCBmcnVzdHVtU2l6ZSAqIGFzcGVjdCAvIDIsIGZydXN0dW1TaXplIC8gMiwgZnJ1c3R1bVNpemUgLyAtMiwgMC4xLCAxNTApO1xuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS5wb3NpdGlvbi5jb3B5KG5ldyBUSFJFRS5WZWN0b3IzKDEwLCAxMCwgMTApKTtcbiAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApKTtcbiAgICB9XG5cbiAgICBhZGRTa3lzY3JhcGVycygpIHtcbiAgICAgICAgY29uc3Qgc2t5U2NyYXBlck1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogMHg0MTNmNTAsXG4gICAgICAgICAgICBtZXRhbG5lc3M6IDAuMyxcbiAgICAgICAgICAgIHJvdWdobmVzczogMC4yXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHdpbmRvd09mZk1hdCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogMHgyMzFmMzdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgd2luZG93T25NYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICAgICAgY29sb3I6IDB4Y2NjY2RkIC8vMHhiN2E1MWZcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jdWJlcyA9IFtdO1xuXG4gICAgICAgIGNvbnN0IGhhbGZDb3VudCA9IDU7XG5cbiAgICAgICAgdGhpcy5jdWJlc1BhcmVudCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgICAgICBmb3IgKGxldCB4ID0gLWhhbGZDb3VudDsgeCA8IGhhbGZDb3VudDsgeCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB6ID0gLWhhbGZDb3VudDsgeiA8IGhhbGZDb3VudDsgeisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q3ViZSA9IG5ldyBCYXNpY0N1YmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBza3lTY3JhcGVyTWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBUSFJFRS5WZWN0b3IzKHgqMS41ICsgKE1hdGgucmFuZG9tKCktMC41KSwgMCwgeioxLjUpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgODA7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB4T2Zmc2V0ID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IDAuNSA6IC0wLjU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4T2Zmc2V0IDwgMCkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCB5T2Zmc2V0ID0gKChNYXRoLnJhbmRvbSgpKSAqIDAuOCkgLSAwLjQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB6T2Zmc2V0ID0gTWF0aC5yYW5kb20oKSAqIChNYXRoLnJhbmRvbSgpID4gMC41ID8gMC40IDogLTAuNCk7XG4gICAgICAgICAgICAgICAgICAgIHlPZmZzZXQgPSBNYXRoLnJvdW5kKHlPZmZzZXQgKiAxMCkgKiAwLjE7XG4gICAgICAgICAgICAgICAgICAgIHpPZmZzZXQgPSBNYXRoLnJvdW5kKHpPZmZzZXQgKiA1KSAqIDAuMjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3V2luZG93ID0gbmV3IEJhc2ljQ3ViZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiAwLjA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IE1hdGgucmFuZG9tKCkgPiAwLjEgPyB3aW5kb3dPZmZNYXQgOiB3aW5kb3dPbk1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVEhSRUUuVmVjdG9yMyh6T2Zmc2V0LCB5T2Zmc2V0LCB4T2Zmc2V0KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBuZXdDdWJlLnJvb3QuYWRkKG5ld1dpbmRvdy5yb290KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3Q3ViZS5yb290LnNjYWxlLmNvcHkobmV3IFRIUkVFLlZlY3RvcjMoMSwyLDEpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1YmVzUGFyZW50LmFkZChuZXdDdWJlLnJvb3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3ViZXMucHVzaChuZXdDdWJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5yb290LmFkZCh0aGlzLmN1YmVzUGFyZW50KTtcbiAgICB9XG5cbiAgICBhZGRTa3koKSB7XG4gICAgICAgIGNvbnN0IHNreU1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogMHgwNTAzMjksXG4gICAgICAgICAgICBtZXRhbG5lc3M6IDAuMSxcbiAgICAgICAgICAgIHJvdWdobmVzczogMC45LFxuICAgICAgICAgICAgc2lkZTogVEhSRUUuQmFja1NpZGVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0YXJzTWF0ID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgICAgICAgIGNvbG9yOiAweGNjY2NkZCxcbiAgICAgICAgICAgIHNpZGU6IFRIUkVFLkJhY2tTaWRlLFxuICAgICAgICAgICAgd2lyZWZyYW1lOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBza3kgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgICAgICAgc2l6ZTogNSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVEhSRUUuVmVjdG9yMygtMC41LCAxLCAwKSxcbiAgICAgICAgICAgIG1hdGVyaWFsOiBza3lNYXQsXG4gICAgICAgICAgICBoZWlnaHRTZWdtZW50czogNzIsXG4gICAgICAgICAgICB3aWR0aFNlZ21lbnRzOiAxMjhcbiAgICAgICAgfSk7XG4gICAgICAgIHNreS5yb290LnNjYWxlLmNvcHkobmV3IFRIUkVFLlZlY3RvcjMoMTAsIDkuMjUsIDEwKSk7XG4gICAgICAgIHRoaXMucm9vdC5hZGQoc2t5LnJvb3QpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEyMDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwaHkgPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDI7XG4gICAgICAgICAgICBjb25zdCB0aGV0YSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMC42O1xuICAgICAgICAgICAgY29uc3QgbmV3U3RhciA9IG5ldyBCYXNpY1NwaGVyZSh7XG4gICAgICAgICAgICAgICAgc2l6ZTogMC4wMTgsXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHN0YXJzTWF0LFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVEhSRUUuVmVjdG9yMyhNYXRoLnNpbihwaHkpICogMjAsIE1hdGguY29zKHRoZXRhKSAqIDgsIC0xMClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yb290LmFkZChuZXdTdGFyLnJvb3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkR3JvdW5kKCkge1xuICAgICAgICBjb25zdCBncm91bmRNYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICAgICAgY29sb3I6IDB4MTMxMzEzLFxuICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjcsXG4gICAgICAgICAgICByb3VnaG5lc3M6IDAuOSxcbiAgICAgICAgICAgIGZsYXRTaGFkaW5nOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBncm91bmQgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgICAgICAgc2l6ZTogMyxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVEhSRUUuVmVjdG9yMygwLCAtMSwgMCksXG4gICAgICAgICAgICBtYXRlcmlhbDogZ3JvdW5kTWF0XG4gICAgICAgIH0pO1xuICAgICAgICBncm91bmQucm9vdC5zY2FsZS5jb3B5KG5ldyBUSFJFRS5WZWN0b3IzKDUsIDAuNSwgNCkpO1xuICAgICAgICB0aGlzLnJvb3QuYWRkKGdyb3VuZC5yb290KTtcbiAgICB9XG5cbiAgICBhZGRXaGVyZUFyZVlvdSgpIHtcbiAgICAgICAgdGhpcy53aGVyZUFyZVlvdSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gICAgICAgIHRoaXMud2hlcmVBcmVZb3UuaW5uZXJIVE1MID0gXCJ3aGVyZSBhcmUgeW91XCI7XG4gICAgICAgIHRoaXMud2hlcmVBcmVZb3Uuc3R5bGUubWFyZ2luID0gJ2F1dG8nO1xuICAgICAgICB0aGlzLndoZXJlQXJlWW91LnN0eWxlLm1hcmdpblRvcCA9ICczMHZoJztcbiAgICAgICAgdGhpcy53aGVyZUFyZVlvdS5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG4gICAgICAgIHRoaXMud2hlcmVBcmVZb3Uuc3R5bGUuZm9udEZhbWlseSA9IFwiJ1ZUMzIzJywgbW9ub3NwYWNlXCI7XG4gICAgICAgIHRoaXMud2hlcmVBcmVZb3Uuc3R5bGUuY29sb3IgPSAnYW50aXF1ZXdoaXRlJztcbiAgICAgICAgdGhpcy53aGVyZUFyZVlvdS5zdHlsZS5mb250V2VpZ2h0ID0gJ2xpZ2h0ZXInO1xuICAgICAgICB0aGlzLndoZXJlQXJlWW91LnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICAgICAgdGhpcy53aGVyZUFyZVlvdS5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gJzAuMmVtJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLndoZXJlQXJlWW91KTtcbiAgICB9XG4gICAgXG5cbiAgICB1cGRhdGUodGltZUVsYXBzZWQpIHtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uVGltZSA9IHRpbWVFbGFwc2VkICogMC4yO1xuICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZVNreXNjcmFwZXJzKGFuaW1hdGlvblRpbWUpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDYW1lcmEodGltZUVsYXBzZWQpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNreXNjcmFwZXJzKGFuaW1hdGlvblRpbWUpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1YmVzUGFyZW50LmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY3ViZXNQYXJlbnQuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBjb25zdCBuZXdQb3MgPSBjaGlsZC5wb3NpdGlvbjtcbiAgICAgICAgICAgIG5ld1Bvcy55ID0gTWF0aC5zaW4oKGkgKiBNYXRoLlBJICogMC4yNSkgKyBhbmltYXRpb25UaW1lKTtcbiAgICAgICAgICAgIGNoaWxkLnBvc2l0aW9uLmNvcHkobmV3UG9zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZUNhbWVyYSh0aW1lRWxhcHNlZCkge1xuICAgICAgICB0aGlzLnNjZW5lLmNhbWVyYS5wb3NpdGlvbi5jb3B5KFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoXG4gICAgICAgICAgICAgICAgTWF0aC5jb3ModGltZUVsYXBzZWQgKiAuMTIpICogMTAgKyAyLFxuICAgICAgICAgICAgICAgIE1hdGguY29zKHRpbWVFbGFwc2VkICogLjIpICsgMSxcbiAgICAgICAgICAgICAgICAzMClcbiAgICAgICAgICAgICk7XG4gICAgICAgIHRoaXMuc2NlbmUuY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAyLjUsIDYpKTtcbiAgICAgICAgdGhpcy5zY2VuZS5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH1cblxuICAgIG9uUmVtb3ZlKCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMud2hlcmVBcmVZb3UpO1xuICAgIH1cblxufSIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzaWNDdWJlIHtcbiAgY29uc3RydWN0b3Ioe3NpemUgPSA1LCBtYXRlcmlhbCwgcG9zaXRpb259KSB7XG4gICAgdGhpcy5zZWVkID0gTWF0aC5yYW5kb20oKTtcbiAgICBjb25zdCBjb2xvciA9IHtyOjEgLGc6MSwgYjoxfTtcbiAgICB0aGlzLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7XG4gICAgdGhpcy5jb2xvci5zZXRSR0IoY29sb3IuciwgY29sb3IuZywgY29sb3IuYik7XG5cbiAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWwgfHwgbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXG4gICAgfSk7XG5cbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHNpemUsIHNpemUsIHNpemUpO1xuXG4gICAgdGhpcy5tZXNoID0gbmV3IFRIUkVFLk1lc2goXG4gICAgICB0aGlzLmdlb21ldHJ5LFxuICAgICAgdGhpcy5tYXRlcmlhbFxuICAgICk7XG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLnJvb3QgPSB0aGlzLm1lc2g7XG4gIH1cbn1cbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaW5kZXguY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaW5kZXguY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKShmYWxzZSk7XG4vLyBJbXBvcnRzXG52YXIgdXJsRXNjYXBlID0gcmVxdWlyZShcIi4uL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3VybC1lc2NhcGUuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfX18wX19fID0gdXJsRXNjYXBlKHJlcXVpcmUoXCIuL2ZpbGVzL3Z0MzIzLWxhdGluLTQwMC53b2ZmMlwiKSk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfX18xX19fID0gdXJsRXNjYXBlKHJlcXVpcmUoXCIuL2ZpbGVzL3Z0MzIzLWxhdGluLTQwMC53b2ZmXCIpKTtcblxuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiB2dDMyMy00MDBub3JtYWwgLSBsYXRpbiAqL1xcbkBmb250LWZhY2Uge1xcbiAgZm9udC1mYW1pbHk6ICdWVDMyMyc7XFxuICBmb250LXN0eWxlOiBub3JtYWw7XFxuICBmb250LWRpc3BsYXk6IHN3YXA7XFxuICBmb250LXdlaWdodDogNDAwO1xcbiAgc3JjOlxcbiAgICBsb2NhbCgnVlQzMjMgUmVndWxhciAnKSxcXG4gICAgbG9jYWwoJ1ZUMzIzLVJlZ3VsYXInKSxcXG4gICAgdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfX18wX19fICsgXCIpIGZvcm1hdCgnd29mZjInKSwgXFxuICAgIHVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX19fMV9fXyArIFwiKSBmb3JtYXQoJ3dvZmYnKTsgLyogTW9kZXJuIEJyb3dzZXJzICovXFxufVxcblxcblwiLCBcIlwiXSk7XG5cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVzY2FwZSh1cmwsIG5lZWRRdW90ZXMpIHtcbiAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfSAvLyBJZiB1cmwgaXMgYWxyZWFkeSB3cmFwcGVkIGluIHF1b3RlcywgcmVtb3ZlIHRoZW1cblxuXG4gIGlmICgvXlsnXCJdLipbJ1wiXSQvLnRlc3QodXJsKSkge1xuICAgIHVybCA9IHVybC5zbGljZSgxLCAtMSk7XG4gIH0gLy8gU2hvdWxkIHVybCBiZSB3cmFwcGVkP1xuICAvLyBTZWUgaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy12YWx1ZXMtMy8jdXJsc1xuXG5cbiAgaWYgKC9bXCInKCkgXFx0XFxuXS8udGVzdCh1cmwpIHx8IG5lZWRRdW90ZXMpIHtcbiAgICByZXR1cm4gJ1wiJyArIHVybC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykucmVwbGFjZSgvXFxuL2csICdcXFxcbicpICsgJ1wiJztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImZvbnRzL3Z0MzIzLWxhdGluLTQwMC53b2ZmMlwiOyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImZvbnRzL3Z0MzIzLWxhdGluLTQwMC53b2ZmXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==