(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{31:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r(28);r(32);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c={intensity:1,castShadow:!1,bias:0,projectionSides:void 0,mapSize:512},l=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];r=s(this,(e=h(t)).call.apply(e,[this].concat(a)));var l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}({},c,a[0]),p=l.intensity,d=l.castShadow,f=l.bias,m=l.projectionSides,v=l.mapSize;r.intensity=p,r.projectionSides=m,r.mapSize=v,console.log("mapsize",r.mapSize);var b=new n.DirectionalLight("white",.65*r.intensity),g=new n.DirectionalLight("white",.55*r.intensity);return b.shadow.bias=f||0,g.shadow.bias=f||0,b.castShadow=d,g.castShadow=d,r.updateProjection(b,r.projectionSides),r.updateProjection(g,r.projectionSides),r.updateShadowMap(b,r.mapSize),r.updateShadowMap(g,r.mapSize),b.position.copy(new n.Vector3(9,3.5,0)),g.position.copy(new n.Vector3(-10,2,0)),r.add(b,g),r}var r,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n["Group"]),r=t,(i=[{key:"updateProjection",value:function(e,t){e.shadow.camera.left=-t,e.shadow.camera.right=t,e.shadow.camera.updateProjectionMatrix()}},{key:"updateShadowMap",value:function(e,t){e.shadow.mapSize.width=t,e.shadow.mapSize.height=t}}])&&a(r.prototype,i),l&&a(r,l),t}()},32:function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(28);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=o(this,a(t).call(this));var r=new n.HemisphereLight(16777215,16777215,3);return r.color.setHSL(Math.NormalizeHue(325),.1,.94),r.groundColor.setHSL(Math.NormalizeHue(325),.1,.64),r.position.set(0,2,0),e.add(r),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,n["Group"]),t}()},33:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(28);var i=function e(t){var r=t.size,i=void 0===r?5:r,o=t.material,a=t.position,s=t.widthSegments,h=t.heightSegments,u=t.castShadow,c=t.receiveShadow;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed=Math.random();var l=1,p=1,d=1;this.color=new n.Color,this.color.setRGB(l,p,d),this.material=o||new n.MeshBasicMaterial({color:this.color});var f=this.material.length>1?n.SphereBufferGeometry:n.SphereGeometry;if(this.geometry=new f(i,s||7,h||9),this.material.length){this.geometry.clearGroups();for(var m=0;m<o.length;m++)this.geometry.addGroup(0,1/0,m)}this.mesh=new n.Mesh(this.geometry,this.material),this.mesh.castShadow=u,this.mesh.receiveShadow=c,a&&this.mesh.position.copy(a),this.root=this.mesh}},34:function(e,t,r){"use strict";function n(e){throw new Error(e)}e.exports=function(e){e.OBJLoader=function(t){this.manager=void 0!==t?t:e.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}},e.OBJLoader.prototype={constructor:e.OBJLoader,load:function(t,r,i,o){var a=this;this.onError=o||n;var s=new e.FileLoader(a.manager);s.setPath(this.path),s.load(t,function(e){r(a.parse(e))},i,o)},setPath:function(e){this.path=e},setMaterials:function(e){this.materials=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var n=this.vertices,i=this.object.geometry.vertices;i.push(n[e+0]),i.push(n[e+1]),i.push(n[e+2]),i.push(n[t+0]),i.push(n[t+1]),i.push(n[t+2]),i.push(n[r+0]),i.push(n[r+1]),i.push(n[r+2])},addVertexLine:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0]),r.push(t[e+1]),r.push(t[e+2])},addNormal:function(e,t,r){var n=this.normals,i=this.object.geometry.normals;i.push(n[e+0]),i.push(n[e+1]),i.push(n[e+2]),i.push(n[t+0]),i.push(n[t+1]),i.push(n[t+2]),i.push(n[r+0]),i.push(n[r+1]),i.push(n[r+2])},addUV:function(e,t,r){var n=this.uvs,i=this.object.geometry.uvs;i.push(n[e+0]),i.push(n[e+1]),i.push(n[t+0]),i.push(n[t+1]),i.push(n[r+0]),i.push(n[r+1])},addUVLine:function(e){var t=this.uvs,r=this.object.geometry.uvs;r.push(t[e+0]),r.push(t[e+1])},addFace:function(e,t,r,n,i,o,a,s,h,u,c,l){var p,d=this.vertices.length,f=this.parseVertexIndex(e,d),m=this.parseVertexIndex(t,d),v=this.parseVertexIndex(r,d);if(void 0===n?this.addVertex(f,m,v):(p=this.parseVertexIndex(n,d),this.addVertex(f,m,p),this.addVertex(m,v,p)),void 0!==i){var b=this.uvs.length;f=this.parseUVIndex(i,b),m=this.parseUVIndex(o,b),v=this.parseUVIndex(a,b),void 0===n?this.addUV(f,m,v):(p=this.parseUVIndex(s,b),this.addUV(f,m,p),this.addUV(m,v,p))}if(void 0!==h){var g=this.normals.length;f=this.parseNormalIndex(h,g),m=h===u?f:this.parseNormalIndex(u,g),v=h===c?f:this.parseNormalIndex(c,g),void 0===n?this.addNormal(f,m,v):(p=this.parseNormalIndex(l,g),this.addNormal(f,m,p),this.addNormal(m,v,p))}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,n=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],r));var a=0;for(o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],n))}};return e.startObject("",!1),e},parse:function(t,r){void 0===r&&(r=!0),r&&console.time("OBJLoader");var n=this._createParserState();-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var i=t.split("\n"),o="",a="",s="",h=[],u="function"==typeof"".trimLeft,c=0,l=i.length;c<l;c++)if(o=i[c],0!==(o=u?o.trimLeft():o.trim()).length&&"#"!==(a=o.charAt(0)))if("v"===a)" "===(s=o.charAt(1))&&null!==(h=this.regexp.vertex_pattern.exec(o))?n.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])):"n"===s&&null!==(h=this.regexp.normal_pattern.exec(o))?n.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])):"t"===s&&null!==(h=this.regexp.uv_pattern.exec(o))?n.uvs.push(parseFloat(h[1]),parseFloat(h[2])):this.onError("Unexpected vertex/normal/uv line: '"+o+"'");else if("f"===a)null!==(h=this.regexp.face_vertex_uv_normal.exec(o))?n.addFace(h[1],h[4],h[7],h[10],h[2],h[5],h[8],h[11],h[3],h[6],h[9],h[12]):null!==(h=this.regexp.face_vertex_uv.exec(o))?n.addFace(h[1],h[3],h[5],h[7],h[2],h[4],h[6],h[8]):null!==(h=this.regexp.face_vertex_normal.exec(o))?n.addFace(h[1],h[3],h[5],h[7],void 0,void 0,void 0,void 0,h[2],h[4],h[6],h[8]):null!==(h=this.regexp.face_vertex.exec(o))?n.addFace(h[1],h[2],h[3],h[4]):this.onError("Unexpected face line: '"+o+"'");else if("l"===a){var p=o.substring(1).trim().split(" "),d=[],f=[];if(-1===o.indexOf("/"))d=p;else for(var m=0,v=p.length;m<v;m++){var b=p[m].split("/");""!==b[0]&&d.push(b[0]),""!==b[1]&&f.push(b[1])}n.addLineGeometry(d,f)}else if(null!==(h=this.regexp.object_pattern.exec(o))){var g=(" "+h[0].substr(1).trim()).substr(1);n.startObject(g)}else if(this.regexp.material_use_pattern.test(o))n.object.startMaterial(o.substring(7).trim(),n.materialLibraries);else if(this.regexp.material_library_pattern.test(o))n.materialLibraries.push(o.substring(7).trim());else if(null!==(h=this.regexp.smoothing_pattern.exec(o))){var y=h[1].trim().toLowerCase();n.object.smooth="1"===y||"on"===y,(z=n.object.currentMaterial())&&(z.smooth=n.object.smooth)}else{if("\0"===o)continue;this.onError("Unexpected line: '"+o+"'")}n.finalize();var w=new e.Group;w.materialLibraries=[].concat(n.materialLibraries);for(c=0,l=n.objects.length;c<l;c++){var x=n.objects[c],j=x.geometry,_=x.materials,S="Line"===j.type;if(0!==j.vertices.length){var O=new e.BufferGeometry;O.addAttribute("position",new e.BufferAttribute(new Float32Array(j.vertices),3)),j.normals.length>0?O.addAttribute("normal",new e.BufferAttribute(new Float32Array(j.normals),3)):O.computeVertexNormals(),j.uvs.length>0&&O.addAttribute("uv",new e.BufferAttribute(new Float32Array(j.uvs),2));for(var L,E=[],M=0,V=_.length;M<V;M++){var P=_[M],z=void 0;if(null!==this.materials&&(z=this.materials.create(P.name),S&&z&&!(z instanceof e.LineBasicMaterial))){var I=new e.LineBasicMaterial;I.copy(z),z=I}z||((z=S?new e.LineBasicMaterial:new e.MeshPhongMaterial).name=P.name),z.shading=P.smooth?e.SmoothShading:e.FlatShading,E.push(z)}if(E.length>1){for(M=0,V=_.length;M<V;M++){P=_[M];O.addGroup(P.groupStart,P.groupCount,M)}var F=new e.MultiMaterial(E);L=S?new e.LineSegments(O,F):new e.Mesh(O,F)}else L=S?new e.LineSegments(O,E[0]):new e.Mesh(O,E[0]);L.name=x.name,w.add(L)}}return r&&console.timeEnd("OBJLoader"),w}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1R3b0RpcmVjdGlvbmFscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1doaXRlSGVtaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY1NwaGVyZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGhyZWUtb2JqLWxvYWRlci9kaXN0L2luZGV4LmpzIl0sIm5hbWVzIjpbImRlZmF1bHRQYXJhbXMiLCJpbnRlbnNpdHkiLCJjYXN0U2hhZG93IiwiYmlhcyIsInByb2plY3Rpb25TaWRlcyIsInVuZGVmaW5lZCIsIm1hcFNpemUiLCJUd29EaXJlY3Rpb25hbHMiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9nZXRQcm90b3R5cGVPZiIsImNhbGwiLCJhcHBseSIsImNvbmNhdCIsIl9kZWZhdWx0UGFyYW1zJGFyZ3MkIiwiX29iamVjdFNwcmVhZCIsImNvbnNvbGUiLCJsb2ciLCJkaXJlY3Rpb25hbExpZ2h0IiwiRGlyZWN0aW9uYWxMaWdodCIsImRpcmVjdGlvbmFsTGlnaHQyIiwic2hhZG93IiwidXBkYXRlUHJvamVjdGlvbiIsInVwZGF0ZVNoYWRvd01hcCIsInBvc2l0aW9uIiwiY29weSIsIlZlY3RvcjMiLCJhZGQiLCJHcm91cCIsImxpZ2h0IiwiY2FtZXJhIiwibGVmdCIsInJpZ2h0IiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsIndpZHRoIiwiaGVpZ2h0IiwiV2hpdGVIZW1pIiwiaGVtaUxpZ2h0IiwiSGVtaXNwaGVyZUxpZ2h0IiwiY29sb3IiLCJzZXRIU0wiLCJNYXRoIiwiTm9ybWFsaXplSHVlIiwiZ3JvdW5kQ29sb3IiLCJzZXQiLCJCYXNpY1NwaGVyZSIsIl9yZWYiLCJfcmVmJHNpemUiLCJzaXplIiwibWF0ZXJpYWwiLCJ3aWR0aFNlZ21lbnRzIiwiaGVpZ2h0U2VnbWVudHMiLCJyZWNlaXZlU2hhZG93Iiwic2VlZCIsInJhbmRvbSIsIkNvbG9yIiwic2V0UkdCIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJTcGhlcmUiLCJTcGhlcmVCdWZmZXJHZW9tZXRyeSIsIlNwaGVyZUdlb21ldHJ5IiwiZ2VvbWV0cnkiLCJjbGVhckdyb3VwcyIsImkiLCJhZGRHcm91cCIsIkluZmluaXR5IiwibWVzaCIsIk1lc2giLCJyb290IiwiZGVmYXVsdE9uRXJyb3IiLCJlcnIiLCJFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJUSFJFRSIsIk9CSkxvYWRlciIsIm1hbmFnZXIiLCJEZWZhdWx0TG9hZGluZ01hbmFnZXIiLCJtYXRlcmlhbHMiLCJyZWdleHAiLCJ2ZXJ0ZXhfcGF0dGVybiIsIm5vcm1hbF9wYXR0ZXJuIiwidXZfcGF0dGVybiIsImZhY2VfdmVydGV4IiwiZmFjZV92ZXJ0ZXhfdXYiLCJmYWNlX3ZlcnRleF91dl9ub3JtYWwiLCJmYWNlX3ZlcnRleF9ub3JtYWwiLCJvYmplY3RfcGF0dGVybiIsInNtb290aGluZ19wYXR0ZXJuIiwibWF0ZXJpYWxfbGlicmFyeV9wYXR0ZXJuIiwibWF0ZXJpYWxfdXNlX3BhdHRlcm4iLCJwcm90b3R5cGUiLCJjb25zdHJ1Y3RvciIsImxvYWQiLCJ1cmwiLCJvbkxvYWQiLCJvblByb2dyZXNzIiwib25FcnJvciIsInNjb3BlIiwibG9hZGVyIiwiRmlsZUxvYWRlciIsInNldFBhdGgiLCJwYXRoIiwidGV4dCIsInBhcnNlIiwidmFsdWUiLCJzZXRNYXRlcmlhbHMiLCJfY3JlYXRlUGFyc2VyU3RhdGUiLCJzdGF0ZSIsIm9iamVjdHMiLCJvYmplY3QiLCJ2ZXJ0aWNlcyIsIm5vcm1hbHMiLCJ1dnMiLCJtYXRlcmlhbExpYnJhcmllcyIsInN0YXJ0T2JqZWN0IiwibmFtZSIsImZyb21EZWNsYXJhdGlvbiIsInByZXZpb3VzTWF0ZXJpYWwiLCJjdXJyZW50TWF0ZXJpYWwiLCJfZmluYWxpemUiLCJzbW9vdGgiLCJzdGFydE1hdGVyaWFsIiwibGlicmFyaWVzIiwicHJldmlvdXMiLCJpbmhlcml0ZWQiLCJncm91cENvdW50Iiwic3BsaWNlIiwiaW5kZXgiLCJtdGxsaWIiLCJpc0FycmF5IiwiZ3JvdXBTdGFydCIsImdyb3VwRW5kIiwiY2xvbmUiLCJjbG9uZWQiLCJiaW5kIiwicHVzaCIsImVuZCIsImxhc3RNdWx0aU1hdGVyaWFsIiwibWkiLCJkZWNsYXJlZCIsImZpbmFsaXplIiwicGFyc2VWZXJ0ZXhJbmRleCIsImxlbiIsInBhcnNlSW50IiwicGFyc2VOb3JtYWxJbmRleCIsInBhcnNlVVZJbmRleCIsImFkZFZlcnRleCIsImEiLCJiIiwiYyIsInNyYyIsImRzdCIsImFkZFZlcnRleExpbmUiLCJhZGROb3JtYWwiLCJhZGRVViIsImFkZFVWTGluZSIsImFkZEZhY2UiLCJkIiwidWEiLCJ1YiIsInVjIiwidWQiLCJuYSIsIm5iIiwibmMiLCJuZCIsImlkIiwidkxlbiIsImlhIiwiaWIiLCJpYyIsInV2TGVuIiwibkxlbiIsImFkZExpbmVHZW9tZXRyeSIsInR5cGUiLCJ2aSIsImwiLCJ1dmkiLCJkZWJ1ZyIsInRpbWUiLCJpbmRleE9mIiwicmVwbGFjZSIsImxpbmVzIiwic3BsaXQiLCJsaW5lIiwibGluZUZpcnN0Q2hhciIsImxpbmVTZWNvbmRDaGFyIiwicmVzdWx0IiwidHJpbUxlZnQiLCJ0cmltIiwiY2hhckF0IiwiZXhlYyIsInBhcnNlRmxvYXQiLCJsaW5lUGFydHMiLCJzdWJzdHJpbmciLCJsaW5lVmVydGljZXMiLCJsaW5lVVZzIiwibGkiLCJsbGVuIiwicGFydHMiLCJzdWJzdHIiLCJ0ZXN0IiwidG9Mb3dlckNhc2UiLCJjb250YWluZXIiLCJpc0xpbmUiLCJidWZmZXJnZW9tZXRyeSIsIkJ1ZmZlckdlb21ldHJ5IiwiYWRkQXR0cmlidXRlIiwiQnVmZmVyQXR0cmlidXRlIiwiRmxvYXQzMkFycmF5IiwiY29tcHV0ZVZlcnRleE5vcm1hbHMiLCJjcmVhdGVkTWF0ZXJpYWxzIiwibWlMZW4iLCJzb3VyY2VNYXRlcmlhbCIsImNyZWF0ZSIsIkxpbmVCYXNpY01hdGVyaWFsIiwibWF0ZXJpYWxMaW5lIiwiTWVzaFBob25nTWF0ZXJpYWwiLCJzaGFkaW5nIiwiU21vb3RoU2hhZGluZyIsIkZsYXRTaGFkaW5nIiwibXVsdGlNYXRlcmlhbCIsIk11bHRpTWF0ZXJpYWwiLCJMaW5lU2VnbWVudHMiLCJ0aW1lRW5kIl0sIm1hcHBpbmdzIjoiMGlDQU9BLElBQU1BLEVBQWdCLENBQ2xCQyxVQUFXLEVBQ1hDLFlBQVksRUFDWkMsS0FBTSxFQUNOQyxxQkFBaUJDLEVBQ2pCQyxRQUFTLEtBR1FDLGNBQ2pCLFNBQUFBLElBQXFCLElBQUFDLEVBQUFDLCtGQUFBQyxDQUFBQyxLQUFBSixHQUFBLFFBQUFLLEVBQUFDLFVBQUFDLE9BQU5DLEVBQU0sSUFBQUMsTUFBQUosR0FBQUssRUFBQSxFQUFBQSxFQUFBTCxFQUFBSyxJQUFORixFQUFNRSxHQUFBSixVQUFBSSxHQUNqQlIsRUFBQVMsRUFBQVAsTUFBQUgsRUFBQVcsRUFBQVosSUFBQWEsS0FBQUMsTUFBQWIsRUFBQSxDQUFBRyxNQUFBVyxPQUFTUCxLQURRLElBQUFRLG9VQUFBQyxDQUFBLEdBU1Z4QixFQUNBZSxFQUFLLElBUFJkLEVBSGFzQixFQUdidEIsVUFDQUMsRUFKYXFCLEVBSWJyQixXQUNBQyxFQUxhb0IsRUFLYnBCLEtBQ0FDLEVBTmFtQixFQU1ibkIsZ0JBQ0FFLEVBUGFpQixFQU9iakIsUUFLSkcsRUFBS1IsVUFBWUEsRUFDakJRLEVBQUtMLGdCQUFrQkEsRUFDdkJLLEVBQUtILFFBQVVBLEVBQ2ZtQixRQUFRQyxJQUFJLFVBQVdqQixFQUFLSCxTQUs1QixJQUFNcUIsRUFBbUIsSUFBSUMsbUJBQWlCLFFBQVMsSUFBT25CLEVBQUtSLFdBQzdENEIsRUFBb0IsSUFBSUQsbUJBQWlCLFFBQVMsSUFBT25CLEVBQUtSLFdBckJuRCxPQXNCakIwQixFQUFpQkcsT0FBTzNCLEtBQU9B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LEVBQUEsSUFBQW5JLEVBQUFzSixhQUFBbEIsRUFBQU0sRUFBQSxRQUFBMUksRUFBQVAsS0FBQTJJLEVBQUFNLEVBQUEsSUFHQWxKLEVBQUFrRCxLQUFBTixFQUFBTSxLQUVBd0YsRUFBQWpMLElBQUF1QyxJQU9BLE9BSkFpSCxHQUNBbkssUUFBQWlOLFFBQUEsYUFHQXJCIiwiZmlsZSI6Ii4vanMvT3BlbkhlYWR+VHJlZUV4YW1wbGUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBHcm91cCxcbiAgICBEaXJlY3Rpb25hbExpZ2h0LFxuICAgIFZlY3RvcjNcbiAgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgV2hpdGVIZW1pIGZyb20gJy4vV2hpdGVIZW1pLmpzJztcblxuY29uc3QgZGVmYXVsdFBhcmFtcyA9IHtcbiAgICBpbnRlbnNpdHk6IDEsXG4gICAgY2FzdFNoYWRvdzogZmFsc2UsXG4gICAgYmlhczogMCxcbiAgICBwcm9qZWN0aW9uU2lkZXM6IHVuZGVmaW5lZCxcbiAgICBtYXBTaXplOiA1MTIsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR3b0RpcmVjdGlvbmFscyBleHRlbmRzIEdyb3VwIHtcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xuXHRcdGNvbnN0IHtcbiAgICAgICAgICAgIGludGVuc2l0eSxcbiAgICAgICAgICAgIGNhc3RTaGFkb3csXG4gICAgICAgICAgICBiaWFzLFxuICAgICAgICAgICAgcHJvamVjdGlvblNpZGVzLFxuICAgICAgICAgICAgbWFwU2l6ZVxuICAgICAgICB9ID0ge1xuICAgICAgICAgICAgLi4uZGVmYXVsdFBhcmFtcyxcbiAgICAgICAgICAgIC4uLmFyZ3NbMF1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSBpbnRlbnNpdHk7XG4gICAgICAgIHRoaXMucHJvamVjdGlvblNpZGVzID0gcHJvamVjdGlvblNpZGVzO1xuICAgICAgICB0aGlzLm1hcFNpemUgPSBtYXBTaXplO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1hcHNpemVcIiwgdGhpcy5tYXBTaXplKVxuICAgICAgICBcbiAgICAgICAgLyogY29uc3Qgd2hpdGVFbWkgPSBuZXcgV2hpdGVIZW1pKCk7XG4gICAgICAgIHRoaXMuYWRkKHdoaXRlRW1pKTsgKi9cblxuICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoJ3doaXRlJywgMC42NSAqIHRoaXMuaW50ZW5zaXR5KTtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodDIgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCgnd2hpdGUnLCAwLjU1ICogdGhpcy5pbnRlbnNpdHkpO1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5iaWFzID0gYmlhcyB8fCAwO1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Mi5zaGFkb3cuYmlhcyA9IGJpYXMgfHwgMDtcbiAgICAgICAgXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuY2FzdFNoYWRvdyA9IGNhc3RTaGFkb3c7XG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQyLmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xuXG4gICAgICAgIHRoaXMudXBkYXRlUHJvamVjdGlvbihkaXJlY3Rpb25hbExpZ2h0LCB0aGlzLnByb2plY3Rpb25TaWRlcyk7XG4gICAgICAgIHRoaXMudXBkYXRlUHJvamVjdGlvbihkaXJlY3Rpb25hbExpZ2h0MiwgdGhpcy5wcm9qZWN0aW9uU2lkZXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYWRvd01hcChkaXJlY3Rpb25hbExpZ2h0LCB0aGlzLm1hcFNpemUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYWRvd01hcChkaXJlY3Rpb25hbExpZ2h0MiwgdGhpcy5tYXBTaXplKTtcblxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnBvc2l0aW9uLmNvcHkoXG4gICAgICAgICAgICBuZXcgVmVjdG9yMyhcbiAgICAgICAgICAgICAgICA5LFxuICAgICAgICAgICAgICAgIDMuNSxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodDIucG9zaXRpb24uY29weShcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKFxuICAgICAgICAgICAgICAgIC0xMCxcbiAgICAgICAgICAgICAgICAyLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmFkZChkaXJlY3Rpb25hbExpZ2h0LCBkaXJlY3Rpb25hbExpZ2h0Mik7XG4gICAgfVxuXG4gICAgdXBkYXRlUHJvamVjdGlvbihsaWdodCwgcHJvamVjdGlvblNpZGVzKSB7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEubGVmdCA9IC1wcm9qZWN0aW9uU2lkZXM7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEucmlnaHQgPSBwcm9qZWN0aW9uU2lkZXM7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNoYWRvd01hcChsaWdodCwgbWFwU2l6ZSkge1xuICAgICAgICBsaWdodC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IG1hcFNpemU7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IG1hcFNpemU7XG4gICAgfVxufSIsImltcG9ydCB7XG5cdEdyb3VwLFxuXHRIZW1pc3BoZXJlTGlnaHRcbn0gZnJvbSAndGhyZWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaGl0ZUhlbWkgZXh0ZW5kcyBHcm91cCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBjb25zdCBoZW1pTGlnaHQgPSBuZXcgSGVtaXNwaGVyZUxpZ2h0KCAweGZmZmZmZiwgMHhmZmZmZmYsIDMuMCApO1xuXHRcdGhlbWlMaWdodC5jb2xvci5zZXRIU0woXG5cdFx0XHRNYXRoLk5vcm1hbGl6ZUh1ZSgzMjUpLCBcblx0XHRcdDAuMSxcblx0XHRcdDAuOTRcblx0XHQpO1xuXHRcdGhlbWlMaWdodC5ncm91bmRDb2xvci5zZXRIU0woXG5cdFx0XHRNYXRoLk5vcm1hbGl6ZUh1ZSgzMjUpLCBcblx0XHRcdDAuMSwgXG5cdFx0XHQwLjY0XG5cdFx0KTtcblx0XHRoZW1pTGlnaHQucG9zaXRpb24uc2V0KCAwLCAyLCAwICk7XG5cdFx0dGhpcy5hZGQoIGhlbWlMaWdodCApO1xuXHR9XG59XG4iLCJpbXBvcnQge1xuICBDb2xvcixcbiAgTWVzaEJhc2ljTWF0ZXJpYWwsXG4gIFNwaGVyZUJ1ZmZlckdlb21ldHJ5LFxuICBTcGhlcmVHZW9tZXRyeSxcbiAgTWVzaFxufSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2ljU3BoZXJlIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHNpemUgPSA1LFxuICAgIG1hdGVyaWFsLFxuICAgIHBvc2l0aW9uLFxuICAgIHdpZHRoU2VnbWVudHMsXG4gICAgaGVpZ2h0U2VnbWVudHMsXG4gICAgY2FzdFNoYWRvdyxcbiAgICByZWNlaXZlU2hhZG93XG4gIH0pIHtcbiAgICB0aGlzLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGNvbnN0IGNvbG9yID0ge3I6MSAsZzoxLCBiOjF9O1xuICAgIHRoaXMuY29sb3IgPSBuZXcgQ29sb3IoKTtcbiAgICB0aGlzLmNvbG9yLnNldFJHQihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iKTtcblxuICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbCB8fCBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IHRoaXMuY29sb3JcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBTcGhlcmUgPSB0aGlzLm1hdGVyaWFsLmxlbmd0aCA+IDEgPyBTcGhlcmVCdWZmZXJHZW9tZXRyeSA6IFNwaGVyZUdlb21ldHJ5O1xuXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBTcGhlcmUoXG4gICAgICBzaXplLCBcbiAgICAgIHdpZHRoU2VnbWVudHMgfHwgNywgXG4gICAgICBoZWlnaHRTZWdtZW50cyB8fCA5KTtcbiAgICBcbiAgICBpZiAodGhpcy5tYXRlcmlhbC5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnkuY2xlYXJHcm91cHMoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0ZXJpYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hZGRHcm91cCggMCwgSW5maW5pdHksIGkgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1lc2ggPSBuZXcgTWVzaChcbiAgICAgIHRoaXMuZ2VvbWV0cnksXG4gICAgICB0aGlzLm1hdGVyaWFsXG4gICAgKTtcblxuICAgIHRoaXMubWVzaC5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcbiAgICB0aGlzLm1lc2gucmVjZWl2ZVNoYWRvdyA9IHJlY2VpdmVTaGFkb3c7XG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLnJvb3QgPSB0aGlzLm1lc2g7XG4gIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gZGVmYXVsdE9uRXJyb3IoZXJyKSB7XG4gIHRocm93IG5ldyBFcnJvcihlcnIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChUSFJFRSkge1xuXG4gIC8qKlxuICAgKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xuICAgKi9cblxuICBUSFJFRS5PQkpMb2FkZXIgPSBmdW5jdGlvbiAobWFuYWdlcikge1xuXG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlciAhPT0gdW5kZWZpbmVkID8gbWFuYWdlciA6IFRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjtcblxuICAgIHRoaXMubWF0ZXJpYWxzID0gbnVsbDtcblxuICAgIHRoaXMucmVnZXhwID0ge1xuICAgICAgLy8gdiBmbG9hdCBmbG9hdCBmbG9hdFxuICAgICAgdmVydGV4X3BhdHRlcm46IC9edlxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKS8sXG4gICAgICAvLyB2biBmbG9hdCBmbG9hdCBmbG9hdFxuICAgICAgbm9ybWFsX3BhdHRlcm46IC9edm5cXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKykvLFxuICAgICAgLy8gdnQgZmxvYXQgZmxvYXRcbiAgICAgIHV2X3BhdHRlcm46IC9ednRcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKS8sXG4gICAgICAvLyBmIHZlcnRleCB2ZXJ0ZXggdmVydGV4XG4gICAgICBmYWNlX3ZlcnRleDogL15mXFxzKygtP1xcZCspXFxzKygtP1xcZCspXFxzKygtP1xcZCspKD86XFxzKygtP1xcZCspKT8vLFxuICAgICAgLy8gZiB2ZXJ0ZXgvdXYgdmVydGV4L3V2IHZlcnRleC91dlxuICAgICAgZmFjZV92ZXJ0ZXhfdXY6IC9eZlxccysoLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKSg/OlxccysoLT9cXGQrKVxcLygtP1xcZCspKT8vLFxuICAgICAgLy8gZiB2ZXJ0ZXgvdXYvbm9ybWFsIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbFxuICAgICAgZmFjZV92ZXJ0ZXhfdXZfbm9ybWFsOiAvXmZcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspXFwvKC0/XFxkKykoPzpcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspKT8vLFxuICAgICAgLy8gZiB2ZXJ0ZXgvL25vcm1hbCB2ZXJ0ZXgvL25vcm1hbCB2ZXJ0ZXgvL25vcm1hbFxuICAgICAgZmFjZV92ZXJ0ZXhfbm9ybWFsOiAvXmZcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspXFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKykoPzpcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKSk/LyxcbiAgICAgIC8vIG8gb2JqZWN0X25hbWUgfCBnIGdyb3VwX25hbWVcbiAgICAgIG9iamVjdF9wYXR0ZXJuOiAvXltvZ11cXHMqKC4rKT8vLFxuICAgICAgLy8gcyBib29sZWFuXG4gICAgICBzbW9vdGhpbmdfcGF0dGVybjogL15zXFxzKyhcXGQrfG9ufG9mZikvLFxuICAgICAgLy8gbXRsbGliIGZpbGVfcmVmZXJlbmNlXG4gICAgICBtYXRlcmlhbF9saWJyYXJ5X3BhdHRlcm46IC9ebXRsbGliIC8sXG4gICAgICAvLyB1c2VtdGwgbWF0ZXJpYWxfbmFtZVxuICAgICAgbWF0ZXJpYWxfdXNlX3BhdHRlcm46IC9edXNlbXRsIC9cbiAgICB9O1xuICB9O1xuXG4gIFRIUkVFLk9CSkxvYWRlci5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogVEhSRUUuT0JKTG9hZGVyLFxuXG4gICAgbG9hZDogZnVuY3Rpb24gbG9hZCh1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvcikge1xuXG4gICAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgICAgdGhpcy5vbkVycm9yID0gb25FcnJvciB8fCBkZWZhdWx0T25FcnJvcjtcblxuICAgICAgdmFyIGxvYWRlciA9IG5ldyBUSFJFRS5GaWxlTG9hZGVyKHNjb3BlLm1hbmFnZXIpO1xuICAgICAgbG9hZGVyLnNldFBhdGgodGhpcy5wYXRoKTtcbiAgICAgIGxvYWRlci5sb2FkKHVybCwgZnVuY3Rpb24gKHRleHQpIHtcblxuICAgICAgICBvbkxvYWQoc2NvcGUucGFyc2UodGV4dCkpO1xuICAgICAgfSwgb25Qcm9ncmVzcywgb25FcnJvcik7XG4gICAgfSxcblxuICAgIHNldFBhdGg6IGZ1bmN0aW9uIHNldFBhdGgodmFsdWUpIHtcblxuICAgICAgdGhpcy5wYXRoID0gdmFsdWU7XG4gICAgfSxcblxuICAgIHNldE1hdGVyaWFsczogZnVuY3Rpb24gc2V0TWF0ZXJpYWxzKG1hdGVyaWFscykge1xuXG4gICAgICB0aGlzLm1hdGVyaWFscyA9IG1hdGVyaWFscztcbiAgICB9LFxuXG4gICAgX2NyZWF0ZVBhcnNlclN0YXRlOiBmdW5jdGlvbiBfY3JlYXRlUGFyc2VyU3RhdGUoKSB7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgb2JqZWN0czogW10sXG4gICAgICAgIG9iamVjdDoge30sXG5cbiAgICAgICAgdmVydGljZXM6IFtdLFxuICAgICAgICBub3JtYWxzOiBbXSxcbiAgICAgICAgdXZzOiBbXSxcblxuICAgICAgICBtYXRlcmlhbExpYnJhcmllczogW10sXG5cbiAgICAgICAgc3RhcnRPYmplY3Q6IGZ1bmN0aW9uIHN0YXJ0T2JqZWN0KG5hbWUsIGZyb21EZWNsYXJhdGlvbikge1xuXG4gICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgb2JqZWN0IChpbml0aWFsIGZyb20gcmVzZXQpIGlzIG5vdCBmcm9tIGEgZy9vIGRlY2xhcmF0aW9uIGluIHRoZSBwYXJzZWRcbiAgICAgICAgICAvLyBmaWxlLiBXZSBuZWVkIHRvIHVzZSBpdCBmb3IgdGhlIGZpcnN0IHBhcnNlZCBnL28gdG8ga2VlcCB0aGluZ3MgaW4gc3luYy5cbiAgICAgICAgICBpZiAodGhpcy5vYmplY3QgJiYgdGhpcy5vYmplY3QuZnJvbURlY2xhcmF0aW9uID09PSBmYWxzZSkge1xuXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5uYW1lID0gbmFtZTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmZyb21EZWNsYXJhdGlvbiA9IGZyb21EZWNsYXJhdGlvbiAhPT0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHByZXZpb3VzTWF0ZXJpYWwgPSB0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuY3VycmVudE1hdGVyaWFsID09PSAnZnVuY3Rpb24nID8gdGhpcy5vYmplY3QuY3VycmVudE1hdGVyaWFsKCkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAodGhpcy5vYmplY3QgJiYgdHlwZW9mIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5fZmluYWxpemUodHJ1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYmplY3QgPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lIHx8ICcnLFxuICAgICAgICAgICAgZnJvbURlY2xhcmF0aW9uOiBmcm9tRGVjbGFyYXRpb24gIT09IGZhbHNlLFxuXG4gICAgICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgICAgICB2ZXJ0aWNlczogW10sXG4gICAgICAgICAgICAgIG5vcm1hbHM6IFtdLFxuICAgICAgICAgICAgICB1dnM6IFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWF0ZXJpYWxzOiBbXSxcbiAgICAgICAgICAgIHNtb290aDogdHJ1ZSxcblxuICAgICAgICAgICAgc3RhcnRNYXRlcmlhbDogZnVuY3Rpb24gc3RhcnRNYXRlcmlhbChuYW1lLCBsaWJyYXJpZXMpIHtcblxuICAgICAgICAgICAgICB2YXIgcHJldmlvdXMgPSB0aGlzLl9maW5hbGl6ZShmYWxzZSk7XG5cbiAgICAgICAgICAgICAgLy8gTmV3IHVzZW10bCBkZWNsYXJhdGlvbiBvdmVyd3JpdGVzIGFuIGluaGVyaXRlZCBtYXRlcmlhbCwgZXhjZXB0IGlmIGZhY2VzIHdlcmUgZGVjbGFyZWRcbiAgICAgICAgICAgICAgLy8gYWZ0ZXIgdGhlIG1hdGVyaWFsLCB0aGVuIGl0IG11c3QgYmUgcHJlc2VydmVkIGZvciBwcm9wZXIgTXVsdGlNYXRlcmlhbCBjb250aW51YXRpb24uXG4gICAgICAgICAgICAgIGlmIChwcmV2aW91cyAmJiAocHJldmlvdXMuaW5oZXJpdGVkIHx8IHByZXZpb3VzLmdyb3VwQ291bnQgPD0gMCkpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLnNwbGljZShwcmV2aW91cy5pbmRleCwgMSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMubWF0ZXJpYWxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lIHx8ICcnLFxuICAgICAgICAgICAgICAgIG10bGxpYjogQXJyYXkuaXNBcnJheShsaWJyYXJpZXMpICYmIGxpYnJhcmllcy5sZW5ndGggPiAwID8gbGlicmFyaWVzW2xpYnJhcmllcy5sZW5ndGggLSAxXSA6ICcnLFxuICAgICAgICAgICAgICAgIHNtb290aDogcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IHByZXZpb3VzLnNtb290aCA6IHRoaXMuc21vb3RoLFxuICAgICAgICAgICAgICAgIGdyb3VwU3RhcnQ6IHByZXZpb3VzICE9PSB1bmRlZmluZWQgPyBwcmV2aW91cy5ncm91cEVuZCA6IDAsXG4gICAgICAgICAgICAgICAgZ3JvdXBFbmQ6IC0xLFxuICAgICAgICAgICAgICAgIGdyb3VwQ291bnQ6IC0xLFxuICAgICAgICAgICAgICAgIGluaGVyaXRlZDogZmFsc2UsXG5cbiAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24gY2xvbmUoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBjbG9uZWQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0eXBlb2YgaW5kZXggPT09ICdudW1iZXInID8gaW5kZXggOiB0aGlzLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG10bGxpYjogdGhpcy5tdGxsaWIsXG4gICAgICAgICAgICAgICAgICAgIHNtb290aDogdGhpcy5zbW9vdGgsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwU3RhcnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwRW5kOiAtMSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb3VudDogLTEsXG4gICAgICAgICAgICAgICAgICAgIGluaGVyaXRlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICBjbG9uZWQuY2xvbmUgPSB0aGlzLmNsb25lLmJpbmQoY2xvbmVkKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLnB1c2gobWF0ZXJpYWwpO1xuXG4gICAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGN1cnJlbnRNYXRlcmlhbDogZnVuY3Rpb24gY3VycmVudE1hdGVyaWFsKCkge1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzLm1hdGVyaWFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWxzW3RoaXMubWF0ZXJpYWxzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIF9maW5hbGl6ZTogZnVuY3Rpb24gX2ZpbmFsaXplKGVuZCkge1xuXG4gICAgICAgICAgICAgIHZhciBsYXN0TXVsdGlNYXRlcmlhbCA9IHRoaXMuY3VycmVudE1hdGVyaWFsKCk7XG4gICAgICAgICAgICAgIGlmIChsYXN0TXVsdGlNYXRlcmlhbCAmJiBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cEVuZCA9PT0gLTEpIHtcblxuICAgICAgICAgICAgICAgIGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwRW5kID0gdGhpcy5nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGggLyAzO1xuICAgICAgICAgICAgICAgIGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwQ291bnQgPSBsYXN0TXVsdGlNYXRlcmlhbC5ncm91cEVuZCAtIGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwU3RhcnQ7XG4gICAgICAgICAgICAgICAgbGFzdE11bHRpTWF0ZXJpYWwuaW5oZXJpdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBJZ25vcmUgb2JqZWN0cyB0YWlsIG1hdGVyaWFscyBpZiBubyBmYWNlIGRlY2xhcmF0aW9ucyBmb2xsb3dlZCB0aGVtIGJlZm9yZSBhIG5ldyBvL2cgc3RhcnRlZC5cbiAgICAgICAgICAgICAgaWYgKGVuZCAmJiB0aGlzLm1hdGVyaWFscy5sZW5ndGggPiAxKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBtaSA9IHRoaXMubWF0ZXJpYWxzLmxlbmd0aCAtIDE7IG1pID49IDA7IG1pLS0pIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hdGVyaWFsc1ttaV0uZ3JvdXBDb3VudCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLnNwbGljZShtaSwgMSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gR3VhcmFudGVlIGF0IGxlYXN0IG9uZSBlbXB0eSBtYXRlcmlhbCwgdGhpcyBtYWtlcyB0aGUgY3JlYXRpb24gbGF0ZXIgbW9yZSBzdHJhaWdodCBmb3J3YXJkLlxuICAgICAgICAgICAgICBpZiAoZW5kICYmIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCA9PT0gMCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICAgICAgICAgIHNtb290aDogdGhpcy5zbW9vdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBsYXN0TXVsdGlNYXRlcmlhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gSW5oZXJpdCBwcmV2aW91cyBvYmplY3RzIG1hdGVyaWFsLlxuICAgICAgICAgIC8vIFNwZWMgdGVsbHMgdXMgdGhhdCBhIGRlY2xhcmVkIG1hdGVyaWFsIG11c3QgYmUgc2V0IHRvIGFsbCBvYmplY3RzIHVudGlsIGEgbmV3IG1hdGVyaWFsIGlzIGRlY2xhcmVkLlxuICAgICAgICAgIC8vIElmIGEgdXNlbXRsIGRlY2xhcmF0aW9uIGlzIGVuY291bnRlcmVkIHdoaWxlIHRoaXMgbmV3IG9iamVjdCBpcyBiZWluZyBwYXJzZWQsIGl0IHdpbGxcbiAgICAgICAgICAvLyBvdmVyd3JpdGUgdGhlIGluaGVyaXRlZCBtYXRlcmlhbC4gRXhjZXB0aW9uIGJlaW5nIHRoYXQgdGhlcmUgd2FzIGFscmVhZHkgZmFjZSBkZWNsYXJhdGlvbnNcbiAgICAgICAgICAvLyB0byB0aGUgaW5oZXJpdGVkIG1hdGVyaWFsLCB0aGVuIGl0IHdpbGwgYmUgcHJlc2VydmVkIGZvciBwcm9wZXIgTXVsdGlNYXRlcmlhbCBjb250aW51YXRpb24uXG5cbiAgICAgICAgICBpZiAocHJldmlvdXNNYXRlcmlhbCAmJiBwcmV2aW91c01hdGVyaWFsLm5hbWUgJiYgdHlwZW9mIHByZXZpb3VzTWF0ZXJpYWwuY2xvbmUgPT09IFwiZnVuY3Rpb25cIikge1xuXG4gICAgICAgICAgICB2YXIgZGVjbGFyZWQgPSBwcmV2aW91c01hdGVyaWFsLmNsb25lKDApO1xuICAgICAgICAgICAgZGVjbGFyZWQuaW5oZXJpdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lm1hdGVyaWFscy5wdXNoKGRlY2xhcmVkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm9iamVjdHMucHVzaCh0aGlzLm9iamVjdCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZmluYWxpemU6IGZ1bmN0aW9uIGZpbmFsaXplKCkge1xuXG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0ICYmIHR5cGVvZiB0aGlzLm9iamVjdC5fZmluYWxpemUgPT09ICdmdW5jdGlvbicpIHtcblxuICAgICAgICAgICAgdGhpcy5vYmplY3QuX2ZpbmFsaXplKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBwYXJzZVZlcnRleEluZGV4OiBmdW5jdGlvbiBwYXJzZVZlcnRleEluZGV4KHZhbHVlLCBsZW4pIHtcblxuICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgcmV0dXJuIChpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAzKSAqIDM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFyc2VOb3JtYWxJbmRleDogZnVuY3Rpb24gcGFyc2VOb3JtYWxJbmRleCh2YWx1ZSwgbGVuKSB7XG5cbiAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgIHJldHVybiAoaW5kZXggPj0gMCA/IGluZGV4IC0gMSA6IGluZGV4ICsgbGVuIC8gMykgKiAzO1xuICAgICAgICB9LFxuXG4gICAgICAgIHBhcnNlVVZJbmRleDogZnVuY3Rpb24gcGFyc2VVVkluZGV4KHZhbHVlLCBsZW4pIHtcblxuICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgcmV0dXJuIChpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAyKSAqIDI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkVmVydGV4OiBmdW5jdGlvbiBhZGRWZXJ0ZXgoYSwgYiwgYykge1xuXG4gICAgICAgICAgdmFyIHNyYyA9IHRoaXMudmVydGljZXM7XG4gICAgICAgICAgdmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzO1xuXG4gICAgICAgICAgZHN0LnB1c2goc3JjW2EgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2EgKyAxXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2EgKyAyXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2IgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2IgKyAxXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2IgKyAyXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2MgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2MgKyAxXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2MgKyAyXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkVmVydGV4TGluZTogZnVuY3Rpb24gYWRkVmVydGV4TGluZShhKSB7XG5cbiAgICAgICAgICB2YXIgc3JjID0gdGhpcy52ZXJ0aWNlcztcbiAgICAgICAgICB2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXM7XG5cbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDJdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGROb3JtYWw6IGZ1bmN0aW9uIGFkZE5vcm1hbChhLCBiLCBjKSB7XG5cbiAgICAgICAgICB2YXIgc3JjID0gdGhpcy5ub3JtYWxzO1xuICAgICAgICAgIHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS5ub3JtYWxzO1xuXG4gICAgICAgICAgZHN0LnB1c2goc3JjW2EgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2EgKyAxXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2EgKyAyXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2IgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2IgKyAxXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2IgKyAyXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2MgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2MgKyAxXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2MgKyAyXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkVVY6IGZ1bmN0aW9uIGFkZFVWKGEsIGIsIGMpIHtcblxuICAgICAgICAgIHZhciBzcmMgPSB0aGlzLnV2cztcbiAgICAgICAgICB2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudXZzO1xuXG4gICAgICAgICAgZHN0LnB1c2goc3JjW2EgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2EgKyAxXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2IgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2IgKyAxXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2MgKyAwXSk7XG4gICAgICAgICAgZHN0LnB1c2goc3JjW2MgKyAxXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkVVZMaW5lOiBmdW5jdGlvbiBhZGRVVkxpbmUoYSkge1xuXG4gICAgICAgICAgdmFyIHNyYyA9IHRoaXMudXZzO1xuICAgICAgICAgIHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS51dnM7XG5cbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDFdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRGYWNlOiBmdW5jdGlvbiBhZGRGYWNlKGEsIGIsIGMsIGQsIHVhLCB1YiwgdWMsIHVkLCBuYSwgbmIsIG5jLCBuZCkge1xuXG4gICAgICAgICAgdmFyIHZMZW4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcblxuICAgICAgICAgIHZhciBpYSA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleChhLCB2TGVuKTtcbiAgICAgICAgICB2YXIgaWIgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoYiwgdkxlbik7XG4gICAgICAgICAgdmFyIGljID0gdGhpcy5wYXJzZVZlcnRleEluZGV4KGMsIHZMZW4pO1xuICAgICAgICAgIHZhciBpZDtcblxuICAgICAgICAgIGlmIChkID09PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgdGhpcy5hZGRWZXJ0ZXgoaWEsIGliLCBpYyk7XG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgaWQgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoZCwgdkxlbik7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkVmVydGV4KGlhLCBpYiwgaWQpO1xuICAgICAgICAgICAgdGhpcy5hZGRWZXJ0ZXgoaWIsIGljLCBpZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHVhICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgdmFyIHV2TGVuID0gdGhpcy51dnMubGVuZ3RoO1xuXG4gICAgICAgICAgICBpYSA9IHRoaXMucGFyc2VVVkluZGV4KHVhLCB1dkxlbik7XG4gICAgICAgICAgICBpYiA9IHRoaXMucGFyc2VVVkluZGV4KHViLCB1dkxlbik7XG4gICAgICAgICAgICBpYyA9IHRoaXMucGFyc2VVVkluZGV4KHVjLCB1dkxlbik7XG5cbiAgICAgICAgICAgIGlmIChkID09PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICB0aGlzLmFkZFVWKGlhLCBpYiwgaWMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICBpZCA9IHRoaXMucGFyc2VVVkluZGV4KHVkLCB1dkxlbik7XG5cbiAgICAgICAgICAgICAgdGhpcy5hZGRVVihpYSwgaWIsIGlkKTtcbiAgICAgICAgICAgICAgdGhpcy5hZGRVVihpYiwgaWMsIGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobmEgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAvLyBOb3JtYWxzIGFyZSBtYW55IHRpbWVzIHRoZSBzYW1lLiBJZiBzbywgc2tpcCBmdW5jdGlvbiBjYWxsIGFuZCBwYXJzZUludC5cbiAgICAgICAgICAgIHZhciBuTGVuID0gdGhpcy5ub3JtYWxzLmxlbmd0aDtcbiAgICAgICAgICAgIGlhID0gdGhpcy5wYXJzZU5vcm1hbEluZGV4KG5hLCBuTGVuKTtcblxuICAgICAgICAgICAgaWIgPSBuYSA9PT0gbmIgPyBpYSA6IHRoaXMucGFyc2VOb3JtYWxJbmRleChuYiwgbkxlbik7XG4gICAgICAgICAgICBpYyA9IG5hID09PSBuYyA/IGlhIDogdGhpcy5wYXJzZU5vcm1hbEluZGV4KG5jLCBuTGVuKTtcblxuICAgICAgICAgICAgaWYgKGQgPT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgIHRoaXMuYWRkTm9ybWFsKGlhLCBpYiwgaWMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICBpZCA9IHRoaXMucGFyc2VOb3JtYWxJbmRleChuZCwgbkxlbik7XG5cbiAgICAgICAgICAgICAgdGhpcy5hZGROb3JtYWwoaWEsIGliLCBpZCk7XG4gICAgICAgICAgICAgIHRoaXMuYWRkTm9ybWFsKGliLCBpYywgaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhZGRMaW5lR2VvbWV0cnk6IGZ1bmN0aW9uIGFkZExpbmVHZW9tZXRyeSh2ZXJ0aWNlcywgdXZzKSB7XG5cbiAgICAgICAgICB0aGlzLm9iamVjdC5nZW9tZXRyeS50eXBlID0gJ0xpbmUnO1xuXG4gICAgICAgICAgdmFyIHZMZW4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDtcbiAgICAgICAgICB2YXIgdXZMZW4gPSB0aGlzLnV2cy5sZW5ndGg7XG5cbiAgICAgICAgICBmb3IgKHZhciB2aSA9IDAsIGwgPSB2ZXJ0aWNlcy5sZW5ndGg7IHZpIDwgbDsgdmkrKykge1xuXG4gICAgICAgICAgICB0aGlzLmFkZFZlcnRleExpbmUodGhpcy5wYXJzZVZlcnRleEluZGV4KHZlcnRpY2VzW3ZpXSwgdkxlbikpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAodmFyIHV2aSA9IDAsIGwgPSB1dnMubGVuZ3RoOyB1dmkgPCBsOyB1dmkrKykge1xuXG4gICAgICAgICAgICB0aGlzLmFkZFVWTGluZSh0aGlzLnBhcnNlVVZJbmRleCh1dnNbdXZpXSwgdXZMZW4pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfTtcblxuICAgICAgc3RhdGUuc3RhcnRPYmplY3QoJycsIGZhbHNlKTtcblxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0sXG5cbiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2UodGV4dCwgZGVidWcpIHtcbiAgICAgIGlmICh0eXBlb2YgZGVidWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlYnVnID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIGNvbnNvbGUudGltZSgnT0JKTG9hZGVyJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuX2NyZWF0ZVBhcnNlclN0YXRlKCk7XG5cbiAgICAgIGlmICh0ZXh0LmluZGV4T2YoJ1xcclxcbicpICE9PSAtMSkge1xuXG4gICAgICAgIC8vIFRoaXMgaXMgZmFzdGVyIHRoYW4gU3RyaW5nLnNwbGl0IHdpdGggcmVnZXggdGhhdCBzcGxpdHMgb24gYm90aFxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGV4dC5pbmRleE9mKCdcXFxcXFxuJykgIT09IC0xKSB7XG5cbiAgICAgICAgLy8gam9pbiBsaW5lcyBzZXBhcmF0ZWQgYnkgYSBsaW5lIGNvbnRpbnVhdGlvbiBjaGFyYWN0ZXIgKFxcKVxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXFxcXFxuL2csICcnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJyk7XG4gICAgICB2YXIgbGluZSA9ICcnLFxuICAgICAgICAgIGxpbmVGaXJzdENoYXIgPSAnJyxcbiAgICAgICAgICBsaW5lU2Vjb25kQ2hhciA9ICcnO1xuICAgICAgdmFyIGxpbmVMZW5ndGggPSAwO1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgICAvLyBGYXN0ZXIgdG8ganVzdCB0cmltIGxlZnQgc2lkZSBvZiB0aGUgbGluZS4gVXNlIGlmIGF2YWlsYWJsZS5cbiAgICAgIHZhciB0cmltTGVmdCA9IHR5cGVvZiAnJy50cmltTGVmdCA9PT0gJ2Z1bmN0aW9uJztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaW5lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblxuICAgICAgICBsaW5lID0gbGluZXNbaV07XG5cbiAgICAgICAgbGluZSA9IHRyaW1MZWZ0ID8gbGluZS50cmltTGVmdCgpIDogbGluZS50cmltKCk7XG5cbiAgICAgICAgbGluZUxlbmd0aCA9IGxpbmUubGVuZ3RoO1xuXG4gICAgICAgIGlmIChsaW5lTGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICBsaW5lRmlyc3RDaGFyID0gbGluZS5jaGFyQXQoMCk7XG5cbiAgICAgICAgLy8gQHRvZG8gaW52b2tlIHBhc3NlZCBpbiBoYW5kbGVyIGlmIGFueVxuICAgICAgICBpZiAobGluZUZpcnN0Q2hhciA9PT0gJyMnKSBjb250aW51ZTtcblxuICAgICAgICBpZiAobGluZUZpcnN0Q2hhciA9PT0gJ3YnKSB7XG5cbiAgICAgICAgICBsaW5lU2Vjb25kQ2hhciA9IGxpbmUuY2hhckF0KDEpO1xuXG4gICAgICAgICAgaWYgKGxpbmVTZWNvbmRDaGFyID09PSAnICcgJiYgKHJlc3VsdCA9IHRoaXMucmVnZXhwLnZlcnRleF9wYXR0ZXJuLmV4ZWMobGluZSkpICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAxICAgICAgMiAgICAgIDNcbiAgICAgICAgICAgIC8vIFtcInYgMS4wIDIuMCAzLjBcIiwgXCIxLjBcIiwgXCIyLjBcIiwgXCIzLjBcIl1cblxuICAgICAgICAgICAgc3RhdGUudmVydGljZXMucHVzaChwYXJzZUZsb2F0KHJlc3VsdFsxXSksIHBhcnNlRmxvYXQocmVzdWx0WzJdKSwgcGFyc2VGbG9hdChyZXN1bHRbM10pKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVTZWNvbmRDaGFyID09PSAnbicgJiYgKHJlc3VsdCA9IHRoaXMucmVnZXhwLm5vcm1hbF9wYXR0ZXJuLmV4ZWMobGluZSkpICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAgMSAgICAgIDIgICAgICAzXG4gICAgICAgICAgICAvLyBbXCJ2biAxLjAgMi4wIDMuMFwiLCBcIjEuMFwiLCBcIjIuMFwiLCBcIjMuMFwiXVxuXG4gICAgICAgICAgICBzdGF0ZS5ub3JtYWxzLnB1c2gocGFyc2VGbG9hdChyZXN1bHRbMV0pLCBwYXJzZUZsb2F0KHJlc3VsdFsyXSksIHBhcnNlRmxvYXQocmVzdWx0WzNdKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChsaW5lU2Vjb25kQ2hhciA9PT0gJ3QnICYmIChyZXN1bHQgPSB0aGlzLnJlZ2V4cC51dl9wYXR0ZXJuLmV4ZWMobGluZSkpICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAxICAgICAgMlxuICAgICAgICAgICAgLy8gW1widnQgMC4xIDAuMlwiLCBcIjAuMVwiLCBcIjAuMlwiXVxuXG4gICAgICAgICAgICBzdGF0ZS51dnMucHVzaChwYXJzZUZsb2F0KHJlc3VsdFsxXSksIHBhcnNlRmxvYXQocmVzdWx0WzJdKSk7XG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgdGhpcy5vbkVycm9yKFwiVW5leHBlY3RlZCB2ZXJ0ZXgvbm9ybWFsL3V2IGxpbmU6ICdcIiArIGxpbmUgKyBcIidcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGxpbmVGaXJzdENoYXIgPT09IFwiZlwiKSB7XG5cbiAgICAgICAgICBpZiAoKHJlc3VsdCA9IHRoaXMucmVnZXhwLmZhY2VfdmVydGV4X3V2X25vcm1hbC5leGVjKGxpbmUpKSAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICAvLyBmIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbCB2ZXJ0ZXgvdXYvbm9ybWFsXG4gICAgICAgICAgICAvLyAwICAgICAgICAgICAgICAgICAgICAgICAgMSAgICAyICAgIDMgICAgNCAgICA1ICAgIDYgICAgNyAgICA4ICAgIDkgICAxMCAgICAgICAgIDExICAgICAgICAgMTJcbiAgICAgICAgICAgIC8vIFtcImYgMS8xLzEgMi8yLzIgMy8zLzNcIiwgXCIxXCIsIFwiMVwiLCBcIjFcIiwgXCIyXCIsIFwiMlwiLCBcIjJcIiwgXCIzXCIsIFwiM1wiLCBcIjNcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZF1cblxuICAgICAgICAgICAgc3RhdGUuYWRkRmFjZShyZXN1bHRbMV0sIHJlc3VsdFs0XSwgcmVzdWx0WzddLCByZXN1bHRbMTBdLCByZXN1bHRbMl0sIHJlc3VsdFs1XSwgcmVzdWx0WzhdLCByZXN1bHRbMTFdLCByZXN1bHRbM10sIHJlc3VsdFs2XSwgcmVzdWx0WzldLCByZXN1bHRbMTJdKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKChyZXN1bHQgPSB0aGlzLnJlZ2V4cC5mYWNlX3ZlcnRleF91di5leGVjKGxpbmUpKSAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICAvLyBmIHZlcnRleC91diB2ZXJ0ZXgvdXYgdmVydGV4L3V2XG4gICAgICAgICAgICAvLyAwICAgICAgICAgICAgICAgICAgMSAgICAyICAgIDMgICAgNCAgICA1ICAgIDYgICA3ICAgICAgICAgIDhcbiAgICAgICAgICAgIC8vIFtcImYgMS8xIDIvMiAzLzNcIiwgXCIxXCIsIFwiMVwiLCBcIjJcIiwgXCIyXCIsIFwiM1wiLCBcIjNcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG5cbiAgICAgICAgICAgIHN0YXRlLmFkZEZhY2UocmVzdWx0WzFdLCByZXN1bHRbM10sIHJlc3VsdFs1XSwgcmVzdWx0WzddLCByZXN1bHRbMl0sIHJlc3VsdFs0XSwgcmVzdWx0WzZdLCByZXN1bHRbOF0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoKHJlc3VsdCA9IHRoaXMucmVnZXhwLmZhY2VfdmVydGV4X25vcm1hbC5leGVjKGxpbmUpKSAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICAvLyBmIHZlcnRleC8vbm9ybWFsIHZlcnRleC8vbm9ybWFsIHZlcnRleC8vbm9ybWFsXG4gICAgICAgICAgICAvLyAwICAgICAgICAgICAgICAgICAgICAgMSAgICAyICAgIDMgICAgNCAgICA1ICAgIDYgICA3ICAgICAgICAgIDhcbiAgICAgICAgICAgIC8vIFtcImYgMS8vMSAyLy8yIDMvLzNcIiwgXCIxXCIsIFwiMVwiLCBcIjJcIiwgXCIyXCIsIFwiM1wiLCBcIjNcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdXG5cbiAgICAgICAgICAgIHN0YXRlLmFkZEZhY2UocmVzdWx0WzFdLCByZXN1bHRbM10sIHJlc3VsdFs1XSwgcmVzdWx0WzddLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHJlc3VsdFsyXSwgcmVzdWx0WzRdLCByZXN1bHRbNl0sIHJlc3VsdFs4XSk7XG4gICAgICAgICAgfSBlbHNlIGlmICgocmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXguZXhlYyhsaW5lKSkgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgLy8gZiB2ZXJ0ZXggdmVydGV4IHZlcnRleFxuICAgICAgICAgICAgLy8gMCAgICAgICAgICAgIDEgICAgMiAgICAzICAgNFxuICAgICAgICAgICAgLy8gW1wiZiAxIDIgM1wiLCBcIjFcIiwgXCIyXCIsIFwiM1wiLCB1bmRlZmluZWRdXG5cbiAgICAgICAgICAgIHN0YXRlLmFkZEZhY2UocmVzdWx0WzFdLCByZXN1bHRbMl0sIHJlc3VsdFszXSwgcmVzdWx0WzRdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoXCJVbmV4cGVjdGVkIGZhY2UgbGluZTogJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobGluZUZpcnN0Q2hhciA9PT0gXCJsXCIpIHtcblxuICAgICAgICAgIHZhciBsaW5lUGFydHMgPSBsaW5lLnN1YnN0cmluZygxKS50cmltKCkuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgIHZhciBsaW5lVmVydGljZXMgPSBbXSxcbiAgICAgICAgICAgICAgbGluZVVWcyA9IFtdO1xuXG4gICAgICAgICAgaWYgKGxpbmUuaW5kZXhPZihcIi9cIikgPT09IC0xKSB7XG5cbiAgICAgICAgICAgIGxpbmVWZXJ0aWNlcyA9IGxpbmVQYXJ0cztcbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBsaSA9IDAsIGxsZW4gPSBsaW5lUGFydHMubGVuZ3RoOyBsaSA8IGxsZW47IGxpKyspIHtcblxuICAgICAgICAgICAgICB2YXIgcGFydHMgPSBsaW5lUGFydHNbbGldLnNwbGl0KFwiL1wiKTtcblxuICAgICAgICAgICAgICBpZiAocGFydHNbMF0gIT09IFwiXCIpIGxpbmVWZXJ0aWNlcy5wdXNoKHBhcnRzWzBdKTtcbiAgICAgICAgICAgICAgaWYgKHBhcnRzWzFdICE9PSBcIlwiKSBsaW5lVVZzLnB1c2gocGFydHNbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzdGF0ZS5hZGRMaW5lR2VvbWV0cnkobGluZVZlcnRpY2VzLCBsaW5lVVZzKTtcbiAgICAgICAgfSBlbHNlIGlmICgocmVzdWx0ID0gdGhpcy5yZWdleHAub2JqZWN0X3BhdHRlcm4uZXhlYyhsaW5lKSkgIT09IG51bGwpIHtcblxuICAgICAgICAgIC8vIG8gb2JqZWN0X25hbWVcbiAgICAgICAgICAvLyBvclxuICAgICAgICAgIC8vIGcgZ3JvdXBfbmFtZVxuXG4gICAgICAgICAgLy8gV09SS0FST1VORDogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Mjg2OVxuICAgICAgICAgIC8vIHZhciBuYW1lID0gcmVzdWx0WyAwIF0uc3Vic3RyKCAxICkudHJpbSgpO1xuICAgICAgICAgIHZhciBuYW1lID0gKFwiIFwiICsgcmVzdWx0WzBdLnN1YnN0cigxKS50cmltKCkpLnN1YnN0cigxKTtcblxuICAgICAgICAgIHN0YXRlLnN0YXJ0T2JqZWN0KG5hbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVnZXhwLm1hdGVyaWFsX3VzZV9wYXR0ZXJuLnRlc3QobGluZSkpIHtcblxuICAgICAgICAgIC8vIG1hdGVyaWFsXG5cbiAgICAgICAgICBzdGF0ZS5vYmplY3Quc3RhcnRNYXRlcmlhbChsaW5lLnN1YnN0cmluZyg3KS50cmltKCksIHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlZ2V4cC5tYXRlcmlhbF9saWJyYXJ5X3BhdHRlcm4udGVzdChsaW5lKSkge1xuXG4gICAgICAgICAgLy8gbXRsIGZpbGVcblxuICAgICAgICAgIHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzLnB1c2gobGluZS5zdWJzdHJpbmcoNykudHJpbSgpKTtcbiAgICAgICAgfSBlbHNlIGlmICgocmVzdWx0ID0gdGhpcy5yZWdleHAuc21vb3RoaW5nX3BhdHRlcm4uZXhlYyhsaW5lKSkgIT09IG51bGwpIHtcblxuICAgICAgICAgIC8vIHNtb290aCBzaGFkaW5nXG5cbiAgICAgICAgICAvLyBAdG9kbyBIYW5kbGUgZmlsZXMgdGhhdCBoYXZlIHZhcnlpbmcgc21vb3RoIHZhbHVlcyBmb3IgYSBzZXQgb2YgZmFjZXMgaW5zaWRlIG9uZSBnZW9tZXRyeSxcbiAgICAgICAgICAvLyBidXQgZG9lcyBub3QgZGVmaW5lIGEgdXNlbXRsIGZvciBlYWNoIGZhY2Ugc2V0LlxuICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIGRldGVjdGVkIGFuZCBhIGR1bW15IG1hdGVyaWFsIGNyZWF0ZWQgKGxhdGVyIE11bHRpTWF0ZXJpYWwgYW5kIGdlb21ldHJ5IGdyb3VwcykuXG4gICAgICAgICAgLy8gVGhpcyByZXF1aXJlcyBzb21lIGNhcmUgdG8gbm90IGNyZWF0ZSBleHRyYSBtYXRlcmlhbCBvbiBlYWNoIHNtb290aCB2YWx1ZSBmb3IgXCJub3JtYWxcIiBvYmogZmlsZXMuXG4gICAgICAgICAgLy8gd2hlcmUgZXhwbGljaXQgdXNlbXRsIGRlZmluZXMgZ2VvbWV0cnkgZ3JvdXBzLlxuICAgICAgICAgIC8vIEV4YW1wbGUgYXNzZXQ6IGV4YW1wbGVzL21vZGVscy9vYmovY2VyYmVydXMvQ2VyYmVydXMub2JqXG5cbiAgICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHRbMV0udHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgc3RhdGUub2JqZWN0LnNtb290aCA9IHZhbHVlID09PSAnMScgfHwgdmFsdWUgPT09ICdvbic7XG5cbiAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBzdGF0ZS5vYmplY3QuY3VycmVudE1hdGVyaWFsKCk7XG4gICAgICAgICAgaWYgKG1hdGVyaWFsKSB7XG5cbiAgICAgICAgICAgIG1hdGVyaWFsLnNtb290aCA9IHN0YXRlLm9iamVjdC5zbW9vdGg7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgLy8gSGFuZGxlIG51bGwgdGVybWluYXRlZCBmaWxlcyB3aXRob3V0IGV4Y2VwdGlvblxuICAgICAgICAgIGlmIChsaW5lID09PSAnXFwwJykgY29udGludWU7XG5cbiAgICAgICAgICB0aGlzLm9uRXJyb3IoXCJVbmV4cGVjdGVkIGxpbmU6ICdcIiArIGxpbmUgKyBcIidcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3RhdGUuZmluYWxpemUoKTtcblxuICAgICAgdmFyIGNvbnRhaW5lciA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgICAgY29udGFpbmVyLm1hdGVyaWFsTGlicmFyaWVzID0gW10uY29uY2F0KHN0YXRlLm1hdGVyaWFsTGlicmFyaWVzKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdGF0ZS5vYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXG4gICAgICAgIHZhciBvYmplY3QgPSBzdGF0ZS5vYmplY3RzW2ldO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBvYmplY3QuZ2VvbWV0cnk7XG4gICAgICAgIHZhciBtYXRlcmlhbHMgPSBvYmplY3QubWF0ZXJpYWxzO1xuICAgICAgICB2YXIgaXNMaW5lID0gZ2VvbWV0cnkudHlwZSA9PT0gJ0xpbmUnO1xuXG4gICAgICAgIC8vIFNraXAgby9nIGxpbmUgZGVjbGFyYXRpb25zIHRoYXQgZGlkIG5vdCBmb2xsb3cgd2l0aCBhbnkgZmFjZXNcbiAgICAgICAgaWYgKGdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cbiAgICAgICAgdmFyIGJ1ZmZlcmdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XG5cbiAgICAgICAgYnVmZmVyZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShnZW9tZXRyeS52ZXJ0aWNlcyksIDMpKTtcblxuICAgICAgICBpZiAoZ2VvbWV0cnkubm9ybWFscy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICBidWZmZXJnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShnZW9tZXRyeS5ub3JtYWxzKSwgMykpO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgYnVmZmVyZ2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnZW9tZXRyeS51dnMubGVuZ3RoID4gMCkge1xuXG4gICAgICAgICAgYnVmZmVyZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCd1dicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheShnZW9tZXRyeS51dnMpLCAyKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgbWF0ZXJpYWxzXG5cbiAgICAgICAgdmFyIGNyZWF0ZWRNYXRlcmlhbHMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBtaSA9IDAsIG1pTGVuID0gbWF0ZXJpYWxzLmxlbmd0aDsgbWkgPCBtaUxlbjsgbWkrKykge1xuXG4gICAgICAgICAgdmFyIHNvdXJjZU1hdGVyaWFsID0gbWF0ZXJpYWxzW21pXTtcbiAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAodGhpcy5tYXRlcmlhbHMgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFscy5jcmVhdGUoc291cmNlTWF0ZXJpYWwubmFtZSk7XG5cbiAgICAgICAgICAgIC8vIG10bCBldGMuIGxvYWRlcnMgcHJvYmFibHkgY2FuJ3QgY3JlYXRlIGxpbmUgbWF0ZXJpYWxzIGNvcnJlY3RseSwgY29weSBwcm9wZXJ0aWVzIHRvIGEgbGluZSBtYXRlcmlhbC5cbiAgICAgICAgICAgIGlmIChpc0xpbmUgJiYgbWF0ZXJpYWwgJiYgIShtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKSkge1xuXG4gICAgICAgICAgICAgIHZhciBtYXRlcmlhbExpbmUgPSBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoKTtcbiAgICAgICAgICAgICAgbWF0ZXJpYWxMaW5lLmNvcHkobWF0ZXJpYWwpO1xuICAgICAgICAgICAgICBtYXRlcmlhbCA9IG1hdGVyaWFsTGluZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG5cbiAgICAgICAgICAgIG1hdGVyaWFsID0gIWlzTGluZSA/IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgpIDogbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKCk7XG4gICAgICAgICAgICBtYXRlcmlhbC5uYW1lID0gc291cmNlTWF0ZXJpYWwubmFtZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtYXRlcmlhbC5zaGFkaW5nID0gc291cmNlTWF0ZXJpYWwuc21vb3RoID8gVEhSRUUuU21vb3RoU2hhZGluZyA6IFRIUkVFLkZsYXRTaGFkaW5nO1xuXG4gICAgICAgICAgY3JlYXRlZE1hdGVyaWFscy5wdXNoKG1hdGVyaWFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBtZXNoXG5cbiAgICAgICAgdmFyIG1lc2g7XG5cbiAgICAgICAgaWYgKGNyZWF0ZWRNYXRlcmlhbHMubGVuZ3RoID4gMSkge1xuXG4gICAgICAgICAgZm9yICh2YXIgbWkgPSAwLCBtaUxlbiA9IG1hdGVyaWFscy5sZW5ndGg7IG1pIDwgbWlMZW47IG1pKyspIHtcblxuICAgICAgICAgICAgdmFyIHNvdXJjZU1hdGVyaWFsID0gbWF0ZXJpYWxzW21pXTtcbiAgICAgICAgICAgIGJ1ZmZlcmdlb21ldHJ5LmFkZEdyb3VwKHNvdXJjZU1hdGVyaWFsLmdyb3VwU3RhcnQsIHNvdXJjZU1hdGVyaWFsLmdyb3VwQ291bnQsIG1pKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgbXVsdGlNYXRlcmlhbCA9IG5ldyBUSFJFRS5NdWx0aU1hdGVyaWFsKGNyZWF0ZWRNYXRlcmlhbHMpO1xuICAgICAgICAgIG1lc2ggPSAhaXNMaW5lID8gbmV3IFRIUkVFLk1lc2goYnVmZmVyZ2VvbWV0cnksIG11bHRpTWF0ZXJpYWwpIDogbmV3IFRIUkVFLkxpbmVTZWdtZW50cyhidWZmZXJnZW9tZXRyeSwgbXVsdGlNYXRlcmlhbCk7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBtZXNoID0gIWlzTGluZSA/IG5ldyBUSFJFRS5NZXNoKGJ1ZmZlcmdlb21ldHJ5LCBjcmVhdGVkTWF0ZXJpYWxzWzBdKSA6IG5ldyBUSFJFRS5MaW5lU2VnbWVudHMoYnVmZmVyZ2VvbWV0cnksIGNyZWF0ZWRNYXRlcmlhbHNbMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVzaC5uYW1lID0gb2JqZWN0Lm5hbWU7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZChtZXNoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIGNvbnNvbGUudGltZUVuZCgnT0JKTG9hZGVyJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gIH07XG59OyJdLCJzb3VyY2VSb290IjoiIn0=