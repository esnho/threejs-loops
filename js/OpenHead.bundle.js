(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{29:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var a=o(28);var i=function e(t){var o=t.size,i=void 0===o?5:o,s=t.material,r=t.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed=Math.random();var n=1,h=1,d=1;this.color=new a.Color,this.color.setRGB(n,h,d),this.material=s||new a.MeshBasicMaterial({color:this.color}),this.geometry=new a.BoxGeometry(i,i,i),this.mesh=new a.Mesh(this.geometry,this.material),r&&this.mesh.position.copy(r),this.root=this.mesh}},39:function(e,t,o){e.exports=o.p+"obj/male.obj"},5:function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return l});var a=o(28),i=o(39),s=o.n(i),r=o(31),n=o(33),h=o(29),d=o(34);function c(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}d(a);var l=function(){function e(t){var o=t.scene,i=t.onLoad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=o,this.setupCamera(),o.renderer.shadowMap.enabled=!0,o.renderer.shadowMap.type=void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?a.BasicShadowMap:a.PCFSoftShadowMap,this.root=new a.Group,this.wireMat=new a.MeshBasicMaterial({color:16777215,wireframe:!0});var s=new a.MeshStandardMaterial({emissive:6161169,flatShading:!0});this.loadingCube=new h.a({size:6,material:s}),this.root.add(this.loadingCube.root),this.loading(.5),this.setupLights(),this.createSpheres(),this.loadHead(),i&&i()}var t,o,i;return t=e,(o=[{key:"loading",value:function(e){this.loadingCube.root.scale.copy(new a.Vector3(1,1-e,1)),this.loadingCube.root.position.copy(new a.Vector3(0,-.5*this.loadingCube.root.geometry.parameters.height*e,0));var t=new a.Quaternion;t.setFromAxisAngle(new a.Vector3(0,1,0),-2*Math.PI*e),this.loadingCube.root.quaternion.copy(t)}},{key:"setupLights",value:function(){var e=new r.a({intensity:1.8,castShadow:!0,bias:2e-5,projectionSides:2.5,mapSize:2048});e.rotateY(Math.PI),this.root.add(e)}},{key:"setupCamera",value:function(){var e=this.scene.camera.aspect;this.scene.camera=new a.OrthographicCamera(10*e/-2,10*e/2,5,-5,1,150),this.scene.camera.position.copy(new a.Vector3(0,3.5,10)),this.scene.camera.lookAt(new a.Vector3(0,0,0))}},{key:"createSpheres",value:function(){var e=[new a.MeshStandardMaterial({flatShading:!0,roughness:0}),this.wireMat],t=[new a.MeshStandardMaterial({emissive:6161169,flatShading:!0}),this.wireMat];this.spheres=new a.Group,this.sphereA=new n.a({size:8,widthSegments:6,heightSegments:6,material:e,castShadow:!0,receiveShadow:!0}),this.sphereA.root.position.copy(new a.Vector3(2.5,0,3)),this.sphereB=new n.a({size:7,widthSegments:7,heightSegments:6,material:e,castShadow:!0,receiveShadow:!0}),this.sphereB.root.position.copy(new a.Vector3(2,.5,-7)),this.sphereC=new n.a({size:5,widthSegments:5,heightSegments:4,material:t,castShadow:!0,receiveShadow:!0}),this.sphereC.root.position.copy(new a.Vector3(-6.5,.5,-1)),this.spheres.add(this.sphereA.root),this.spheres.add(this.sphereB.root),this.spheres.add(this.sphereC.root),this.spheres.position.copy(new a.Vector3(0,8,0))}},{key:"loadHead",value:function(){var e=new a.OBJLoader;this.onHeadReady=this.onHeadReady.bind(this),this.onHeadLoading=this.onHeadLoading.bind(this),e.load(s.a,this.onHeadReady,this.onHeadLoading,function(e){console.log("An error happened",e)})}},{key:"onHeadLoading",value:function(e){var t=e.loaded/e.total;console.log(100*t+"% loaded"),this.loading(Math.sin(t))}},{key:"onHeadReady",value:function(e){this.root.remove(this.loadingCube.root),this.loadingCube=null,e.scale.copy(new a.Vector3(.2,.2,.2)),e.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0,e.name&&e.name.indexOf("occhio")>=0&&(e.material.color.setRGB(0,0,0),e.material.specular.setRGB(.1,.1,.1),e.material.roughness=0)}),this.root.add(e),this.head=e,this.head.rotateY(-.25*Math.PI),this.head.add(this.spheres)}},{key:"update",value:function(e,t){if(this.head){var o=.1*e;this.head.rotateY(Math.sin(o)*t*.1),this.sphereA.root.rotateY(.3*t),this.sphereA.root.rotateX(.6*t),this.sphereB.root.rotateY(-.4*t),this.sphereB.root.rotateX(-.6*t),this.sphereC.root.rotateY(-.4*t),this.sphereC.root.rotateX(.6*t),this.sphereC.root.rotateZ(.9*t)}}}])&&c(t.prototype,o),i&&c(t,i),e}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY0N1YmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL29iai9tYWxlLm9iaiIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTG9vcHMvT3BlbkhlYWQuanMiXSwibmFtZXMiOlsiQmFzaWNDdWJlIiwiX3JlZiIsIl9yZWYkc2l6ZSIsInNpemUiLCJtYXRlcmlhbCIsInBvc2l0aW9uIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInNlZWQiLCJNYXRoIiwicmFuZG9tIiwiY29sb3IiLCJDb2xvciIsInNldFJHQiIsIk1lc2hCYXNpY01hdGVyaWFsIiwiZ2VvbWV0cnkiLCJCb3hHZW9tZXRyeSIsIm1lc2giLCJNZXNoIiwiY29weSIsInJvb3QiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJPQkpMb2FkZXIiLCJUSFJFRSIsIk9wZW5IZWFkIiwic2NlbmUiLCJvbkxvYWQiLCJzZXR1cENhbWVyYSIsInJlbmRlcmVyIiwic2hhZG93TWFwIiwiZW5hYmxlZCIsInR5cGUiLCJ3aW5kb3ciLCJvcmllbnRhdGlvbiIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJ3aXJlTWF0Iiwid2lyZWZyYW1lIiwibG9hZGluZ0N1YmVNYXQiLCJlbWlzc2l2ZSIsImZsYXRTaGFkaW5nIiwibG9hZGluZ0N1YmUiLCJhZGQiLCJsb2FkaW5nIiwic2V0dXBMaWdodHMiLCJjcmVhdGVTcGhlcmVzIiwibG9hZEhlYWQiLCJwZXJjZW50YWdlIiwic2NhbGUiLCJwYXJhbWV0ZXJzIiwiaGVpZ2h0IiwicXVhdGVybmlvbiIsInNldEZyb21BeGlzQW5nbGUiLCJQSSIsImxpZ2h0cyIsIkxpZ2h0cyIsImludGVuc2l0eSIsImNhc3RTaGFkb3ciLCJiaWFzIiwicHJvamVjdGlvblNpZGVzIiwibWFwU2l6ZSIsInJvdGF0ZVkiLCJhc3BlY3QiLCJjYW1lcmEiLCJmcnVzdHVtU2l6ZSIsImxvb2tBdCIsInNwaGVyZU1hdCIsInJvdWdobmVzcyIsInNwaGVyZU1hdDIiLCJzcGhlcmVzIiwic3BoZXJlQSIsIkJhc2ljU3BoZXJlIiwid2lkdGhTZWdtZW50cyIsImhlaWdodFNlZ21lbnRzIiwicmVjZWl2ZVNoYWRvdyIsInNwaGVyZUIiLCJzcGhlcmVDIiwibG9hZGVyIiwib25IZWFkUmVhZHkiLCJiaW5kIiwib25IZWFkTG9hZGluZyIsImxvYWQiLCJoZWFkIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwieGhyIiwibG9hZGVkIiwidG90YWwiLCJzaW4iLCJvYmplY3QiLCJyZW1vdmUiLCJ0cmF2ZXJzZSIsIm9iaiIsIm5hbWUiLCJzcGVjdWxhciIsInRpbWVFbGFwc2VkIiwiZGVsdGEiLCJhbmltYXRpb25UaW1lIiwicm90YXRlWCIsInJvdGF0ZVoiXSwibWFwcGluZ3MiOiJ5SUFPcUJBLEVBQ25CLFNBQUFBLEVBQUFDLEdBQTRDLElBQUFDLEVBQUFELEVBQS9CRSxZQUErQixJQUFBRCxFQUF4QixFQUF3QkEsRUFBckJFLEVBQXFCSCxFQUFyQkcsU0FBVUMsRUFBV0osRUFBWEksc0dBQVdDLENBQUFDLEtBQUFQLEdBQzFDTyxLQUFLQyxLQUFPQyxLQUFLQyxTQUNqQixJQUFNQyxFQUFXLEVBQVhBLEVBQWdCLEVBQWhCQSxFQUFxQixFQUMzQkosS0FBS0ksTUFBUSxJQUFJQyxRQUNqQkwsS0FBS0ksTUFBTUUsT0FBT0YsRUFBU0EsRUFBU0EsR0FFcENKLEtBQUtILFNBQVdBLEdBQVksSUFBSVUsb0JBQWtCLENBQ2hESCxNQUFPSixLQUFLSSxRQUdkSixLQUFLUSxTQUFXLElBQUlDLGNBQVliLEVBQU1BLEVBQU1BLEdBRTVDSSxLQUFLVSxLQUFPLElBQUlDLE9BQ2RYLEtBQUtRLFNBQ0xSLEtBQUtILFVBR0hDLEdBQ0ZFLEtBQUtVLEtBQUtaLFNBQVNjLEtBQUtkLEdBRzFCRSxLQUFLYSxLQUFPYixLQUFLVSwwQkM3QnJCSSxFQUFBQyxRQUFpQkMsRUFBQUMsRUFBdUIsK1RDTXhDQyxFQUFVQyxPQU1X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LFNBQVMrRixTQUFTdEYsT0FBTyxHQUFLLEdBQUssSUFDdkNvRixFQUFJN0YsU0FBU21FLFVBQVksS0FHN0JoRSxLQUFLYSxLQUFLMEIsSUFBSWdELEdBQ2R2RixLQUFLK0UsS0FBT1EsRUFDWnZGLEtBQUsrRSxLQUFLckIsU0FBb0IsSUFBVnhELEtBQUtnRCxJQUN6QmxELEtBQUsrRSxLQUFLeEMsSUFBSXZDLEtBQUtrRSx3Q0FHZDJCLEVBQWFDLEdBQ2xCLEdBQUk5RixLQUFLK0UsS0FBTSxDQUNiLElBQU1nQixFQUE4QixHQUFkRixFQUN0QjdGLEtBQUsrRSxLQUFLckIsUUFBU3hELEtBQUtvRixJQUFJUyxHQUFrQkQsRUFBUSxJQUV0RDlGLEtBQUttRSxRQUFRdEQsS0FBSzZDLFFBQVEsR0FBTW9DLEdBQ2hDOUYsS0FBS21FLFFBQVF0RCxLQUFLbUYsUUFBUSxHQUFNRixHQUVoQzlGLEtBQUt3RSxRQUFRM0QsS0FBSzZDLFNBQVMsR0FBTW9DLEdBQ2pDOUYsS0FBS3dFLFFBQVEzRCxLQUFLbUYsU0FBUyxHQUFNRixHQUVqQzlGLEtBQUt5RSxRQUFRNUQsS0FBSzZDLFNBQVMsR0FBTW9DLEdBQ2pDOUYsS0FBS3lFLFFBQVE1RCxLQUFLbUYsUUFBUSxHQUFNRixHQUNoQzlGLEtBQUt5RSxRQUFRNUQsS0FBS29GLFFBQVEsR0FBTUgiLCJmaWxlIjoiLi9qcy9PcGVuSGVhZC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb2xvcixcbiAgTWVzaEJhc2ljTWF0ZXJpYWwsXG4gIEJveEdlb21ldHJ5LFxuICBNZXNoXG59IGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzaWNDdWJlIHtcbiAgY29uc3RydWN0b3Ioe3NpemUgPSA1LCBtYXRlcmlhbCwgcG9zaXRpb259KSB7XG4gICAgdGhpcy5zZWVkID0gTWF0aC5yYW5kb20oKTtcbiAgICBjb25zdCBjb2xvciA9IHtyOjEgLGc6MSwgYjoxfTtcbiAgICB0aGlzLmNvbG9yID0gbmV3IENvbG9yKCk7XG4gICAgdGhpcy5jb2xvci5zZXRSR0IoY29sb3IuciwgY29sb3IuZywgY29sb3IuYik7XG5cbiAgICB0aGlzLm1hdGVyaWFsID0gbWF0ZXJpYWwgfHwgbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXG4gICAgfSk7XG5cbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IEJveEdlb21ldHJ5KHNpemUsIHNpemUsIHNpemUpO1xuXG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2goXG4gICAgICB0aGlzLmdlb21ldHJ5LFxuICAgICAgdGhpcy5tYXRlcmlhbFxuICAgICk7XG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLnJvb3QgPSB0aGlzLm1lc2g7XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIm9iai9tYWxlLm9ialwiOyIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCBoZWFkIGZyb20gJy4uLy4uL29iai9tYWxlLm9iaic7XG5pbXBvcnQgTGlnaHRzIGZyb20gJy4uL0xpZ2h0cy9Ud29EaXJlY3Rpb25hbHMnO1xuaW1wb3J0IEJhc2ljU3BoZXJlIGZyb20gJy4uL09iamVjdHMvQmFzaWNTcGhlcmUnO1xuaW1wb3J0IEJhc2ljQ3ViZSBmcm9tICcuLi9PYmplY3RzL0Jhc2ljQ3ViZSc7XG5pbXBvcnQgKiBhcyBPQkpMb2FkZXIgZnJvbSAndGhyZWUtb2JqLWxvYWRlcic7XG5PQkpMb2FkZXIoVEhSRUUpO1xuXG5mdW5jdGlvbiBpc01vYmlsZURldmljZSgpIHtcbiAgcmV0dXJuICh0eXBlb2Ygd2luZG93Lm9yaWVudGF0aW9uICE9PSBcInVuZGVmaW5lZFwiKSB8fCAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdJRU1vYmlsZScpICE9PSAtMSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcGVuSGVhZCB7XG4gIGNvbnN0cnVjdG9yKHtzY2VuZSwgb25Mb2FkfSkge1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB0aGlzLnNldHVwQ2FtZXJhKCk7XG4gICAgXG4gICAgc2NlbmUucmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlO1xuICAgIHNjZW5lLnJlbmRlcmVyLnNoYWRvd01hcC50eXBlID0gaXNNb2JpbGVEZXZpY2UoKSA/IFRIUkVFLkJhc2ljU2hhZG93TWFwIDogVEhSRUUuUENGU29mdFNoYWRvd01hcDtcblxuICAgIHRoaXMucm9vdCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgdGhpcy53aXJlTWF0ID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIGNvbG9yOiAweGZmZmZmZixcbiAgICAgIHdpcmVmcmFtZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgY29uc3QgbG9hZGluZ0N1YmVNYXQgPSBcbiAgICAgIG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgIGVtaXNzaXZlOiAweDVlMDMxMSxcbiAgICAgICAgZmxhdFNoYWRpbmc6IHRydWVcbiAgICAgIH0pXG4gICAgO1xuXG4gICAgdGhpcy5sb2FkaW5nQ3ViZSA9IG5ldyBCYXNpY0N1YmUoe1xuICAgICAgc2l6ZTo2LFxuICAgICAgbWF0ZXJpYWw6IGxvYWRpbmdDdWJlTWF0LFxuICAgIH0pO1xuXG4gICAgdGhpcy5yb290LmFkZCh0aGlzLmxvYWRpbmdDdWJlLnJvb3QpO1xuXG4gICAgdGhpcy5sb2FkaW5nKDAuNSk7XG5cbiAgICB0aGlzLnNldHVwTGlnaHRzKCk7XG5cbiAgICB0aGlzLmNyZWF0ZVNwaGVyZXMoKTtcbiAgICBcbiAgICB0aGlzLmxvYWRIZWFkKCk7XG5cbiAgICBpZiAob25Mb2FkKSBvbkxvYWQoKTtcbiAgfVxuXG4gIGxvYWRpbmcocGVyY2VudGFnZSkgeyAgICBcbiAgICB0aGlzLmxvYWRpbmdDdWJlLnJvb3Quc2NhbGUuY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDEsIDEgLSBwZXJjZW50YWdlLCAxKVxuICAgICk7XG5cbiAgICB0aGlzLmxvYWRpbmdDdWJlLnJvb3QucG9zaXRpb24uY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsXG4gICAgICAgIC0wLjUgKiB0aGlzLmxvYWRpbmdDdWJlLnJvb3QuZ2VvbWV0cnkucGFyYW1ldGVycy5oZWlnaHQgKiAocGVyY2VudGFnZSksXG4gICAgICAgIDApXG4gICAgKVxuXG4gICAgdmFyIHF1YXRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgIHF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZSggbmV3IFRIUkVFLlZlY3RvcjMoIDAsIDEsIDAgKSwgKE1hdGguUEkgKiAtMikgKiBwZXJjZW50YWdlICk7XG4gICAgdGhpcy5sb2FkaW5nQ3ViZS5yb290LnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKVxuICB9XG5cbiAgc2V0dXBMaWdodHMoKSB7XG4gICAgY29uc3QgbGlnaHRzID0gbmV3IExpZ2h0cyh7XG4gICAgICBpbnRlbnNpdHk6IDEuOCxcbiAgICAgIGNhc3RTaGFkb3c6IHRydWUsXG4gICAgICBiaWFzOiAwLjAwMDAyLFxuICAgICAgcHJvamVjdGlvblNpZGVzOiAyLjUsXG4gICAgICBtYXBTaXplOiAyMDQ4XG4gICAgfSk7XG4gICAgbGlnaHRzLnJvdGF0ZVkoTWF0aC5QSSk7XG4gICAgdGhpcy5yb290LmFkZChsaWdodHMpO1xuICB9XG5cbiAgc2V0dXBDYW1lcmEoKSB7XG4gICAgY29uc3QgZnJ1c3R1bVNpemUgPSAxMDtcbiAgICBjb25zdCBhc3BlY3QgPSB0aGlzLnNjZW5lLmNhbWVyYS5hc3BlY3Q7XG4gICAgdGhpcy5zY2VuZS5jYW1lcmEgPSBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKFxuICAgICAgZnJ1c3R1bVNpemUgKiBhc3BlY3QgLyAtMixcbiAgICAgIGZydXN0dW1TaXplICogYXNwZWN0IC8gMixcbiAgICAgIGZydXN0dW1TaXplIC8gMixcbiAgICAgIGZydXN0dW1TaXplIC8gLTIsXG4gICAgICAxLFxuICAgICAgMTUwKTtcbiAgICB0aGlzLnNjZW5lLmNhbWVyYS5wb3NpdGlvbi5jb3B5KG5ldyBUSFJFRS5WZWN0b3IzKDAsIDMuNSwgMTApKTtcbiAgICB0aGlzLnNjZW5lLmNhbWVyYS5sb29rQXQobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMCkpO1xuICB9XG5cbiAgY3JlYXRlU3BoZXJlcygpIHtcbiAgICBjb25zdCBzcGhlcmVNYXQgPSBbXG4gICAgICBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICBmbGF0U2hhZGluZzogdHJ1ZSxcbiAgICAgICAgcm91Z2huZXNzOiAwXG4gICAgICB9KSxcbiAgICAgIHRoaXMud2lyZU1hdFxuICAgIF07XG4gICAgY29uc3Qgc3BoZXJlTWF0MiA9IFtcbiAgICAgIG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgIGVtaXNzaXZlOiAweDVlMDMxMSxcbiAgICAgICAgZmxhdFNoYWRpbmc6IHRydWVcbiAgICAgIH0pLFxuICAgICAgdGhpcy53aXJlTWF0XG4gICAgXTtcbiAgICB0aGlzLnNwaGVyZXMgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICB0aGlzLnNwaGVyZUEgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgc2l6ZTogOCxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDYsXG4gICAgICBoZWlnaHRTZWdtZW50czogNixcbiAgICAgIG1hdGVyaWFsOiBzcGhlcmVNYXQsXG4gICAgICBjYXN0U2hhZG93OiB0cnVlLFxuICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZSxcbiAgICB9KTtcbiAgICB0aGlzLnNwaGVyZUEucm9vdC5wb3NpdGlvbi5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMi41LCAwLCAzKVxuICAgICk7XG4gICAgXG4gICAgdGhpcy5zcGhlcmVCID0gbmV3IEJhc2ljU3BoZXJlKHtcbiAgICAgIHNpemU6IDcsXG4gICAgICB3aWR0aFNlZ21lbnRzOiA3LFxuICAgICAgaGVpZ2h0U2VnbWVudHM6IDYsXG4gICAgICBtYXRlcmlhbDogc3BoZXJlTWF0LFxuICAgICAgY2FzdFNoYWRvdzogdHJ1ZSxcbiAgICAgIHJlY2VpdmVTaGFkb3c6IHRydWUsXG4gICAgfSk7XG4gICAgdGhpcy5zcGhlcmVCLnJvb3QucG9zaXRpb24uY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDIsIDAuNSwgLTcpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnNwaGVyZUMgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgc2l6ZTogNSxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDUsXG4gICAgICBoZWlnaHRTZWdtZW50czogNCxcbiAgICAgIG1hdGVyaWFsOiBzcGhlcmVNYXQyLFxuICAgICAgY2FzdFNoYWRvdzogdHJ1ZSxcbiAgICAgIHJlY2VpdmVTaGFkb3c6IHRydWUsXG4gICAgfSk7XG4gICAgdGhpcy5zcGhlcmVDLnJvb3QucG9zaXRpb24uY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKC02LjUsIDAuNSwgLTEpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnNwaGVyZXMuYWRkKHRoaXMuc3BoZXJlQS5yb290KTtcbiAgICB0aGlzLnNwaGVyZXMuYWRkKHRoaXMuc3BoZXJlQi5yb290KTtcbiAgICB0aGlzLnNwaGVyZXMuYWRkKHRoaXMuc3BoZXJlQy5yb290KTtcbiAgICBcbiAgICB0aGlzLnNwaGVyZXMucG9zaXRpb24uY29weShcbiAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDgsIDApXG4gICAgKTtcbiAgfVxuXG4gIGxvYWRIZWFkKCkge1xuICAgIGNvbnN0IGxvYWRlciA9IG5ldyBUSFJFRS5PQkpMb2FkZXIoKTtcbiAgICB0aGlzLm9uSGVhZFJlYWR5ID0gdGhpcy5vbkhlYWRSZWFkeS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25IZWFkTG9hZGluZyA9IHRoaXMub25IZWFkTG9hZGluZy5iaW5kKHRoaXMpO1xuICAgIGxvYWRlci5sb2FkKFxuICAgICAgaGVhZCxcbiAgICAgIHRoaXMub25IZWFkUmVhZHksXG4gICAgICB0aGlzLm9uSGVhZExvYWRpbmcsXG4gICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FuIGVycm9yIGhhcHBlbmVkJywgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBvbkhlYWRMb2FkaW5nKHhocikge1xuICAgIGNvbnN0IGxvYWRpbmcgPSB4aHIubG9hZGVkIC8geGhyLnRvdGFsO1xuICAgIGNvbnNvbGUubG9nKChsb2FkaW5nICogMTAwKSArICclIGxvYWRlZCcpO1xuICAgIFxuICAgIHRoaXMubG9hZGluZyhNYXRoLnNpbihsb2FkaW5nKSk7XG4gIH1cblxuICBvbkhlYWRSZWFkeShvYmplY3QpIHtcbiAgICB0aGlzLnJvb3QucmVtb3ZlKCB0aGlzLmxvYWRpbmdDdWJlLnJvb3QgKTtcbiAgICB0aGlzLmxvYWRpbmdDdWJlID0gbnVsbDtcbiAgICBcbiAgICBvYmplY3Quc2NhbGUuY29weShuZXcgVEhSRUUuVmVjdG9yMygwLjIsIDAuMiwgMC4yKSk7XG4gICAgb2JqZWN0LnRyYXZlcnNlKChvYmopID0+IHtcbiAgICAgIG9iai5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcbiAgICAgIG9iai5jYXN0U2hhZG93ID0gdHJ1ZTtcbiAgICAgIGlmIChvYmoubmFtZSAmJiBvYmoubmFtZS5pbmRleE9mKCdvY2NoaW8nKSA+PSAwKSB7XG4gICAgICAgIG9iai5tYXRlcmlhbC5jb2xvci5zZXRSR0IoMCwgMCwgMCk7XG4gICAgICAgIG9iai5tYXRlcmlhbC5zcGVjdWxhci5zZXRSR0IoMC4xLCAwLjEsIDAuMSk7XG4gICAgICAgIG9iai5tYXRlcmlhbC5yb3VnaG5lc3MgPSAwO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMucm9vdC5hZGQob2JqZWN0KTtcbiAgICB0aGlzLmhlYWQgPSBvYmplY3Q7XG4gICAgdGhpcy5oZWFkLnJvdGF0ZVkoLShNYXRoLlBJICogMC4yNSkpO1xuICAgIHRoaXMuaGVhZC5hZGQodGhpcy5zcGhlcmVzKTtcbiAgfVxuXG4gIHVwZGF0ZSh0aW1lRWxhcHNlZCwgZGVsdGEpIHtcbiAgICBpZiAodGhpcy5oZWFkKSB7XG4gICAgICBjb25zdCBhbmltYXRpb25UaW1lID0gdGltZUVsYXBzZWQgKiAwLjE7XG4gICAgICB0aGlzLmhlYWQucm90YXRlWSgoTWF0aC5zaW4oYW5pbWF0aW9uVGltZSkpICogZGVsdGEgKiAwLjEpO1xuXG4gICAgICB0aGlzLnNwaGVyZUEucm9vdC5yb3RhdGVZKDAuMyAqIGRlbHRhKTtcbiAgICAgIHRoaXMuc3BoZXJlQS5yb290LnJvdGF0ZVgoMC42ICogZGVsdGEpO1xuXG4gICAgICB0aGlzLnNwaGVyZUIucm9vdC5yb3RhdGVZKC0wLjQgKiBkZWx0YSk7XG4gICAgICB0aGlzLnNwaGVyZUIucm9vdC5yb3RhdGVYKC0wLjYgKiBkZWx0YSk7XG5cbiAgICAgIHRoaXMuc3BoZXJlQy5yb290LnJvdGF0ZVkoLTAuNCAqIGRlbHRhKTtcbiAgICAgIHRoaXMuc3BoZXJlQy5yb290LnJvdGF0ZVgoMC42ICogZGVsdGEpO1xuICAgICAgdGhpcy5zcGhlcmVDLnJvb3Qucm90YXRlWigwLjkgKiBkZWx0YSk7XG4gICAgfVxuICB9XG5cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=