(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{31:function(e,t,o){"use strict";o.d(t,"a",function(){return c});var n=o(29);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=i(this,a(t).call(this));var o=new n.HemisphereLight(16777215,16777215,3);return o.color.setHSL(Math.NormalizeHue(325),.1,.94),o.groundColor.setHSL(Math.NormalizeHue(325),.1,.64),o.position.set(0,2,0),e.add(o),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,n["Group"]),t}()},32:function(e,t,o){"use strict";o.d(t,"a",function(){return l});var n=o(29);o(31);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u={intensity:1,castShadow:!1,bias:0,projectionSides:void 0,mapSize:512},l=function(e){function t(){var e,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=new Array(r),h=0;h<r;h++)a[h]=arguments[h];o=s(this,(e=c(t)).call.apply(e,[this].concat(a)));var l=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){i(e,t,o[t])})}return e}({},u,a[0]),p=l.intensity,f=l.castShadow,d=l.bias,y=l.projectionSides,m=l.mapSize;o.intensity=p,o.projectionSides=y,o.mapSize=m,console.log("mapsize",o.mapSize);var w=new n.DirectionalLight("white",.65*o.intensity),b=new n.DirectionalLight("white",.55*o.intensity);return w.shadow.bias=d||0,b.shadow.bias=d||0,w.castShadow=f,b.castShadow=f,o.updateProjection(w,o.projectionSides),o.updateProjection(b,o.projectionSides),o.updateShadowMap(w,o.mapSize),o.updateShadowMap(b,o.mapSize),w.position.copy(new n.Vector3(9,3.5,0)),b.position.copy(new n.Vector3(-10,2,0)),o.add(w,b),o}var o,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,n["Group"]),o=t,(r=[{key:"updateProjection",value:function(e,t){e.shadow.camera.left=-t,e.shadow.camera.right=t,e.shadow.camera.updateProjectionMatrix()}},{key:"updateShadowMap",value:function(e,t){e.shadow.mapSize.width=t,e.shadow.mapSize.height=t}}])&&a(o.prototype,r),l&&a(o,l),t}()},34:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var n=o(29);var r=function e(t){var o=t.size,r=void 0===o?5:o,i=t.material,a=t.position,s=t.widthSegments,c=t.heightSegments,h=t.castShadow,u=t.receiveShadow;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed=Math.random();var l=1,p=1,f=1;this.color=new n.Color,this.color.setRGB(l,p,f),this.material=i||new n.MeshBasicMaterial({color:this.color});var d=this.material.length>1?n.SphereBufferGeometry:n.SphereGeometry;if(this.geometry=new d(r,s||7,c||9),this.material.length){this.geometry.clearGroups();for(var y=0;y<i.length;y++)this.geometry.addGroup(0,1/0,y)}this.mesh=new n.Mesh(this.geometry,this.material),this.mesh.castShadow=h,this.mesh.receiveShadow=u,a&&this.mesh.position.copy(a),this.root=this.mesh}},36:function(e,t,o){e.exports=o.p+"obj/Lowpoly_tree_sample.obj"},8:function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return u});var n=o(29),r=o(36),i=o.n(r),a=o(32),s=o(34),c=o(35);function h(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t){var o=t.scene,r=t.onLoad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=o,this.setupCamera(),o.renderer.shadowMap.enabled=!0,o.renderer.shadowMap.type=n.PCFShadowMap,this.root=new n.Group,this.loadTree(),this.setupLights();var i=new n.MeshStandardMaterial({emissive:6161169,flatShading:!0});i.emissive.setRGB(157/255,239/255,247/255),this.sphere=new s.a({size:6,material:i,widthSegments:20,heightSegments:10,receiveShadow:!0}),this.sphere.root.rotateX(Math.PI/180*26),console.log(this.sphere.root.geometry),this.root.add(this.sphere.root),r&&r()}var t,o,r;return t=e,(o=[{key:"loading",value:function(e){}},{key:"setupLights",value:function(){var e=new a.a({intensity:1.8,castShadow:!0,bias:2e-5,projectionSides:6.5,mapSize:1024});e.rotateY(Math.PI),this.root.add(e)}},{key:"setupCamera",value:function(){this.scene.camera.position.copy(new n.Vector3(0,4.5,18)),this.scene.camera.lookAt(new n.Vector3(0,0,0))}},{key:"loadTree",value:function(){var e=new c.OBJLoader;this.onHeadReady=this.onTreeReady.bind(this),this.onHeadLoading=this.onHeadLoading.bind(this),this.onTreeReady=this.onTreeReady.bind(this),e.load(i.a,this.onTreeReady,this.onHeadLoading,function(e){console.log("An error happened",e)})}},{key:"onHeadLoading",value:function(e){var t=e.loaded/e.total;console.log(100*t+"% loaded"),this.loading(Math.sin(t))}},{key:"onTreeReady",value:function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0});for(var t=0;t<this.sphere.root.geometry.vertices.length;t++)this.addTree(e,this.sphere.root.geometry.vertices[t],.1)}},{key:"addTree",value:function(e,t,o){var r=e.clone();r.position.copy(t),r.scale.copy(new n.Vector3(o,o,o));var i=new n.Vector3(0,1,0);r.quaternion.setFromUnitVectors(i,t.sub(this.sphere.root.position).clone().normalize()),r.children[0].material[0].color.setRGB(1,.6,0),r.children[0].material[1].color.setRGB(224/255,252/255,1),r.children[0].material[1].emissive.setRGB(224/255*.2,252/255*.2,.2),r.rotateY(360*Math.random()),this.sphere.root.add(r)}},{key:"update",value:function(e,t){var o=new n.Color;this.sphere.root.material.emissive.getHSL(o),o.s=.5*(Math.sin(e+.27*Math.PI)+1),o.l=.1*(Math.cos(e)+1),this.sphere.root.material.emissive.setHSL(o.h,o.s,o.l);for(var r=0;r<this.sphere.root.children.length;r+=1){var i=this.sphere.root.children[r].children[0],a=i.position;a.y=30*Math.sin(e+.05*r),i.position.copy(a)}this.sphere.root.rotateY(.35*t)}}])&&h(t.prototype,o),r&&h(t,r),e}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1doaXRlSGVtaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTGlnaHRzL1R3b0RpcmVjdGlvbmFscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY1NwaGVyZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvb2JqL0xvd3BvbHlfdHJlZV9zYW1wbGUub2JqIiwid2VicGFjazovLy8uL3NyYy9qcy9Mb29wcy9UcmVlRXhhbXBsZS4xLmpzIl0sIm5hbWVzIjpbIldoaXRlSGVtaSIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX2dldFByb3RvdHlwZU9mIiwiY2FsbCIsImhlbWlMaWdodCIsIkhlbWlzcGhlcmVMaWdodCIsImNvbG9yIiwic2V0SFNMIiwiTWF0aCIsIk5vcm1hbGl6ZUh1ZSIsImdyb3VuZENvbG9yIiwicG9zaXRpb24iLCJzZXQiLCJhZGQiLCJHcm91cCIsImRlZmF1bHRQYXJhbXMiLCJpbnRlbnNpdHkiLCJjYXN0U2hhZG93IiwiYmlhcyIsInByb2plY3Rpb25TaWRlcyIsInVuZGVmaW5lZCIsIm1hcFNpemUiLCJUd29EaXJlY3Rpb25hbHMiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX2xlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJhcHBseSIsImNvbmNhdCIsIl9kZWZhdWx0UGFyYW1zJGFyZ3MkIiwiX29iamVjdFNwcmVhZCIsImNvbnNvbGUiLCJsb2ciLCJkaXJlY3Rpb25hbExpZ2h0IiwiRGlyZWN0aW9uYWxMaWdodCIsImRpcmVjdGlvbmFsTGlnaHQyIiwic2hhZG93IiwidXBkYXRlUHJvamVjdGlvbiIsInVwZGF0ZVNoYWRvd01hcCIsImNvcHkiLCJWZWN0b3IzIiwibGlnaHQiLCJjYW1lcmEiLCJsZWZ0IiwicmlnaHQiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4Iiwid2lkdGgiLCJoZWlnaHQiLCJCYXNpY1NwaGVyZSIsIl9yZWYiLCJfcmVmJHNpemUiLCJzaXplIiwibWF0ZXJpYWwiLCJ3aWR0aFNlZ21lbnRzIiwiaGVpZ2h0U2VnbWVudHMiLCJyZWNlaXZlU2hhZG93Iiwic2VlZCIsInJhbmRvbSIsIkNvbG9yIiwic2V0UkdCIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJTcGhlcmUiLCJTcGhlcmVCdWZmZXJHZW9tZXRyeSIsIlNwaGVyZUdlb21ldHJ5IiwiZ2VvbWV0cnkiLCJjbGVhckdyb3VwcyIsImkiLCJhZGRHcm91cCIsIkluZmluaXR5IiwibWVzaCIsIk1lc2giLCJyb290IiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJwIiwiVHJlZUV4YW1wbGUiLCJzY2VuZSIsIm9uTG9hZCIsInNldHVwQ2FtZXJhIiwicmVuZGVyZXIiLCJzaGFkb3dNYXAiLCJlbmFibGVkIiwidHlwZSIsIlRIUkVFIiwibG9hZFRyZWUiLCJzZXR1cExpZ2h0cyIsInNwaGVyZU1hdGVyaWFsIiwiZW1pc3NpdmUiLCJmbGF0U2hhZGluZyIsInNwaGVyZSIsInJvdGF0ZVgiLCJQSSIsInBlcmNlbnRhZ2UiLCJsaWdodHMiLCJMaWdodHMiLCJyb3RhdGVZIiwibG9va0F0IiwibG9hZGVyIiwiT0JKTG9hZGVyIiwib25IZWFkUmVhZHkiLCJvblRyZWVSZWFkeSIsImJpbmQiLCJvbkhlYWRMb2FkaW5nIiwibG9hZCIsInRyZWUiLCJlcnJvciIsInhociIsImxvYWRpbmciLCJsb2FkZWQiLCJ0b3RhbCIsInNpbiIsIm9iamVjdCIsInRyYXZlcnNlIiwib2JqIiwidmVydGljZXMiLCJhZGRUcmVlIiwibmV3UG9zaXRpb24iLCJzY2FsZSIsIm5ld1RyZWUiLCJjbG9uZSIsImF4aXMiLCJxdWF0ZXJuaW9uIiwic2V0RnJvbVVuaXRWZWN0b3JzIiwic3ViIiwibm9ybWFsaXplIiwiY2hpbGRyZW4iLCJ0aW1lRWxhcHNlZCIsImRlbHRhIiwibmV3Q29sb3IiLCJnZXRIU0wi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QzFDQSxFQUFTRSxFQUFxRCxJQUFoRDlILEtBQUswRyxJQUFJZ0IsRUFBeUIsSUFBVjFILEtBQUt1RixJQUFjLEdBQ3pEcUMsRUFBU0csRUFBa0MsSUFBN0IvSCxLQUFLZ0ksSUFBSU4sR0FBZSxHQUN0Q2xJLEtBQUs2RixPQUFPbkIsS0FBS25CLFNBQVNvQyxTQUFTcEYsT0FBTzZILEVBQVNLLEVBQUdMLEVBQVNFLEVBQUdGLEVBQVNHLEdBRTNFLElBQUssSUFBSUcsRUFBWSxFQUFHQSxFQUFZMUksS0FBSzZGLE9BQU9uQixLQUFLdUQsU0FBU3ZHLE9BQVFnSCxHQUF3QixFQUFHLENBQy9GLElBQU05QixFQUFPNUcsS0FBSzZGLE9BQU9uQixLQUFLdUQsU0FBU1MsR0FBV1QsU0FBUyxHQUNyRFQsRUFBY1osRUFBS2pHLFNBQ3pCNkcsRUFBWW1CLEVBQWlELEdBQTdDbkksS0FBSzBHLElBQUlnQixFQUEyQixJQUFaUSxHQUN4QzlCLEVBQUtqRyxTQUFTK0IsS0FBSzhFLEdBR3JCeEgsS0FBSzZGLE9BQU9uQixLQUFLeUIsUUFBZ0IsSUFBUmdDIiwiZmlsZSI6Ii4vanMvVHJlZUV4YW1wbGUtMS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRHcm91cCxcblx0SGVtaXNwaGVyZUxpZ2h0XG59IGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2hpdGVIZW1pIGV4dGVuZHMgR3JvdXAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3QgaGVtaUxpZ2h0ID0gbmV3IEhlbWlzcGhlcmVMaWdodCggMHhmZmZmZmYsIDB4ZmZmZmZmLCAzLjAgKTtcblx0XHRoZW1pTGlnaHQuY29sb3Iuc2V0SFNMKFxuXHRcdFx0TWF0aC5Ob3JtYWxpemVIdWUoMzI1KSwgXG5cdFx0XHQwLjEsXG5cdFx0XHQwLjk0XG5cdFx0KTtcblx0XHRoZW1pTGlnaHQuZ3JvdW5kQ29sb3Iuc2V0SFNMKFxuXHRcdFx0TWF0aC5Ob3JtYWxpemVIdWUoMzI1KSwgXG5cdFx0XHQwLjEsIFxuXHRcdFx0MC42NFxuXHRcdCk7XG5cdFx0aGVtaUxpZ2h0LnBvc2l0aW9uLnNldCggMCwgMiwgMCApO1xuXHRcdHRoaXMuYWRkKCBoZW1pTGlnaHQgKTtcblx0fVxufVxuIiwiaW1wb3J0IHtcbiAgICBHcm91cCxcbiAgICBEaXJlY3Rpb25hbExpZ2h0LFxuICAgIFZlY3RvcjNcbiAgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgV2hpdGVIZW1pIGZyb20gJy4vV2hpdGVIZW1pLmpzJztcblxuY29uc3QgZGVmYXVsdFBhcmFtcyA9IHtcbiAgICBpbnRlbnNpdHk6IDEsXG4gICAgY2FzdFNoYWRvdzogZmFsc2UsXG4gICAgYmlhczogMCxcbiAgICBwcm9qZWN0aW9uU2lkZXM6IHVuZGVmaW5lZCxcbiAgICBtYXBTaXplOiA1MTIsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR3b0RpcmVjdGlvbmFscyBleHRlbmRzIEdyb3VwIHtcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xuXHRcdGNvbnN0IHtcbiAgICAgICAgICAgIGludGVuc2l0eSxcbiAgICAgICAgICAgIGNhc3RTaGFkb3csXG4gICAgICAgICAgICBiaWFzLFxuICAgICAgICAgICAgcHJvamVjdGlvblNpZGVzLFxuICAgICAgICAgICAgbWFwU2l6ZVxuICAgICAgICB9ID0ge1xuICAgICAgICAgICAgLi4uZGVmYXVsdFBhcmFtcyxcbiAgICAgICAgICAgIC4uLmFyZ3NbMF1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSBpbnRlbnNpdHk7XG4gICAgICAgIHRoaXMucHJvamVjdGlvblNpZGVzID0gcHJvamVjdGlvblNpZGVzO1xuICAgICAgICB0aGlzLm1hcFNpemUgPSBtYXBTaXplO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1hcHNpemVcIiwgdGhpcy5tYXBTaXplKVxuICAgICAgICBcbiAgICAgICAgLyogY29uc3Qgd2hpdGVFbWkgPSBuZXcgV2hpdGVIZW1pKCk7XG4gICAgICAgIHRoaXMuYWRkKHdoaXRlRW1pKTsgKi9cblxuICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoJ3doaXRlJywgMC42NSAqIHRoaXMuaW50ZW5zaXR5KTtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodDIgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCgnd2hpdGUnLCAwLjU1ICogdGhpcy5pbnRlbnNpdHkpO1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5iaWFzID0gYmlhcyB8fCAwO1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Mi5zaGFkb3cuYmlhcyA9IGJpYXMgfHwgMDtcbiAgICAgICAgXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuY2FzdFNoYWRvdyA9IGNhc3RTaGFkb3c7XG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQyLmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xuXG4gICAgICAgIHRoaXMudXBkYXRlUHJvamVjdGlvbihkaXJlY3Rpb25hbExpZ2h0LCB0aGlzLnByb2plY3Rpb25TaWRlcyk7XG4gICAgICAgIHRoaXMudXBkYXRlUHJvamVjdGlvbihkaXJlY3Rpb25hbExpZ2h0MiwgdGhpcy5wcm9qZWN0aW9uU2lkZXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYWRvd01hcChkaXJlY3Rpb25hbExpZ2h0LCB0aGlzLm1hcFNpemUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNoYWRvd01hcChkaXJlY3Rpb25hbExpZ2h0MiwgdGhpcy5tYXBTaXplKTtcblxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnBvc2l0aW9uLmNvcHkoXG4gICAgICAgICAgICBuZXcgVmVjdG9yMyhcbiAgICAgICAgICAgICAgICA5LFxuICAgICAgICAgICAgICAgIDMuNSxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodDIucG9zaXRpb24uY29weShcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKFxuICAgICAgICAgICAgICAgIC0xMCxcbiAgICAgICAgICAgICAgICAyLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmFkZChkaXJlY3Rpb25hbExpZ2h0LCBkaXJlY3Rpb25hbExpZ2h0Mik7XG4gICAgfVxuXG4gICAgdXBkYXRlUHJvamVjdGlvbihsaWdodCwgcHJvamVjdGlvblNpZGVzKSB7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEubGVmdCA9IC1wcm9qZWN0aW9uU2lkZXM7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEucmlnaHQgPSBwcm9qZWN0aW9uU2lkZXM7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNoYWRvd01hcChsaWdodCwgbWFwU2l6ZSkge1xuICAgICAgICBsaWdodC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IG1hcFNpemU7XG4gICAgICAgIGxpZ2h0LnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IG1hcFNpemU7XG4gICAgfVxufSIsImltcG9ydCB7XG4gIENvbG9yLFxuICBNZXNoQmFzaWNNYXRlcmlhbCxcbiAgU3BoZXJlQnVmZmVyR2VvbWV0cnksXG4gIFNwaGVyZUdlb21ldHJ5LFxuICBNZXNoXG59IGZyb20gJ3RocmVlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzaWNTcGhlcmUge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgc2l6ZSA9IDUsXG4gICAgbWF0ZXJpYWwsXG4gICAgcG9zaXRpb24sXG4gICAgd2lkdGhTZWdtZW50cyxcbiAgICBoZWlnaHRTZWdtZW50cyxcbiAgICBjYXN0U2hhZG93LFxuICAgIHJlY2VpdmVTaGFkb3dcbiAgfSkge1xuICAgIHRoaXMuc2VlZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgY29uc3QgY29sb3IgPSB7cjoxICxnOjEsIGI6MX07XG4gICAgdGhpcy5jb2xvciA9IG5ldyBDb2xvcigpO1xuICAgIHRoaXMuY29sb3Iuc2V0UkdCKGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIpO1xuXG4gICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsIHx8IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICBjb2xvcjogdGhpcy5jb2xvclxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IFNwaGVyZSA9IHRoaXMubWF0ZXJpYWwubGVuZ3RoID4gMSA/IFNwaGVyZUJ1ZmZlckdlb21ldHJ5IDogU3BoZXJlR2VvbWV0cnk7XG5cbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFNwaGVyZShcbiAgICAgIHNpemUsIFxuICAgICAgd2lkdGhTZWdtZW50cyB8fCA3LCBcbiAgICAgIGhlaWdodFNlZ21lbnRzIHx8IDkpO1xuICAgIFxuICAgIGlmICh0aGlzLm1hdGVyaWFsLmxlbmd0aCkge1xuICAgICAgdGhpcy5nZW9tZXRyeS5jbGVhckdyb3VwcygpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRlcmlhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmdlb21ldHJ5LmFkZEdyb3VwKCAwLCBJbmZpbml0eSwgaSApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWVzaCA9IG5ldyBNZXNoKFxuICAgICAgdGhpcy5nZW9tZXRyeSxcbiAgICAgIHRoaXMubWF0ZXJpYWxcbiAgICApO1xuXG4gICAgdGhpcy5tZXNoLmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xuICAgIHRoaXMubWVzaC5yZWNlaXZlU2hhZG93ID0gcmVjZWl2ZVNoYWRvdztcblxuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMucm9vdCA9IHRoaXMubWVzaDtcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwib2JqL0xvd3BvbHlfdHJlZV9zYW1wbGUub2JqXCI7IiwiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IHRyZWUgZnJvbSAnLi4vLi4vb2JqL0xvd3BvbHlfdHJlZV9zYW1wbGUub2JqJztcbmltcG9ydCBMaWdodHMgZnJvbSAnLi4vTGlnaHRzL1R3b0RpcmVjdGlvbmFscyc7XG5pbXBvcnQgQmFzaWNTcGhlcmUgZnJvbSAnLi4vT2JqZWN0cy9CYXNpY1NwaGVyZSc7XG5pbXBvcnQgeyBPQkpMb2FkZXIgfSBmcm9tICd0aHJlZS1vYmotbXRsLWxvYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyZWVFeGFtcGxlIHtcbiAgY29uc3RydWN0b3Ioe3NjZW5lLCBvbkxvYWR9KSB7XG4gICAgXG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIHRoaXMuc2V0dXBDYW1lcmEoKTtcbiAgICBcbiAgICBzY2VuZS5yZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7XG4gICAgc2NlbmUucmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBUSFJFRS5QQ0ZTaGFkb3dNYXA7XG5cbiAgICB0aGlzLnJvb3QgPSBuZXcgVEhSRUUuR3JvdXAoKTtcblxuICAgIHRoaXMubG9hZFRyZWUoKTtcbiAgICB0aGlzLnNldHVwTGlnaHRzKCk7XG5cbiAgICBjb25zdCBzcGhlcmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICBlbWlzc2l2ZTogMHg1ZTAzMTEsXG4gICAgICBmbGF0U2hhZGluZzogdHJ1ZVxuICAgIH0pO1xuXG4gICAgc3BoZXJlTWF0ZXJpYWwuZW1pc3NpdmUuc2V0UkdCKDE1Ny8yNTUsIDIzOS8yNTUsIDI0Ny8yNTUpO1xuXG4gICAgdGhpcy5zcGhlcmUgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgc2l6ZTogNixcbiAgICAgIG1hdGVyaWFsOiBzcGhlcmVNYXRlcmlhbCxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDIwLFxuICAgICAgaGVpZ2h0U2VnbWVudHM6IDEwLFxuICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5zcGhlcmUucm9vdC5yb3RhdGVYKDI2ICogKE1hdGguUEkgLyAxODApKVxuXG4gICAgY29uc29sZS5sb2codGhpcy5zcGhlcmUucm9vdC5nZW9tZXRyeSlcblxuICAgIHRoaXMucm9vdC5hZGQodGhpcy5zcGhlcmUucm9vdCk7XG5cbiAgICBpZiAob25Mb2FkKSBvbkxvYWQoKTtcbiAgfVxuXG4gIGxvYWRpbmcocGVyY2VudGFnZSkgeyAgICBcbiAgICBcbiAgfVxuXG4gIHNldHVwTGlnaHRzKCkge1xuICAgIGNvbnN0IGxpZ2h0cyA9IG5ldyBMaWdodHMoe1xuICAgICAgaW50ZW5zaXR5OiAxLjgsXG4gICAgICBjYXN0U2hhZG93OiB0cnVlLFxuICAgICAgYmlhczogMC4wMDAwMixcbiAgICAgIHByb2plY3Rpb25TaWRlczogNi41LFxuICAgICAgbWFwU2l6ZTogMTAyNFxuICAgIH0pO1xuICAgIGxpZ2h0cy5yb3RhdGVZKE1hdGguUEkpO1xuICAgIHRoaXMucm9vdC5hZGQobGlnaHRzKTtcbiAgfVxuXG4gIHNldHVwQ2FtZXJhKCkge1xuICAgIHRoaXMuc2NlbmUuY2FtZXJhLnBvc2l0aW9uLmNvcHkobmV3IFRIUkVFLlZlY3RvcjMoMCwgNC41LCAxOCkpO1xuICAgIHRoaXMuc2NlbmUuY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKSk7XG4gIH1cblxuICBsb2FkVHJlZSgpIHtcbiAgICBjb25zdCBsb2FkZXIgPSBuZXcgT0JKTG9hZGVyKCk7XG4gICAgdGhpcy5vbkhlYWRSZWFkeSA9IHRoaXMub25UcmVlUmVhZHkuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uSGVhZExvYWRpbmcgPSB0aGlzLm9uSGVhZExvYWRpbmcuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVHJlZVJlYWR5ID0gdGhpcy5vblRyZWVSZWFkeS5iaW5kKHRoaXMpO1xuICAgIGxvYWRlci5sb2FkKFxuICAgICAgdHJlZSxcbiAgICAgIHRoaXMub25UcmVlUmVhZHksXG4gICAgICB0aGlzLm9uSGVhZExvYWRpbmcsXG4gICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FuIGVycm9yIGhhcHBlbmVkJywgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBvbkhlYWRMb2FkaW5nKHhocikge1xuICAgIGNvbnN0IGxvYWRpbmcgPSB4aHIubG9hZGVkIC8geGhyLnRvdGFsO1xuICAgIGNvbnNvbGUubG9nKChsb2FkaW5nICogMTAwKSArICclIGxvYWRlZCcpO1xuICAgIFxuICAgIHRoaXMubG9hZGluZyhNYXRoLnNpbihsb2FkaW5nKSk7XG4gIH1cblxuICBvblRyZWVSZWFkeShvYmplY3QpIHtcbiAgICBvYmplY3QudHJhdmVyc2UoKG9iaikgPT4ge1xuICAgICAgb2JqLmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgICAgb2JqLnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3BoZXJlLnJvb3QuZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoOyBpKyspIHsgICAgICBcbiAgICAgIHRoaXMuYWRkVHJlZShvYmplY3QsIHRoaXMuc3BoZXJlLnJvb3QuZ2VvbWV0cnkudmVydGljZXNbaV0sIDAuMSk7XG4gICAgfVxuICB9XG5cbiAgYWRkVHJlZShvYmplY3QsIG5ld1Bvc2l0aW9uLCBzY2FsZSkge1xuICAgIGNvbnN0IG5ld1RyZWUgPSBvYmplY3QuY2xvbmUoKTtcbiAgICAvLyBzZXQgcG9zaXRpb25cbiAgICBuZXdUcmVlLnBvc2l0aW9uLmNvcHkobmV3UG9zaXRpb24pO1xuICAgIC8vIHNjYWxlXG4gICAgbmV3VHJlZS5zY2FsZS5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoc2NhbGUsIHNjYWxlLCBzY2FsZSlcbiAgICApO1xuXG4gICAgY29uc3QgYXhpcyA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDEsIDApO1xuICAgIFxuICAgIG5ld1RyZWUucXVhdGVybmlvbi5zZXRGcm9tVW5pdFZlY3RvcnMoYXhpcywgXG4gICAgICBuZXdQb3NpdGlvbi5zdWIodGhpcy5zcGhlcmUucm9vdC5wb3NpdGlvbikuY2xvbmUoKS5ub3JtYWxpemUoKSk7XG5cbiAgICBuZXdUcmVlLmNoaWxkcmVuWzBdLm1hdGVyaWFsWzBdLmNvbG9yLnNldFJHQigxLCAwLjYsIDApO1xuICAgIG5ld1RyZWUuY2hpbGRyZW5bMF0ubWF0ZXJpYWxbMV0uY29sb3Iuc2V0UkdCKDIyNC8yNTUsIDI1Mi8yNTUsIDEpO1xuICAgIG5ld1RyZWUuY2hpbGRyZW5bMF0ubWF0ZXJpYWxbMV0uZW1pc3NpdmUuc2V0UkdCKDIyNC8yNTUqMC4yLCAyNTIvMjU1KjAuMiwgMSowLjIpO1xuICAgIG5ld1RyZWUucm90YXRlWShNYXRoLnJhbmRvbSgpICogMzYwKTtcbiAgICB0aGlzLnNwaGVyZS5yb290LmFkZChuZXdUcmVlKTtcbiAgfVxuXG4gIHVwZGF0ZSh0aW1lRWxhcHNlZCwgZGVsdGEpIHtcbiAgICBsZXQgbmV3Q29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoKTtcbiAgICB0aGlzLnNwaGVyZS5yb290Lm1hdGVyaWFsLmVtaXNzaXZlLmdldEhTTChuZXdDb2xvcik7XG4gICAgbmV3Q29sb3IucyA9IChNYXRoLnNpbih0aW1lRWxhcHNlZCArIChNYXRoLlBJICogMC4yNykpICsgMSkgKiAwLjU7XG4gICAgbmV3Q29sb3IubCA9IChNYXRoLmNvcyh0aW1lRWxhcHNlZCkgKyAxKSAqIDAuMTtcbiAgICB0aGlzLnNwaGVyZS5yb290Lm1hdGVyaWFsLmVtaXNzaXZlLnNldEhTTChuZXdDb2xvci5oLCBuZXdDb2xvci5zLCBuZXdDb2xvci5sKTtcblxuICAgIGZvciAobGV0IGNvbnRlZ2dpbyA9IDA7IGNvbnRlZ2dpbyA8IHRoaXMuc3BoZXJlLnJvb3QuY2hpbGRyZW4ubGVuZ3RoOyBjb250ZWdnaW8gPSBjb250ZWdnaW8gKyAxKSB7XG4gICAgICBjb25zdCB0cmVlID0gdGhpcy5zcGhlcmUucm9vdC5jaGlsZHJlbltjb250ZWdnaW9dLmNoaWxkcmVuWzBdO1xuICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSB0cmVlLnBvc2l0aW9uO1xuICAgICAgbmV3UG9zaXRpb24ueSA9IE1hdGguc2luKHRpbWVFbGFwc2VkICsgKGNvbnRlZ2dpbyAqIDAuMDUpKSAqIDMwO1xuICAgICAgdHJlZS5wb3NpdGlvbi5jb3B5KG5ld1Bvc2l0aW9uKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zcGhlcmUucm9vdC5yb3RhdGVZKGRlbHRhICogMC4zNSk7XG4gIH1cblxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==