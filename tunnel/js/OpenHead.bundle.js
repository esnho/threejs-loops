(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{30:function(e,t,o){"use strict";o.d(t,"a",function(){return n});var r=o(29);var n=function e(t){var o=t.size,n=void 0===o?5:o,i=t.material,a=t.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed=Math.random();var s=1,h=1,c=1;this.color=new r.Color,this.color.setRGB(s,h,c),this.material=i||new r.MeshBasicMaterial({color:this.color}),this.geometry=new r.BoxGeometry(n,n,n),this.mesh=new r.Mesh(this.geometry,this.material),a&&this.mesh.position.copy(a),this.root=this.mesh}},31:function(e,t,o){"use strict";o.d(t,"a",function(){return h});var r=o(29);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=i(this,a(t).call(this));var o=new r.HemisphereLight(16777215,16777215,3);return o.color.setHSL(Math.NormalizeHue(325),.1,.94),o.groundColor.setHSL(Math.NormalizeHue(325),.1,.64),o.position.set(0,2,0),e.add(o),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Group"]),t}()},32:function(e,t,o){"use strict";o.d(t,"a",function(){return p});var r=o(29);o(31);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u={intensity:1,castShadow:!1,bias:0,projectionSides:void 0,mapSize:512},p=function(e){function t(){var e,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];o=s(this,(e=h(t)).call.apply(e,[this].concat(a)));var p=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){i(e,t,o[t])})}return e}({},u,a[0]),l=p.intensity,d=p.castShadow,f=p.bias,w=p.projectionSides,y=p.mapSize;o.intensity=l,o.projectionSides=w,o.mapSize=y,console.log("mapsize",o.mapSize);var m=new r.DirectionalLight("white",.65*o.intensity),b=new r.DirectionalLight("white",.55*o.intensity);return m.shadow.bias=f||0,b.shadow.bias=f||0,m.castShadow=d,b.castShadow=d,o.updateProjection(m,o.projectionSides),o.updateProjection(b,o.projectionSides),o.updateShadowMap(m,o.mapSize),o.updateShadowMap(b,o.mapSize),m.position.copy(new r.Vector3(9,3.5,0)),b.position.copy(new r.Vector3(-10,2,0)),o.add(m,b),o}var o,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Group"]),o=t,(n=[{key:"updateProjection",value:function(e,t){e.shadow.camera.left=-t,e.shadow.camera.right=t,e.shadow.camera.updateProjectionMatrix()}},{key:"updateShadowMap",value:function(e,t){e.shadow.mapSize.width=t,e.shadow.mapSize.height=t}}])&&a(o.prototype,n),p&&a(o,p),t}()},34:function(e,t,o){"use strict";o.d(t,"a",function(){return n});var r=o(29);var n=function e(t){var o=t.size,n=void 0===o?5:o,i=t.material,a=t.position,s=t.widthSegments,h=t.heightSegments,c=t.castShadow,u=t.receiveShadow;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.seed=Math.random();var p=1,l=1,d=1;this.color=new r.Color,this.color.setRGB(p,l,d),this.material=i||new r.MeshBasicMaterial({color:this.color});var f=this.material.length>1?r.SphereBufferGeometry:r.SphereGeometry;if(this.geometry=new f(n,s||7,h||9),this.material.length){this.geometry.clearGroups();for(var w=0;w<i.length;w++)this.geometry.addGroup(0,1/0,w)}this.mesh=new r.Mesh(this.geometry,this.material),this.mesh.castShadow=c,this.mesh.receiveShadow=u,a&&this.mesh.position.copy(a),this.root=this.mesh}},41:function(e,t,o){e.exports=o.p+"obj/male.obj"},5:function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return p});var r=o(29),n=o(41),i=o.n(n),a=o(32),s=o(34),h=o(30),c=o(35);function u(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){var o=t.scene,n=t.onLoad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=o,this.setupCamera(),o.renderer.shadowMap.enabled=!0,o.renderer.shadowMap.type=void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?r.BasicShadowMap:r.PCFSoftShadowMap,this.root=new r.Group,this.wireMat=new r.MeshBasicMaterial({color:16777215,wireframe:!0});var i=new r.MeshStandardMaterial({emissive:6161169,flatShading:!0});this.loadingCube=new h.a({size:6,material:i}),this.root.add(this.loadingCube.root),this.loading(.5),this.setupLights(),this.createSpheres(),this.loadHead(),n&&n()}var t,o,n;return t=e,(o=[{key:"loading",value:function(e){this.loadingCube.root.scale.copy(new r.Vector3(1,1-e,1)),this.loadingCube.root.position.copy(new r.Vector3(0,-.5*this.loadingCube.root.geometry.parameters.height*e,0));var t=new r.Quaternion;t.setFromAxisAngle(new r.Vector3(0,1,0),-2*Math.PI*e),this.loadingCube.root.quaternion.copy(t)}},{key:"setupLights",value:function(){var e=new a.a({intensity:1.8,castShadow:!0,bias:2e-5,projectionSides:2.5,mapSize:2048});e.rotateY(Math.PI),this.root.add(e)}},{key:"setupCamera",value:function(){var e=this.scene.camera.aspect;this.scene.camera=new r.OrthographicCamera(10*e/-2,10*e/2,5,-5,1,150),this.scene.camera.position.copy(new r.Vector3(0,3.5,10)),this.scene.camera.lookAt(new r.Vector3(0,0,0))}},{key:"createSpheres",value:function(){var e=[new r.MeshStandardMaterial({flatShading:!0,roughness:0}),this.wireMat],t=[new r.MeshStandardMaterial({emissive:6161169,flatShading:!0}),this.wireMat];this.spheres=new r.Group,this.sphereA=new s.a({size:8,widthSegments:6,heightSegments:6,material:e,castShadow:!0,receiveShadow:!0}),this.sphereA.root.position.copy(new r.Vector3(2.5,0,3)),this.sphereB=new s.a({size:7,widthSegments:7,heightSegments:6,material:e,castShadow:!0,receiveShadow:!0}),this.sphereB.root.position.copy(new r.Vector3(2,.5,-7)),this.sphereC=new s.a({size:5,widthSegments:5,heightSegments:4,material:t,castShadow:!0,receiveShadow:!0}),this.sphereC.root.position.copy(new r.Vector3(-6.5,.5,-1)),this.spheres.add(this.sphereA.root),this.spheres.add(this.sphereB.root),this.spheres.add(this.sphereC.root),this.spheres.position.copy(new r.Vector3(0,8,0))}},{key:"loadHead",value:function(){var e=new c.OBJLoader;this.onHeadReady=this.onHeadReady.bind(this),this.onHeadLoading=this.onHeadLoading.bind(this),e.load(i.a,this.onHeadReady,this.onHeadLoading,function(e){console.log("An error happened",e)})}},{key:"onHeadLoading",value:function(e){var t=e.loaded/e.total;console.log(100*t+"% loaded"),this.loading(Math.sin(t))}},{key:"onHeadReady",value:function(e){this.root.remove(this.loadingCube.root),this.loadingCube=null,e.scale.copy(new r.Vector3(.2,.2,.2)),e.traverse(function(e){e.receiveShadow=!0,e.castShadow=!0,e.name&&e.name.indexOf("occhio")>=0&&(e.material.color.setRGB(0,0,0),e.material.specular.setRGB(.1,.1,.1),e.material.roughness=0)}),this.root.add(e),this.head=e,this.head.rotateY(-.25*Math.PI),this.head.add(this.spheres)}},{key:"update",value:function(e,t){if(this.head){var o=.1*e;this.head.rotateY(Math.sin(o)*t*.1),this.sphereA.root.rotateY(.3*t),this.sphereA.root.rotateX(.6*t),this.sphereB.root.rotateY(-.4*t),this.sphereB.root.rotateX(-.6*t),this.sphereC.root.rotateY(-.4*t),this.sphereC.root.rotateX(.6*t),this.sphereC.root.rotateZ(.9*t)}}}])&&u(t.prototype,o),n&&u(t,n),e}()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvT2JqZWN0cy9CYXNpY0N1YmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL0xpZ2h0cy9XaGl0ZUhlbWkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL0xpZ2h0cy9Ud29EaXJlY3Rpb25hbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL09iamVjdHMvQmFzaWNTcGhlcmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL29iai9tYWxlLm9iaiIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTG9vcHMvT3BlbkhlYWQuanMiXSwibmFtZXMiOlsiQmFzaWNDdWJlIiwiX3JlZiIsIl9yZWYkc2l6ZSIsInNpemUiLCJtYXRlcmlhbCIsInBvc2l0aW9uIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInNlZWQiLCJNYXRoIiwicmFuZG9tIiwiY29sb3IiLCJDb2xvciIsInNldFJHQiIsIk1lc2hCYXNpY01hdGVyaWFsIiwiZ2VvbWV0cnkiLCJCb3hHZW9tZXRyeSIsIm1lc2giLCJNZXNoIiwiY29weSIsInJvb3QiLCJXaGl0ZUhlbWkiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX2dldFByb3RvdHlwZU9mIiwiY2FsbCIsImhlbWlMaWdodCIsIkhlbWlzcGhlcmVMaWdodCIsInNldEhTTCIsIk5vcm1hbGl6ZUh1ZSIsImdyb3VuZENvbG9yIiwic2V0IiwiYWRkIiwiR3JvdXAiLCJkZWZhdWx0UGFyYW1zIiwiaW50ZW5zaXR5IiwiY2FzdFNoYWRvdyIsImJpYXMiLCJwcm9qZWN0aW9uU2lkZXMiLCJ1bmRlZmluZWQiLCJtYXBTaXplIiwiVHdvRGlyZWN0aW9uYWxzIiwiX2dldFByb3RvdHlwZU9mMiIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiYXBwbHkiLCJjb25jYXQiLCJfZGVmYXVsdFBhcmFtcyRhcmdzJCIsIl9vYmplY3RTcHJlYWQiLCJjb25zb2xlIiwibG9nIiwiZGlyZWN0aW9uYWxMaWdodCIsIkRpcmVjdGlvbmFsTGlnaHQiLCJkaXJlY3Rpb25hbExpZ2h0MiIsInNoYWRvdyIsInVwZGF0ZVByb2plY3Rpb24iLCJ1cGRhdGVTaGFkb3dNYXAiLCJWZWN0b3IzIiwibGlnaHQiLCJjYW1lcmEiLCJsZWZ0IiwicmlnaHQiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4Iiwid2lkdGgiLCJoZWlnaHQiLCJCYXNpY1NwaGVyZSIsIndpZHRoU2VnbWVudHMiLCJoZWlnaHRTZWdtZW50cyIsInJlY2VpdmVTaGFkb3ciLCJTcGhlcmUiLCJTcGhlcmVCdWZmZXJHZW9tZXRyeSIsIlNwaGVyZUdlb21ldHJ5IiwiY2xlYXJHcm91cHMiLCJpIiwiYWRkR3JvdXAiLCJJbmZpbml0eSIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsIk9wZW5IZWFkIiwic2NlbmUiLCJvbkxvYWQiLCJzZXR1cENhbWVyYSIsInJlbmRlcmVyIiwic2hhZG93TWFwIiwiZW5hYmxlZCIsInR5cGUiLCJ3aW5kb3ciLCJvcmllbnRhdGlvbiIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJUSFJFRSIsIndpcmVNYXQiLCJ3aXJlZnJhbWUiLCJsb2FkaW5nQ3ViZU1hdCIsImVtaXNzaXZlIiwiZmxhdFNoYWRpbmciLCJsb2FkaW5nQ3ViZSIsImxvYWRpbmciLCJzZXR1cExpZ2h0cyIsImNyZWF0ZVNwaGVyZXMiLCJsb2FkSGVhZCIsInBlcmNlbnRhZ2UiLCJzY2FsZSIsInBhcmFtZXRlcnMiLCJxdWF0ZXJuaW9uIiwic2V0RnJvbUF4aXNBbmdsZSIsIlBJIiwibGlnaHRzIiwiTGlnaHRzIiwicm90YXRlWSIsImFzcGVjdCIsImZydXN0dW1TaXplIiwibG9va0F0Iiwic3BoZXJlTWF0Iiwicm91Z2huZXNzIiwic3BoZXJlTWF0MiIsInNwaGVyZXMiLCJzcGhlcmVBIiwic3BoZXJlQiIsInNwaGVyZUMiLCJsb2FkZXIiLCJPQkpMb2FkZXIiLCJvbkhlYWRSZWFkeSIsImJpbmQiLCJvbkhlYWRMb2FkaW5nIiwibG9hZCIsImhlYWQiLCJlcnJvciIsInhociIsImxvYWRlZCIsInRvdGFsIiwic2luIiwib2JqZWN0IiwicmVtb3ZlIiwidHJhdmVyc2UiLCJvYmoiLCJuYW1lIiwic3BlY3VsYXIiLCJ0aW1lRWxhcHNlZCIsImRlbHRhIiwiYW5pbWF0aW9uVGltZSIsInJvdGF0ZVgiLCJyb3RhdGVaIl0sIm1hcHBpbmdzIjoieUlBT3FCQSxFQUNuQixTQUFBQSxFQUFBQyxHQUE0QyxJQUFBQyxFQUFBRCxFQUEvQkUsWUFBK0IsSUFBQUQsRUFBeEIsRUFBd0JBLEVBQXJCRSxFQUFxQkgsRUFBckJHLFNBQVVDLEVBQVdKLEVBQVhJLHNHQUFXQyxDQUFBQyxLQUFBUCxHQUMxQ08sS0FBS0MsS0FBT0MsS0FBS0MsU0FDakIsSUFBTUMsRUFBVyxFQUFYQSxFQUFnQixFQUFoQkEsRUFBcUIsRUFDM0JKLEtBQUtJLE1BQVEsSUFBSUMsUUFDakJMLEtBQUtJLE1BQU1FLE9BQU9GLEVBQVNBLEVBQVNBLEdBRXBDSixLQUFLSCxTQUFXQSxHQUFZLElBQUlVLG9CQUFrQixDQUNoREgsTUFBT0osS0FBS0ksUUFHZEosS0FBS1EsU0FBVyxJQUFJQyxjQUFZYixFQUFNQSxFQUFNQSxHQUU1Q0ksS0FBS1UsS0FBTyxJQUFJQyxPQUNkWCxLQUFLUSxTQUNMUixLQUFLSCxVQUdIQyxHQUNGRSxLQUFLVSxLQUFLWixTQUFTYyxLQUFLZCxHQUcxQkUsS0FBS2EsS0FBT2IsS0FBS1Usd3RCQ3hCQUksY0FDbkIsU0FBQUEsSUFBYyxJQUFBQywrRkFBQWhCLENBQUFDLEtBQUFjLEdBQ1pDLEVBQUFDLEVBQUFoQixLQUFBaUIsRUFBQUgsR0FBQUksS0FBQWxCLE9BRUEsSUFBTW1CLEVBQVksSUFBSUMsa0JBQWlCLFNBQVUsU0FBVSxHQUgvQyxPQUlkRCxFQUFVZixNQUFNaUIsT0FDZm5CLEtBQUtvQixhQUFhLEtBQ2xCLEdBQ0EsS0FFREgsRUFBVUksWUFBWUYsT0FDckJuQixLQUFLb0IsYUFBYSxL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akMzSSxLQUFLdUgsUUFBUTFHLEtBQUtnSSxRQUFRLEdBQU1GLEdBQ2hDM0ksS0FBS3VILFFBQVExRyxLQUFLaUksUUFBUSxHQUFNSCIsImZpbGUiOiIuL2pzL09wZW5IZWFkLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbG9yLFxuICBNZXNoQmFzaWNNYXRlcmlhbCxcbiAgQm94R2VvbWV0cnksXG4gIE1lc2hcbn0gZnJvbSAndGhyZWUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNpY0N1YmUge1xuICBjb25zdHJ1Y3Rvcih7c2l6ZSA9IDUsIG1hdGVyaWFsLCBwb3NpdGlvbn0pIHtcbiAgICB0aGlzLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGNvbnN0IGNvbG9yID0ge3I6MSAsZzoxLCBiOjF9O1xuICAgIHRoaXMuY29sb3IgPSBuZXcgQ29sb3IoKTtcbiAgICB0aGlzLmNvbG9yLnNldFJHQihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iKTtcblxuICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbCB8fCBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IHRoaXMuY29sb3JcbiAgICB9KTtcblxuICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgQm94R2VvbWV0cnkoc2l6ZSwgc2l6ZSwgc2l6ZSk7XG5cbiAgICB0aGlzLm1lc2ggPSBuZXcgTWVzaChcbiAgICAgIHRoaXMuZ2VvbWV0cnksXG4gICAgICB0aGlzLm1hdGVyaWFsXG4gICAgKTtcblxuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMucm9vdCA9IHRoaXMubWVzaDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcblx0R3JvdXAsXG5cdEhlbWlzcGhlcmVMaWdodFxufSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdoaXRlSGVtaSBleHRlbmRzIEdyb3VwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IGhlbWlMaWdodCA9IG5ldyBIZW1pc3BoZXJlTGlnaHQoIDB4ZmZmZmZmLCAweGZmZmZmZiwgMy4wICk7XG5cdFx0aGVtaUxpZ2h0LmNvbG9yLnNldEhTTChcblx0XHRcdE1hdGguTm9ybWFsaXplSHVlKDMyNSksIFxuXHRcdFx0MC4xLFxuXHRcdFx0MC45NFxuXHRcdCk7XG5cdFx0aGVtaUxpZ2h0Lmdyb3VuZENvbG9yLnNldEhTTChcblx0XHRcdE1hdGguTm9ybWFsaXplSHVlKDMyNSksIFxuXHRcdFx0MC4xLCBcblx0XHRcdDAuNjRcblx0XHQpO1xuXHRcdGhlbWlMaWdodC5wb3NpdGlvbi5zZXQoIDAsIDIsIDAgKTtcblx0XHR0aGlzLmFkZCggaGVtaUxpZ2h0ICk7XG5cdH1cbn1cbiIsImltcG9ydCB7XG4gICAgR3JvdXAsXG4gICAgRGlyZWN0aW9uYWxMaWdodCxcbiAgICBWZWN0b3IzXG4gIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IFdoaXRlSGVtaSBmcm9tICcuL1doaXRlSGVtaS5qcyc7XG5cbmNvbnN0IGRlZmF1bHRQYXJhbXMgPSB7XG4gICAgaW50ZW5zaXR5OiAxLFxuICAgIGNhc3RTaGFkb3c6IGZhbHNlLFxuICAgIGJpYXM6IDAsXG4gICAgcHJvamVjdGlvblNpZGVzOiB1bmRlZmluZWQsXG4gICAgbWFwU2l6ZTogNTEyLFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUd29EaXJlY3Rpb25hbHMgZXh0ZW5kcyBHcm91cCB7XG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICBzdXBlciguLi5hcmdzKTtcblx0XHRjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnNpdHksXG4gICAgICAgICAgICBjYXN0U2hhZG93LFxuICAgICAgICAgICAgYmlhcyxcbiAgICAgICAgICAgIHByb2plY3Rpb25TaWRlcyxcbiAgICAgICAgICAgIG1hcFNpemVcbiAgICAgICAgfSA9IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRQYXJhbXMsXG4gICAgICAgICAgICAuLi5hcmdzWzBdXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW50ZW5zaXR5ID0gaW50ZW5zaXR5O1xuICAgICAgICB0aGlzLnByb2plY3Rpb25TaWRlcyA9IHByb2plY3Rpb25TaWRlcztcbiAgICAgICAgdGhpcy5tYXBTaXplID0gbWFwU2l6ZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJtYXBzaXplXCIsIHRoaXMubWFwU2l6ZSlcbiAgICAgICAgXG4gICAgICAgIC8qIGNvbnN0IHdoaXRlRW1pID0gbmV3IFdoaXRlSGVtaSgpO1xuICAgICAgICB0aGlzLmFkZCh3aGl0ZUVtaSk7ICovXG5cbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KCd3aGl0ZScsIDAuNjUgKiB0aGlzLmludGVuc2l0eSk7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHQyID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoJ3doaXRlJywgMC41NSAqIHRoaXMuaW50ZW5zaXR5KTtcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cuYmlhcyA9IGJpYXMgfHwgMDtcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodDIuc2hhZG93LmJpYXMgPSBiaWFzIHx8IDA7XG4gICAgICAgIFxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LmNhc3RTaGFkb3cgPSBjYXN0U2hhZG93O1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Mi5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcblxuICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3Rpb24oZGlyZWN0aW9uYWxMaWdodCwgdGhpcy5wcm9qZWN0aW9uU2lkZXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3Rpb24oZGlyZWN0aW9uYWxMaWdodDIsIHRoaXMucHJvamVjdGlvblNpZGVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVTaGFkb3dNYXAoZGlyZWN0aW9uYWxMaWdodCwgdGhpcy5tYXBTaXplKTtcbiAgICAgICAgdGhpcy51cGRhdGVTaGFkb3dNYXAoZGlyZWN0aW9uYWxMaWdodDIsIHRoaXMubWFwU2l6ZSk7XG5cbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5jb3B5KFxuICAgICAgICAgICAgbmV3IFZlY3RvcjMoXG4gICAgICAgICAgICAgICAgOSxcbiAgICAgICAgICAgICAgICAzLjUsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQyLnBvc2l0aW9uLmNvcHkoXG4gICAgICAgICAgICBuZXcgVmVjdG9yMyhcbiAgICAgICAgICAgICAgICAtMTAsXG4gICAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5hZGQoZGlyZWN0aW9uYWxMaWdodCwgZGlyZWN0aW9uYWxMaWdodDIpO1xuICAgIH1cblxuICAgIHVwZGF0ZVByb2plY3Rpb24obGlnaHQsIHByb2plY3Rpb25TaWRlcykge1xuICAgICAgICBsaWdodC5zaGFkb3cuY2FtZXJhLmxlZnQgPSAtcHJvamVjdGlvblNpZGVzO1xuICAgICAgICBsaWdodC5zaGFkb3cuY2FtZXJhLnJpZ2h0ID0gcHJvamVjdGlvblNpZGVzO1xuICAgICAgICBsaWdodC5zaGFkb3cuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTaGFkb3dNYXAobGlnaHQsIG1hcFNpemUpIHtcbiAgICAgICAgbGlnaHQuc2hhZG93Lm1hcFNpemUud2lkdGggPSBtYXBTaXplO1xuICAgICAgICBsaWdodC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSBtYXBTaXplO1xuICAgIH1cbn0iLCJpbXBvcnQge1xuICBDb2xvcixcbiAgTWVzaEJhc2ljTWF0ZXJpYWwsXG4gIFNwaGVyZUJ1ZmZlckdlb21ldHJ5LFxuICBTcGhlcmVHZW9tZXRyeSxcbiAgTWVzaFxufSBmcm9tICd0aHJlZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2ljU3BoZXJlIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHNpemUgPSA1LFxuICAgIG1hdGVyaWFsLFxuICAgIHBvc2l0aW9uLFxuICAgIHdpZHRoU2VnbWVudHMsXG4gICAgaGVpZ2h0U2VnbWVudHMsXG4gICAgY2FzdFNoYWRvdyxcbiAgICByZWNlaXZlU2hhZG93XG4gIH0pIHtcbiAgICB0aGlzLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGNvbnN0IGNvbG9yID0ge3I6MSAsZzoxLCBiOjF9O1xuICAgIHRoaXMuY29sb3IgPSBuZXcgQ29sb3IoKTtcbiAgICB0aGlzLmNvbG9yLnNldFJHQihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iKTtcblxuICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbCB8fCBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IHRoaXMuY29sb3JcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBTcGhlcmUgPSB0aGlzLm1hdGVyaWFsLmxlbmd0aCA+IDEgPyBTcGhlcmVCdWZmZXJHZW9tZXRyeSA6IFNwaGVyZUdlb21ldHJ5O1xuXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBTcGhlcmUoXG4gICAgICBzaXplLCBcbiAgICAgIHdpZHRoU2VnbWVudHMgfHwgNywgXG4gICAgICBoZWlnaHRTZWdtZW50cyB8fCA5KTtcbiAgICBcbiAgICBpZiAodGhpcy5tYXRlcmlhbC5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnkuY2xlYXJHcm91cHMoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0ZXJpYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5hZGRHcm91cCggMCwgSW5maW5pdHksIGkgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1lc2ggPSBuZXcgTWVzaChcbiAgICAgIHRoaXMuZ2VvbWV0cnksXG4gICAgICB0aGlzLm1hdGVyaWFsXG4gICAgKTtcblxuICAgIHRoaXMubWVzaC5jYXN0U2hhZG93ID0gY2FzdFNoYWRvdztcbiAgICB0aGlzLm1lc2gucmVjZWl2ZVNoYWRvdyA9IHJlY2VpdmVTaGFkb3c7XG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHRoaXMubWVzaC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLnJvb3QgPSB0aGlzLm1lc2g7XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIm9iai9tYWxlLm9ialwiOyIsImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCBoZWFkIGZyb20gJy4uLy4uL29iai9tYWxlLm9iaic7XG5pbXBvcnQgTGlnaHRzIGZyb20gJy4uL0xpZ2h0cy9Ud29EaXJlY3Rpb25hbHMnO1xuaW1wb3J0IEJhc2ljU3BoZXJlIGZyb20gJy4uL09iamVjdHMvQmFzaWNTcGhlcmUnO1xuaW1wb3J0IEJhc2ljQ3ViZSBmcm9tICcuLi9PYmplY3RzL0Jhc2ljQ3ViZSc7XG5pbXBvcnQgeyBPQkpMb2FkZXIgfSBmcm9tICd0aHJlZS1vYmotbXRsLWxvYWRlcic7XG5cbmZ1bmN0aW9uIGlzTW9iaWxlRGV2aWNlKCkge1xuICByZXR1cm4gKHR5cGVvZiB3aW5kb3cub3JpZW50YXRpb24gIT09IFwidW5kZWZpbmVkXCIpIHx8IChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0lFTW9iaWxlJykgIT09IC0xKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9wZW5IZWFkIHtcbiAgY29uc3RydWN0b3Ioe3NjZW5lLCBvbkxvYWR9KSB7XG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIHRoaXMuc2V0dXBDYW1lcmEoKTtcbiAgICBcbiAgICBzY2VuZS5yZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7XG4gICAgc2NlbmUucmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBpc01vYmlsZURldmljZSgpID8gVEhSRUUuQmFzaWNTaGFkb3dNYXAgOiBUSFJFRS5QQ0ZTb2Z0U2hhZG93TWFwO1xuXG4gICAgdGhpcy5yb290ID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICB0aGlzLndpcmVNYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IDB4ZmZmZmZmLFxuICAgICAgd2lyZWZyYW1lOiB0cnVlXG4gICAgfSk7XG5cbiAgICBjb25zdCBsb2FkaW5nQ3ViZU1hdCA9IFxuICAgICAgbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICAgICAgZW1pc3NpdmU6IDB4NWUwMzExLFxuICAgICAgICBmbGF0U2hhZGluZzogdHJ1ZVxuICAgICAgfSlcbiAgICA7XG5cbiAgICB0aGlzLmxvYWRpbmdDdWJlID0gbmV3IEJhc2ljQ3ViZSh7XG4gICAgICBzaXplOjYsXG4gICAgICBtYXRlcmlhbDogbG9hZGluZ0N1YmVNYXQsXG4gICAgfSk7XG5cbiAgICB0aGlzLnJvb3QuYWRkKHRoaXMubG9hZGluZ0N1YmUucm9vdCk7XG5cbiAgICB0aGlzLmxvYWRpbmcoMC41KTtcblxuICAgIHRoaXMuc2V0dXBMaWdodHMoKTtcblxuICAgIHRoaXMuY3JlYXRlU3BoZXJlcygpO1xuICAgIFxuICAgIHRoaXMubG9hZEhlYWQoKTtcblxuICAgIGlmIChvbkxvYWQpIG9uTG9hZCgpO1xuICB9XG5cbiAgbG9hZGluZyhwZXJjZW50YWdlKSB7ICAgIFxuICAgIHRoaXMubG9hZGluZ0N1YmUucm9vdC5zY2FsZS5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMSwgMSAtIHBlcmNlbnRhZ2UsIDEpXG4gICAgKTtcblxuICAgIHRoaXMubG9hZGluZ0N1YmUucm9vdC5wb3NpdGlvbi5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMCxcbiAgICAgICAgLTAuNSAqIHRoaXMubG9hZGluZ0N1YmUucm9vdC5nZW9tZXRyeS5wYXJhbWV0ZXJzLmhlaWdodCAqIChwZXJjZW50YWdlKSxcbiAgICAgICAgMClcbiAgICApXG5cbiAgICB2YXIgcXVhdGVybmlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gICAgcXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKCBuZXcgVEhSRUUuVmVjdG9yMyggMCwgMSwgMCApLCAoTWF0aC5QSSAqIC0yKSAqIHBlcmNlbnRhZ2UgKTtcbiAgICB0aGlzLmxvYWRpbmdDdWJlLnJvb3QucXVhdGVybmlvbi5jb3B5KHF1YXRlcm5pb24pXG4gIH1cblxuICBzZXR1cExpZ2h0cygpIHtcbiAgICBjb25zdCBsaWdodHMgPSBuZXcgTGlnaHRzKHtcbiAgICAgIGludGVuc2l0eTogMS44LFxuICAgICAgY2FzdFNoYWRvdzogdHJ1ZSxcbiAgICAgIGJpYXM6IDAuMDAwMDIsXG4gICAgICBwcm9qZWN0aW9uU2lkZXM6IDIuNSxcbiAgICAgIG1hcFNpemU6IDIwNDhcbiAgICB9KTtcbiAgICBsaWdodHMucm90YXRlWShNYXRoLlBJKTtcbiAgICB0aGlzLnJvb3QuYWRkKGxpZ2h0cyk7XG4gIH1cblxuICBzZXR1cENhbWVyYSgpIHtcbiAgICBjb25zdCBmcnVzdHVtU2l6ZSA9IDEwO1xuICAgIGNvbnN0IGFzcGVjdCA9IHRoaXMuc2NlbmUuY2FtZXJhLmFzcGVjdDtcbiAgICB0aGlzLnNjZW5lLmNhbWVyYSA9IG5ldyBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEoXG4gICAgICBmcnVzdHVtU2l6ZSAqIGFzcGVjdCAvIC0yLFxuICAgICAgZnJ1c3R1bVNpemUgKiBhc3BlY3QgLyAyLFxuICAgICAgZnJ1c3R1bVNpemUgLyAyLFxuICAgICAgZnJ1c3R1bVNpemUgLyAtMixcbiAgICAgIDEsXG4gICAgICAxNTApO1xuICAgIHRoaXMuc2NlbmUuY2FtZXJhLnBvc2l0aW9uLmNvcHkobmV3IFRIUkVFLlZlY3RvcjMoMCwgMy41LCAxMCkpO1xuICAgIHRoaXMuc2NlbmUuY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKSk7XG4gIH1cblxuICBjcmVhdGVTcGhlcmVzKCkge1xuICAgIGNvbnN0IHNwaGVyZU1hdCA9IFtcbiAgICAgIG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgIGZsYXRTaGFkaW5nOiB0cnVlLFxuICAgICAgICByb3VnaG5lc3M6IDBcbiAgICAgIH0pLFxuICAgICAgdGhpcy53aXJlTWF0XG4gICAgXTtcbiAgICBjb25zdCBzcGhlcmVNYXQyID0gW1xuICAgICAgbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICAgICAgZW1pc3NpdmU6IDB4NWUwMzExLFxuICAgICAgICBmbGF0U2hhZGluZzogdHJ1ZVxuICAgICAgfSksXG4gICAgICB0aGlzLndpcmVNYXRcbiAgICBdO1xuICAgIHRoaXMuc3BoZXJlcyA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgIHRoaXMuc3BoZXJlQSA9IG5ldyBCYXNpY1NwaGVyZSh7XG4gICAgICBzaXplOiA4LFxuICAgICAgd2lkdGhTZWdtZW50czogNixcbiAgICAgIGhlaWdodFNlZ21lbnRzOiA2LFxuICAgICAgbWF0ZXJpYWw6IHNwaGVyZU1hdCxcbiAgICAgIGNhc3RTaGFkb3c6IHRydWUsXG4gICAgICByZWNlaXZlU2hhZG93OiB0cnVlLFxuICAgIH0pO1xuICAgIHRoaXMuc3BoZXJlQS5yb290LnBvc2l0aW9uLmNvcHkoXG4gICAgICBuZXcgVEhSRUUuVmVjdG9yMygyLjUsIDAsIDMpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnNwaGVyZUIgPSBuZXcgQmFzaWNTcGhlcmUoe1xuICAgICAgc2l6ZTogNyxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDcsXG4gICAgICBoZWlnaHRTZWdtZW50czogNixcbiAgICAgIG1hdGVyaWFsOiBzcGhlcmVNYXQsXG4gICAgICBjYXN0U2hhZG93OiB0cnVlLFxuICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZSxcbiAgICB9KTtcbiAgICB0aGlzLnNwaGVyZUIucm9vdC5wb3NpdGlvbi5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMiwgMC41LCAtNylcbiAgICApO1xuICAgIFxuICAgIHRoaXMuc3BoZXJlQyA9IG5ldyBCYXNpY1NwaGVyZSh7XG4gICAgICBzaXplOiA1LFxuICAgICAgd2lkdGhTZWdtZW50czogNSxcbiAgICAgIGhlaWdodFNlZ21lbnRzOiA0LFxuICAgICAgbWF0ZXJpYWw6IHNwaGVyZU1hdDIsXG4gICAgICBjYXN0U2hhZG93OiB0cnVlLFxuICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZSxcbiAgICB9KTtcbiAgICB0aGlzLnNwaGVyZUMucm9vdC5wb3NpdGlvbi5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoLTYuNSwgMC41LCAtMSlcbiAgICApO1xuICAgIFxuICAgIHRoaXMuc3BoZXJlcy5hZGQodGhpcy5zcGhlcmVBLnJvb3QpO1xuICAgIHRoaXMuc3BoZXJlcy5hZGQodGhpcy5zcGhlcmVCLnJvb3QpO1xuICAgIHRoaXMuc3BoZXJlcy5hZGQodGhpcy5zcGhlcmVDLnJvb3QpO1xuICAgIFxuICAgIHRoaXMuc3BoZXJlcy5wb3NpdGlvbi5jb3B5KFxuICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMCwgOCwgMClcbiAgICApO1xuICB9XG5cbiAgbG9hZEhlYWQoKSB7XG4gICAgY29uc3QgbG9hZGVyID0gbmV3IE9CSkxvYWRlcigpO1xuICAgIHRoaXMub25IZWFkUmVhZHkgPSB0aGlzLm9uSGVhZFJlYWR5LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkhlYWRMb2FkaW5nID0gdGhpcy5vbkhlYWRMb2FkaW5nLmJpbmQodGhpcyk7XG4gICAgbG9hZGVyLmxvYWQoXG4gICAgICBoZWFkLFxuICAgICAgdGhpcy5vbkhlYWRSZWFkeSxcbiAgICAgIHRoaXMub25IZWFkTG9hZGluZyxcbiAgICAgIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnQW4gZXJyb3IgaGFwcGVuZWQnLCBlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIG9uSGVhZExvYWRpbmcoeGhyKSB7XG4gICAgY29uc3QgbG9hZGluZyA9IHhoci5sb2FkZWQgLyB4aHIudG90YWw7XG4gICAgY29uc29sZS5sb2coKGxvYWRpbmcgKiAxMDApICsgJyUgbG9hZGVkJyk7XG4gICAgXG4gICAgdGhpcy5sb2FkaW5nKE1hdGguc2luKGxvYWRpbmcpKTtcbiAgfVxuXG4gIG9uSGVhZFJlYWR5KG9iamVjdCkge1xuICAgIHRoaXMucm9vdC5yZW1vdmUoIHRoaXMubG9hZGluZ0N1YmUucm9vdCApO1xuICAgIHRoaXMubG9hZGluZ0N1YmUgPSBudWxsO1xuICAgIFxuICAgIG9iamVjdC5zY2FsZS5jb3B5KG5ldyBUSFJFRS5WZWN0b3IzKDAuMiwgMC4yLCAwLjIpKTtcbiAgICBvYmplY3QudHJhdmVyc2UoKG9iaikgPT4ge1xuICAgICAgb2JqLnJlY2VpdmVTaGFkb3cgPSB0cnVlO1xuICAgICAgb2JqLmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgICAgaWYgKG9iai5uYW1lICYmIG9iai5uYW1lLmluZGV4T2YoJ29jY2hpbycpID49IDApIHtcbiAgICAgICAgb2JqLm1hdGVyaWFsLmNvbG9yLnNldFJHQigwLCAwLCAwKTtcbiAgICAgICAgb2JqLm1hdGVyaWFsLnNwZWN1bGFyLnNldFJHQigwLjEsIDAuMSwgMC4xKTtcbiAgICAgICAgb2JqLm1hdGVyaWFsLnJvdWdobmVzcyA9IDA7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5yb290LmFkZChvYmplY3QpO1xuICAgIHRoaXMuaGVhZCA9IG9iamVjdDtcbiAgICB0aGlzLmhlYWQucm90YXRlWSgtKE1hdGguUEkgKiAwLjI1KSk7XG4gICAgdGhpcy5oZWFkLmFkZCh0aGlzLnNwaGVyZXMpO1xuICB9XG5cbiAgdXBkYXRlKHRpbWVFbGFwc2VkLCBkZWx0YSkge1xuICAgIGlmICh0aGlzLmhlYWQpIHtcbiAgICAgIGNvbnN0IGFuaW1hdGlvblRpbWUgPSB0aW1lRWxhcHNlZCAqIDAuMTtcbiAgICAgIHRoaXMuaGVhZC5yb3RhdGVZKChNYXRoLnNpbihhbmltYXRpb25UaW1lKSkgKiBkZWx0YSAqIDAuMSk7XG5cbiAgICAgIHRoaXMuc3BoZXJlQS5yb290LnJvdGF0ZVkoMC4zICogZGVsdGEpO1xuICAgICAgdGhpcy5zcGhlcmVBLnJvb3Qucm90YXRlWCgwLjYgKiBkZWx0YSk7XG5cbiAgICAgIHRoaXMuc3BoZXJlQi5yb290LnJvdGF0ZVkoLTAuNCAqIGRlbHRhKTtcbiAgICAgIHRoaXMuc3BoZXJlQi5yb290LnJvdGF0ZVgoLTAuNiAqIGRlbHRhKTtcblxuICAgICAgdGhpcy5zcGhlcmVDLnJvb3Qucm90YXRlWSgtMC40ICogZGVsdGEpO1xuICAgICAgdGhpcy5zcGhlcmVDLnJvb3Qucm90YXRlWCgwLjYgKiBkZWx0YSk7XG4gICAgICB0aGlzLnNwaGVyZUMucm9vdC5yb3RhdGVaKDAuOSAqIGRlbHRhKTtcbiAgICB9XG4gIH1cblxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==